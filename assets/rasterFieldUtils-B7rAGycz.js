import{c7 as x}from"./index-CzvLtnX1.js";const V="Raster.",s="Raster.Dim.",$=".Max",u={servicePixelValue:"Raster.ServicePixelValue",rawServicePixelValue:"Raster.ServicePixelValue.Raw",itemPixelValue:"Raster.ItemPixelValue",magnitude:"Raster.Magnitude",direction:"Raster.Direction",variable:"Raster.Variable"},w=new Map([["quarters","Quarter"],["months","Month"],["weeks","Week of the year"],["days","Day of the year"]]);function c(e,a){return new x({name:e,alias:a,domain:null,editable:!1,length:50,type:"string"})}function d(e,a){return new x({name:e,alias:a,domain:null,editable:!1,type:"double"})}function b(e,a){return new x({name:e,alias:a,domain:null,editable:!1,type:"date"})}function P(e){return c(u.servicePixelValue,e??"Service Pixel Value")}function S(e){return c(u.rawServicePixelValue,e??"Raw Service Pixel Value")}function R(){return c(u.itemPixelValue,"Item Pixel Value")}function M(e){return c(`${u.servicePixelValue}.${e}`,e)}function I(e){return d(`${u.magnitude}`,"Magnitude"+(e?` (${e})`:""))}function D(){return d(`${u.direction}`,"Direction (Â°)")}function E(e){return e.fields.filter(a=>a.type!=="oid"&&a.name.toLowerCase()!=="value").map(a=>{const t=a.clone();return t.name=`${V}${a.name}`,t})}function N(e){const a=new Set,t=new Set,i=new Map;return e.variables.forEach(({dimensions:n})=>{n.forEach(r=>{if(r.recurring)i.set(r.name,r.unit);else{const o=r.unit?.trim()==="ISO8601"?a:t;o.add(r.name),r.hasRanges&&o.add(`${r.name}${$}`)}})}),[c(u.variable,"Variable"),...[...a].map(n=>b(`${s}${n}`,h(n))),...[...t].map(n=>d(`${s}${n}`,h(n))),...[...i].map(([n,r])=>d(`${s}${n}`,y(n,r)))]}function y(e,a){return a=a?.toLowerCase(),a&&w.has(a)?w.get(a):h(e)}function h(e){const a=e.endsWith($),t=a?e.slice(0,-4):e,i=t==="StdTime"?"Standard Time":t==="StdZ"?"Standard Z":t;return a?`${i} Max`:i}function p(e,a){return a?new Date(e):e}function W(e,a,t){t?.length&&(a[u.variable]=t[0].variableName,t.forEach(({dimensionName:i,values:n})=>{if(i&&n?.length){const r=`${s}${i}`,o=e.find(({name:f})=>f===r);if(!o)return;const m=o.type==="date",l=n[0];if(Array.isArray(l)){if(a[`${s}${i}`]=p(l[0],m),l[1]!=null){const f=`${s}${i}${$}`;if(e.some(({name:v})=>v===f)){const v=p(l[1],m);a[f]=v}}}else a[`${s}${i}`]=p(l,m)}}))}function T(e,a){if(a.pixelType.startsWith("f")&&e.forEach(({format:t,fieldName:i})=>{t&&i&&/^raster\.(item|service)pixelvalue/i.test(i)&&(t.places=2)}),a.multidimensionalInfo){const t=a.multidimensionalInfo.variables.flatMap(({dimensions:i})=>i);e.forEach(({format:i,fieldName:n})=>{if(i&&n?.startsWith(s)){const r=n.slice(s.length),o=`${r}${$}`;t.find(({name:l})=>l===r||l===o)?.values?.every(l=>Number.isInteger(l))&&(i.places=0)}})}}export{D as $,W as V,s as a,T as b,S as c,I as d,M as f,R as m,V as n,P as o,N as p,u as t,E as v};
