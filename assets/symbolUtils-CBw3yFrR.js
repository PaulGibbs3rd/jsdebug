const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/previewWebStyleSymbol-BvI-a2av.js","assets/index-CzvLtnX1.js","assets/utils-CtGOd0WT.js","assets/utils-CICEYmO-.js","assets/cimSymbolUtils-D5sHtYK8.js","assets/webStyleSymbolUtils-DI4Hu7Mk.js","assets/devEnvironmentUtils-8WtPGj6h.js","assets/previewSymbol2D-DwOLiBFm.js","assets/previewCIMSymbol-Fb2C3MUT.js","assets/CIMSymbolHelper-Dul3J0hn.js","assets/BidiEngine-QXap_35O.js","assets/rasterizingUtils-C1i-aeFk.js","assets/Rect-CUzevAry.js","assets/BoundingBox-CfNhF6-u.js","assets/CIMSymbolRasterizer-D6fv-nWa.js","assets/CIMResourceManager-DkXJjrjP.js","assets/OverrideHelper-DIx2mYgX.js","assets/callExpressionWithFeature-BqIGys1L.js"])))=>i.map(i=>d[i]);
import{bk as Ee,ii as Ve,_ as R,d_ as je,eR as De,aD as S,v2 as Oe,so as A,l$ as X,u_ as oe,v3 as N,c5 as Y,v4 as Ne,v5 as J,u$ as Ze,v6 as Ue,v7 as Te,v8 as ee,K as Pe,H,v9 as ye,bd as Be,gW as ge,eT as C,aA as Fe,va as Ge,vb as We,d$ as qe}from"./index-CzvLtnX1.js";import{N as He,$ as Qe}from"./utils-CtGOd0WT.js";import{g as Ke,M as ve,f as Xe,b as Ye,c as Je,w as we,p as et,a as W,D as tt,J as at,y as nt}from"./utils-CICEYmO-.js";import{resolveWebStyleSymbol as lt}from"./webStyleSymbolUtils-DI4Hu7Mk.js";const ot=/^-?(\d+)(\.(\d+))?$/i;function it(e,t){return e-t}function st(e,t){let a,n;return a=Number(e.toFixed(t)),a<e?n=a+1/10**t:(n=a,a-=1/10**t),a=Number(a.toFixed(t)),n=Number(n.toFixed(t)),[a,n]}function rt(e,t,a,n,l){const o=ct(e,t,a,n),i=o.previous==null||o.previous<=l,s=o.next==null||o.next<=l;return i&&s||o.previous+o.next<=2*l}function be(e){const t=String(e),a=t.match(ot);if(a?.[1])return{integer:a[1].split("").length,fractional:a[3]?a[3].split("").length:0};if(t.toLowerCase().includes("e")){const n=t.split("e"),l=n[0],o=n[1];if(l&&o){const i=Number(l);let s=Number(o);const r=s>0;r||(s=Math.abs(s));const u=be(i);return r?(u.integer+=s,s>u.fractional?u.fractional=0:u.fractional-=s):(u.fractional+=s,s>u.integer?u.integer=1:u.integer-=s),u}}return{integer:0,fractional:0}}function ct(e,t,a,n){const l={previous:null,next:null};if(a!=null){const o=e-a,i=t-a-o;l.previous=Math.floor(Math.abs(100*i/o))}if(n!=null){const o=n-e,i=n-t-o;l.next=Math.floor(Math.abs(100*i/o))}return l}function wa(e,t={}){const a=e.slice(),{tolerance:n=2,strictBounds:l=!1,indexes:o=a.map((i,s)=>s)}=t;o.sort(it);for(let i=0;i<o.length;i++){const s=o[i],r=a[s],u=s===0?null:a[s-1],p=s===a.length-1?null:a[s+1],d=be(r).fractional;if(d){let h,f=0,c=!1;for(;f<=d&&!c;){const y=st(r,f);h=l&&i===0?y[1]:y[0],c=rt(r,h,u,p,n),f++}c&&(a[s]=h)}}return a}const ut={maximumFractionDigits:20};function ht(e){return Ee(e,ut)}const pt="<",mt=">";function ft(e,t,a,n){let l="";return t===0?l=`${pt} `:t===a&&(l=`${mt} `),l+(n?He(e,n):ht(e))}const ba=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII="];async function dt(e){if(!("visualVariables"in e)||!e.visualVariables)return null;const t=e.visualVariables.find(i=>i.type==="color");if(!t)return null;let a=null,n=null;if(t.stops){if(t.stops.length===1)return t.stops[0].color;a=t.stops[0].value,n=t.stops[t.stops.length-1].value}const l=a!=null&&n!=null?a+(n-a)/2:0,{getColor:o}=await R(async()=>{const{getColor:i}=await import("./index-CzvLtnX1.js").then(s=>s.HD);return{getColor:i}},[]);return o(t,l)??null}async function xa(e,t){const a=e.trailCap,n=e.trailWidth||1,l=t||await dt(e)||e.color;return new Ve({cap:a,color:l,width:n})}function yt(e,t){if(!t.field)return null;if("featureReduction"in e)switch(e.featureReduction?.type){case"cluster":case"binning":{const a=e.featureReduction.fields.find(({name:n})=>n.toLowerCase()===t.field.toLowerCase());return a&&"getField"in e?e.getField(a.onStatisticField):null}}return"getField"in e?e.getField?.(t.field):null}function gt(e,t){const a="popupTemplate"in e?e.popupTemplate?.fieldInfos:null;if(a?.length&&t)return a.find(n=>n.fieldName?.toLowerCase()===t.toLowerCase())?.format?.dateFormat}function Aa(e,t,a){const n=yt(e,t);if(!n||!Qe(n)&&!je(n))return null;let l=gt(e,n.name);if(!l&&n.type==="date"){let o=0,i=0;t.stops?(o=t.stops?.at(0)?.value??o,i=t.stops?.at(-1)?.value??i):"minDataValue"in t&&"maxDataValue"in t&&(o=t.minDataValue??o,i=t.maxDataValue??i),l=i-o>2*De.days?"short-date":"short-date-short-time"}return{fieldType:n.type,format:l,timeZoneOptions:{layerTimeZone:"preferredTimeZone"in e?e.preferredTimeZone:null,viewTimeZone:a,datesInUnknownTimezone:"datesInUnknownTimezone"in e&&e.datesInUnknownTimezone}}}function La(e){if("authoringInfo"in e)return e.authoringInfo?.visualVariables?.find(({theme:t})=>t==="reference-size")}const vt=new S([64,64,64]);function xe(e,t){const a=[],n=e.length-1;return e.length===5?a.push(0,2,4):a.push(0,n),e.map((l,o)=>a.includes(o)?ft(l,o,n,t):null)}async function ka(e,t,a){let n=!1,l=[],o=[];if(e.stops){const u=e.stops;l=u.map(p=>p.value),n=u.some(p=>!!p.label),n&&(o=u.map(p=>p.label))}const i=l[0],s=l[l.length-1];if(i==null&&s==null)return null;const r=n?null:xe(l,a);return(await Promise.all(l.map(async(u,p)=>({value:u,color:e.type==="opacity"?await wt(u,e,t):(await R(async()=>{const{getColor:d}=await import("./index-CzvLtnX1.js").then(h=>h.HD);return{getColor:d}},[])).getColor(e,u),label:n?o[p]:r?.[p]??""})))).reverse()}async function wt(e,t,a){const n=new S(a??vt),l=(await R(async()=>{const{getOpacity:o}=await import("./index-CzvLtnX1.js").then(i=>i.HD);return{getOpacity:o}},[])).getOpacity(t,e);return l!=null&&(n.a=l),n}function $a(e){let t=!1,a=[],n=[];a=e.map(s=>s.value),t=e.some(s=>!!s.label),t&&(n=e.map(s=>s.label??""));const l=a[0],o=a[a.length-1];if(l==null&&o==null)return null;const i=t?null:xe(a);return a.map((s,r)=>({value:s,color:bt(s,e),label:t?n[r]:i?.[r]??""})).reverse()}function bt(e,t){const{startIndex:a,endIndex:n,weight:l}=xt(e,t);if(a===n)return t[a].color;const o=S.blendColors(t[a].color,t[n].color,l);return new S(o)}function xt(e,t){let a=0,n=t.length-1;return t.some((l,o)=>e<l.value?(n=o,!0):(a=o,!1)),{startIndex:a,endIndex:n,weight:(e-t[a].value)/(t[n].value-t[a].value)}}function Ma(e,t){let a=[];if(e&&e.type==="multipart")e.colorRamps.reverse().forEach((n,l)=>{l===0?a.push({value:t.max,color:new S(n.toColor),label:"high"}):a.push({value:null,color:new S(n.toColor),label:""}),l===e.colorRamps.length-1?a.push({value:t.min,color:new S(n.fromColor),label:"low"}):a.push({value:null,color:new S(n.fromColor),label:""})});else{let n,l;e&&e.type==="algorithmic"?(n=e.fromColor,l=e.toColor):(n=[0,0,0,1],l=[255,255,255,1]),a=[{value:t.max,color:new S(l),label:"high"},{value:t.min,color:new S(n),label:"low"}]}return a}function Sa(e){if(!e.colorStops)return[];const t=[...e.colorStops].filter(n=>n.color?.a>0);let a=t.length-1;if(t[0]){const n=t[a];n&&n.ratio!==1&&(t.push(new Oe({ratio:1,color:n.color})),a++)}return t.map((n,l)=>{let o="";return l===0?o=e.legendOptions?.minLabel||"low":l===a&&(o=e.legendOptions?.maxLabel||"high"),{color:n.color,label:o,ratio:n.ratio}}).reverse()}var M;(function(e){e[e.size=22]="size",e[e.lineWidth=50]="lineWidth",e[e.maxSize=120]="maxSize",e[e.maxOutlineSize=80]="maxOutlineSize",e[e.tallSymbolWidth=20]="tallSymbolWidth"})(M||(M={}));const Z={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],meshSymbol3DFill:[{type:"path",path:"M -10,-8 L 6,0 L 6,6 L -10,6 L -10,-8 Z"},{type:"path",path:"M -10,-8 L -7,-10 L 9,-2 L 6,0 L -10,-8 Z"},{type:"path",path:"M 6,0 L 9,-2 L 9,4 L 6,6 L 6,0 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}]};function At(e,t,a){const n=M.size;let l=n,o=n;e<1?l*=.75:e>1&&(o*=1.25);const i=0,s=0;let r=n,u=n;return t&&a&&(l=o=r=u=0),[{type:"path",path:[{command:"M",values:[r,i]},{command:"L",values:[a?r:.875*r,i]},{command:"L",values:[a?l-.5*r:s,o-.5*u]},{command:"L",values:[l-.5*r,o-.5*u]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[r,i]},{command:"L",values:[r,t?i:.125*u]},{command:"L",values:[l-.5*r,t?o-.5*u:u]},{command:"L",values:[l-.5*r,o-.5*u]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[l-.5*r,o-.5*u]},{command:"L",values:[a?l-.5*r:s,o-.5*u]},{command:"L",values:[a?l-.5*r:s,t?o-.5*u:u]},{command:"L",values:[l-.5*r,t?o-.5*u:u]},{command:"Z",values:[]}]}]}function Lt(e){const t=M.size,a=.5*e,n=0,l=0;return[{type:"path",path:[{command:"M",values:[l,.7*t*.5]},{command:"L",values:[.3*t,.7*t]},{command:"L",values:[.3*t,.7*t+a]},{command:"L",values:[l,.7*t+a-.7*t*.5]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*t,.7*t]},{command:"L",values:[.3*t,.7*t+a]},{command:"L",values:[t,a]},{command:"L",values:[t,n]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*t,n]},{command:"L",values:[t,n]},{command:"L",values:[.3*t,.7*t]},{command:"L",values:[l,.7*t*.5]},{command:"Z",values:[]}]}]}function kt(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]}function $t(e,t){let a=t?M.tallSymbolWidth:e;const n=e,l=t?4:6;a<=M.size?a-=.5*l:a-=l;const o=0,i=0,s=t?.35*a:.5*a;return[{type:"path",path:[{command:"M",values:[.5*a,o]},{command:"L",values:[a,.5*s]},{command:"L",values:[.5*a,s]},{command:"L",values:[i,.5*s]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[o,.5*s]},{command:"L",values:[.5*a,s]},{command:"L",values:[.5*a,n]},{command:"L",values:[i,n-.5*s]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*a,s]},{command:"L",values:[.5*a,n]},{command:"L",values:[a,n-.5*s]},{command:"L",values:[a,.5*s]},{command:"Z",values:[]}]}]}function Mt(e,t){let a=t?M.tallSymbolWidth:e;const n=e,l=t?4:6;a<=M.size?a-=.5*l:a-=l;const o=.5*a,i=.15*a,s=0,r=n-i;return[{type:"ellipse",cx:.5*a,cy:r,rx:o,ry:i},{type:"path",path:[{command:"M",values:[s,i]},{command:"L",values:[s,r]},{command:"L",values:[a,r]},{command:"L",values:[a,i]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*a,cy:i,rx:o,ry:i}]}function St(e,t){let a=t?M.tallSymbolWidth:e;const n=e,l=t?4:6;a<=M.size?a-=.5*l:a-=l;const o=.15*a,i=n-o;return[{type:"ellipse",cx:.5*a,cy:i,rx:.5*a,ry:o},{type:"path",path:[{command:"M",values:[.5*a,0]},{command:"L",values:[a,i]},{command:"L",values:[0,i]},{command:"Z",values:[]}]}]}function zt(e){let t=e;const a=e,n=6;t<M.size?t-=.5*n:t-=n;const l=.15*t,o=0;return[{type:"path",path:[{command:"M",values:[0,o]},{command:"L",values:[t,o]},{command:"L",values:[.5*t,a-l]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*t,cy:o,rx:.5*t,ry:l}]}function Ct(e){let t=e;const a=e,n=4;t<M.size?t-=.5*n:t-=n;const l=0,o=0,i=t,s=a,r=Math.floor(e/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*i,l]},{command:"L",values:[i,.5*s-r]},{command:"L",values:[.45*i-r,.5*s+r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*i,l]},{command:"L",values:[.45*i-r,.5*s+r]},{command:"L",values:[o,.5*s-r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[o,.5*s-r]},{command:"L",values:[.45*i-r,.5*s+r]},{command:"L",values:[.45*i,a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*i,a]},{command:"L",values:[i,.5*s-r]},{command:"L",values:[.45*i-r,.5*s+r]},{command:"Z",values:[]}]}]}function It(e){const t=e,a=2;let n=e;n<M.size?n-=.5*a:n-=a;const l=0,o=0;return[{type:"path",path:[{command:"M",values:[.45*t,l]},{command:"L",values:[t,n]},{command:"L",values:[.45*t,.6*n]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*t,l]},{command:"L",values:[.45*t,.6*n]},{command:"L",values:[o,n]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[o,n]},{command:"L",values:[.45*t,.6*n]},{command:"L",values:[t,n]},{command:"Z",values:[]}]}]}function E(e,t){return Math.round(Math.min(Math.max(e+255*t*.75,0),255))}function za(e,t){if(e==null)return new S;if("type"in e&&(e.type==="linear"||e.type==="pattern"))return e;const a=new S(e);return new S([E(a.r,t),E(a.g,t),E(a.b,t),a.a])}let Rt=0;function _t(){return Rt++}let Et=0;function Vt(){return Et++}let jt=0;function Dt(){return jt++}const Ot="http://www.w3.org/2000/svg",ie=Y("android"),Nt=Y("chrome")||ie&&ie>=4?"auto":"optimizeLegibility",Zt={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},Ut=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;let L={},b={};const Tt=Math.PI;function _(e,t){const a=e*(Tt/180);return Math.abs(t*Math.sin(a))+Math.abs(t*Math.cos(a))}function Ae(e){return e.map(t=>`${t.command} ${t.values.join(" ")}`).join(" ").trim()}function Le(e,t,a,n,l){if(e){if(e.type==="circle")return A("circle",{cx:e.cx,cy:e.cy,fill:t,"fill-rule":"evenodd",r:e.r,stroke:a.color,"stroke-dasharray":a.dashArray,"stroke-dashoffset":a.dashOffset,"stroke-linecap":a.cap,"stroke-linejoin":a.join,"stroke-miterlimit":"4","stroke-width":a.width});if(e.type==="ellipse")return A("ellipse",{cx:e.cx,cy:e.cy,fill:t,"fill-rule":"evenodd",rx:e.rx,ry:e.ry,stroke:a.color,"stroke-dasharray":a.dashArray,"stroke-linecap":a.cap,"stroke-linejoin":a.join,"stroke-miterlimit":"4","stroke-width":a.width});if(e.type==="rect")return A("rect",{fill:t,"fill-rule":"evenodd",height:e.height,stroke:a.color,"stroke-dasharray":a.dashArray,"stroke-linecap":a.cap,"stroke-linejoin":a.join,"stroke-miterlimit":"4","stroke-width":a.width,width:e.width,x:e.x,y:e.y});if(e.type==="image")return A("image",{alt:l||"image",height:e.height,href:e.src,preserveAspectRatio:"none",width:e.width,x:e.x,y:e.y});if(e.type==="path"){const o=typeof e.path!="string"?Ae(e.path):e.path;return A("path",{d:o,fill:t,"fill-rule":"evenodd",stroke:a.color,"stroke-dasharray":a.dashArray,"stroke-linecap":a.cap,"stroke-linejoin":a.join,"stroke-miterlimit":"4","stroke-width":a.width})}if(e.type==="text")return X(n),A("text",{"dominant-baseline":n.dominantBaseline,fill:t,"fill-rule":"evenodd","font-family":n.font.family,"font-size":n.font.size,"font-style":n.font.style,"font-variant":n.font.variant,"font-weight":n.font.weight,kerning:n.kerning,rotate:n.rotate,stroke:a.color,"stroke-dasharray":a.dashArray,"stroke-linecap":a.cap,"stroke-linejoin":a.join,"stroke-miterlimit":"4","stroke-width":a.width,"text-anchor":n.align,"text-decoration":n.decoration,"text-rendering":Nt,x:e.x,y:e.y},e.text)}return null}function ke(e){if(!e)return{fill:"none",pattern:null,linearGradient:null};if(!("type"in e))return{fill:new S(e).toString(),pattern:null,linearGradient:null};if(e.type==="pattern"){const a=`patternId-${_t()}`;return{fill:`url(#${a})`,pattern:{id:a,x:e.x,y:e.y,width:e.width,height:e.height,image:{x:0,y:0,width:e.width,height:e.height,href:e.src}},linearGradient:null}}const t=`linearGradientId-${Vt()}`;return{fill:`url(#${t})`,pattern:null,linearGradient:{id:t,x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,stops:e.colors.map(a=>({offset:a.offset,color:a.color&&new S(a.color).toString()}))}}}function $e(e){const t={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};return e&&(e.width!=null&&(t.width=e.width),e.cap&&(t.cap=e.cap),e.join&&(t.join=e.join.toString()),e.color&&(t.color=new S(e.color).toString()),e.dashArray&&(t.dashArray=e.dashArray),e.dashoffset&&(t.dashOffset=e.dashoffset),e.style&&!e.dashArray&&(t.dashArray=Ke(e).join(",")||"none")),t}function Me(e,t){const a={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};if(e){const n=e.alignBaseline,l=n==="baseline"?"auto":n==="top"?"text-top":n==="bottom"?"hanging":n;a.align=e.align,a.dominantBaseline=l,a.decoration=e.decoration,a.kerning=e.kerning?"auto":"0",a.rotate=e.rotated?"90":"0",X(t),a.font.style=t.style||"normal",a.font.variant=t.variant||"normal",a.font.weight=t.weight||"normal",a.font.size=t.size&&t.size.toString()||"10pt",a.font.family=t.family||"serif"}return a}function Pt(e){const{pattern:t,linearGradient:a}=e;if(t)return A("pattern",{height:t.height,id:t.id,patternUnits:"userSpaceOnUse",width:t.width,x:t.x,y:t.y},A("image",{height:t.image.height,href:t.image.href,width:t.image.width,x:t.image.x,y:t.image.y}));if(a){const n=a.stops.map((l,o)=>A("stop",{key:`${o}-stop`,offset:l.offset,"stop-color":l.color}));return A("linearGradient",{gradientUnits:"userSpaceOnUse",id:a.id,x1:a.x1,x2:a.x2,y1:a.y1,y2:a.y2},n)}return null}function Bt(e,t){if(!e||e.length===0)return null;const a=[];for(const n of e){const{shape:l,fill:o,stroke:i,font:s}=n,r=ke(o),u=$e(i),p=l.type==="text"?Me(l,s):null,d=Le(l,r.fill,u,p);d&&a.push(d)}return A("mask",{id:t,maskUnits:"userSpaceOnUse"},A("g",null,a))}function se(e,t,a){return Ze(e,J(e),[t,a])}function re(e,t,a,n,l){return Ne(e,J(e),[t,a]),e[4]=e[4]*t-n*t+n,e[5]=e[5]*a-l*a+l,e}function Ft(e,t,a,n){const l=t%360*Math.PI/180;Ue(e,J(e),l);const o=Math.cos(l),i=Math.sin(l),s=e[4],r=e[5];return e[4]=s*o-r*i+n*i-a*o+a,e[5]=r*o+s*i-a*i-n*o+n,e}function z(e,t){L&&"left"in L?(L.left!=null&&L.left>e&&(L.left=e),(L.right==null||L.right<e)&&(L.right=e),(L.top==null||L.top>t)&&(L.top=t),(L.bottom==null||L.bottom<t)&&(L.bottom=t)):L={left:e,bottom:t,right:e,top:t}}function ce(e){const t=e.args,a=t.length;let n;switch(e.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(n=0;n<a;n+=2)z(t[n],t[n+1]);b.x=t[a-2],b.y=t[a-1];break;case"H":for(n=0;n<a;++n)z(t[n],b.y);b.x=t[a-1];break;case"V":for(n=0;n<a;++n)z(b.x,t[n]);b.y=t[a-1];break;case"m":{let l=0;for(("x"in b)||(z(b.x=t[0],b.y=t[1]),l=2),n=l;n<a;n+=2)z(b.x+=t[n],b.y+=t[n+1]);break}case"l":case"t":for(n=0;n<a;n+=2)z(b.x+=t[n],b.y+=t[n+1]);break;case"h":for(n=0;n<a;++n)z(b.x+=t[n],b.y);break;case"v":for(n=0;n<a;++n)z(b.x,b.y+=t[n]);break;case"c":for(n=0;n<a;n+=6)z(b.x+t[n],b.y+t[n+1]),z(b.x+t[n+2],b.y+t[n+3]),z(b.x+=t[n+4],b.y+=t[n+5]);break;case"s":case"q":for(n=0;n<a;n+=4)z(b.x+t[n],b.y+t[n+1]),z(b.x+=t[n+2],b.y+=t[n+3]);break;case"A":for(n=0;n<a;n+=7)z(t[n+5],t[n+6]);b.x=t[a-2],b.y=t[a-1];break;case"a":for(n=0;n<a;n+=7)z(b.x+=t[n+5],b.y+=t[n+6])}}function ue(e,t,a){const n=Zt[e.toLowerCase()];let l;typeof n=="number"&&(n?t.length>=n&&(l={action:e,args:t.slice(0,t.length-t.length%n)},a.push(l),ce(l)):(l={action:e,args:[]},a.push(l),ce(l)))}function Gt(e){const t=(typeof e.path!="string"?Ae(e.path):e.path).match(Ut),a=[];if(L={},b={},!t)return null;let n="",l=[];const o=t.length;for(let s=0;s<o;++s){const r=t[s],u=parseFloat(r);isNaN(u)?(n&&ue(n,l,a),l=[],n=r):l.push(u)}ue(n,l,a);const i={x:0,y:0,width:0,height:0};return L&&"left"in L&&(i.x=L.left,i.y=L.top,i.width=L.right-L.left,i.height=L.bottom-L.top),i}function Wt(e){const t={x:0,y:0,width:0,height:0};if(e.type==="circle")t.x=e.cx-e.r,t.y=e.cy-e.r,t.width=2*e.r,t.height=2*e.r;else if(e.type==="ellipse")t.x=e.cx-e.rx,t.y=e.cy-e.ry,t.width=2*e.rx,t.height=2*e.ry;else if(e.type==="image"||e.type==="rect")t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height;else if(e.type==="path"){const a=Gt(e);t.x=a.x,t.y=a.y,t.width=a.width,t.height=a.height}return t}function qt(e){const t={x:0,y:0,width:0,height:0};let a=null,n=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY;for(const o of e)a?(a.x=Math.min(a.x,o.x),a.y=Math.min(a.y,o.y),n=Math.max(n,o.x+o.width),l=Math.max(l,o.y+o.height)):(a=t,a.x=o.x,a.y=o.y,n=o.x+o.width,l=o.y+o.height);return a&&(a.width=n-a.x,a.height=l-a.y),a}function Ht(e,t,a,n,l,o,i,s,r){let u=(i&&o?_(o,t):t)/2,p=(i&&o?_(o,a):a)/2;if(r){const g=r[0],m=r[1];u=(i&&o?_(o,g):g)/2,p=(i&&o?_(o,m):m)/2}const d=e.width+n,h=e.height+n,f=oe(),c=oe();let y=!1;if(l&&d!==0&&h!==0){const g=t!==a?t/a:d/h,m=t>a?t:a;let k=1,$=1;isNaN(m)||(g>1?(k=m/d,$=m/g/h):($=m/h,k=m*g/d)),N(c,c,re(f,k,$,u,p)),y=!0}const v=e.x+(d-n)/2,w=e.y+(h-n)/2;if(N(c,c,se(f,u-v,p-w)),!y&&(d>t||h>a)){const g=d/t>h/a,m=(g?t:a)/(g?d:h);N(c,c,re(f,m,m,v,w))}return s&&N(c,c,se(f,s[0],s[1])),o&&N(c,c,Ft(f,o,v,w)),`matrix(${c[0]},${c[1]},${c[2]},${c[3]},${c[4]},${c[5]})`}function Qt(e,t,a){const n=e?.effects.find(u=>u.type==="bloom");if(!n)return null;const{strength:l,radius:o}=n,i=l>0?o:0,s=(l+i)*t,r=4*l+1;return A("filter",{filterUnits:"userSpaceOnUse",height:"300%",id:`bloom${a}`,width:"300%",x:"-100%",y:"-100%"},A("feMorphology",{in:"SourceGraphic",operator:"dilate",radius:(l+.5*i)*(5**(t/100)*(.4+t/100)),result:"dilate"}),A("feGaussianBlur",{in:"dilate",result:"blur",stdDeviation:s/25}),A("feGaussianBlur",{in:"blur",result:"intensityBlur",stdDeviation:s/50}),A("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},A("feFuncR",{slope:r,type:"linear"}),A("feFuncG",{slope:r,type:"linear"}),A("feFuncB",{slope:r,type:"linear"})),A("feMerge",null,A("feMergeNode",{in:"intensityBlur"}),A("feMergeNode",{in:"intensityBrightness"}),A("feGaussianBlur",{stdDeviation:l/10})))}function Kt(e,t,a,n={}){const l=[],o=[],i=Dt(),s=Qt(n.effectView,t,i);let r=null;if(s){const h=n.effectView?.effects.find(v=>v.type==="bloom"),f=(h.strength?h.strength+h.radius/2:0)/3,c=t+t*f,y=a+a*f;r=[Math.max(c,10),Math.max(y,10)]}let u=t,p=a;if(n.useRotationSize)for(let h=0;h<e.length;h++){const f=n.rotations?.[h]??0;u=Math.max(_(f,t),u),p=Math.max(_(f,a),p)}for(let h=0;h<e.length;h++){const f=e[h],c=[],y=[];let v=0,w=0,g=0;for(const I of f){const{shape:V,fill:Ce,stroke:ne,font:Ie,offset:G}=I;n.ignoreStrokeWidth||V.type==="text"||(v+=ne?.width||0);const le=ke(Ce),Re=$e(ne),_e=V.type==="text"?Me(V,Ie):null;l.push(Pt(le)),c.push(Le(V,le.fill,Re,_e,n.ariaLabel)),y.push(Wt(V)),G&&(w+=G[0],g+=G[1])}const m=n.rotations?.[h]??0;n.useRotationSize&&(w+=(u-_(m,t))/2,g+=(p-_(m,a))/2);const k=Ht(qt(y),t,a,v,n.scale??!1,m,n.useRotationSize??!1,[w,g],r);let $=null;if(n.masking){const I=`mask-${h}`,V=n.masking[h];l.push(Bt(V,I)),$=`url(#${I})`}o.push($?A("g",{mask:$},A("g",{transform:k},c)):A("g",{transform:k},c))}return s&&(X(r),u=r[0],p=r[1]),A("svg",{"aria-label":n.ariaLabel,focusable:!1,height:p,role:"img",style:"display: block;",width:u,xmlns:Ot},s,A("defs",null,l),s?A("g",{filter:`url(#bloom${i})`},o):o)}const he=Te();function Xt(e,t){he.append(e,t),he.detach(t)}function B(e,t,a){const n=Math.ceil(t[0]),l=Math.ceil(t[1]);if(!e.some(i=>!!i.length))return null;const o=a?.node||document.createElement("div");return a.opacity!=null&&(o.style.opacity=a.opacity.toString()),a.effectView!=null&&(o.style.filter=ve(a.effectView)),Xt(o,()=>Kt(e,n,l,a)),o}function Yt(e,t){e=Math.ceil(e),t=Math.ceil(t);const a=document.createElement("canvas");a.width=e,a.height=t,a.style.width=e+"px",a.style.height=t+"px";const n=a.getContext("2d");return n.clearRect(0,0,e,t),n}function Jt(e,t,a){return e?Pe(e,{responseType:"image"}).then(n=>{const l=n.data,o=l.width,i=l.height,s=o/i;let r=t;if(a){const u=Math.max(o,i);r=Math.min(r,u)}return{image:l,width:s<=1?Math.ceil(r*s):r,height:s<=1?r:Math.ceil(r/s)}}):Promise.reject(new H("renderUtils: imageDataSize","href not provided."))}function ea(e,t){return!(!e||t==="ignore")&&(t!=="multiply"||e.r!==255||e.g!==255||e.b!==255||e.a!==1)}function ta(e,t,a,n,l){switch(l){case"multiply":e[t]*=a[0],e[t+1]*=a[1],e[t+2]*=a[2],e[t+3]*=a[3];break;default:{const o=ee({r:e[t],g:e[t+1],b:e[t+2]});o.h=n.h,o.s=n.s,o.v=o.v/100*n.v;const i=ye(o);e[t]=i.r,e[t+1]=i.g,e[t+2]=i.b,e[t+3]*=a[3];break}}}function aa(e,t,a,n,l){return Jt(e,t,l).then(o=>{const i=o.width??t,s=o.height??t;if(o.image&&ea(a,n)){let r=o.image.width,u=o.image.height;Y("edge")&&/\.svg$/i.test(e)&&(r-=1,u-=1);const p=Yt(i,s);p.drawImage(o.image,0,0,r,u,0,0,i,s);const d=p.getImageData(0,0,i,s),h=[a.r/255,a.g/255,a.b/255,a.a],f=ee(a);for(let c=0;c<d.data.length;c+=4)ta(d.data,c,h,f,n);p.putImageData(d,0,0),e=p.canvas.toDataURL("image/png")}else{const r=Be?.findCredential(e);if(r?.token){const u=e.includes("?")?"&":"?";e=`${e}${u}token=${r.token}`}}return{url:e,width:i,height:s}}).catch(()=>({url:e,width:t,height:t}))}const j=M.size,T=M.maxSize,te=M.maxOutlineSize,pe=M.lineWidth,Q=M.tallSymbolWidth;function O(e){const t=e.outline,a=e.material!=null?e.material.color:null,n=a!=null?a.toHex():null;if(t==null||"pattern"in t&&t.pattern!=null&&t.pattern.type==="style"&&t.pattern.style==="none")return e.type==="fill"&&n==="#ffffff"?{color:"#bdc3c7",width:.75}:null;const l=C(t.size)||0;return{color:"rgba("+(t.color!=null?t.color.toRgba():"255,255,255,1")+")",width:Math.min(l,te),style:"pattern"in t&&t.pattern!=null&&t.pattern.type==="style"?we(t.pattern.style):null,join:"butt",cap:"patternCap"in t?t.patternCap:"butt"}}async function na(e,t){if(e.thumbnail?.url)return e.thumbnail.url;if(t.type==="icon"&&t?.resource?.href)return et(t);const a=ge("esri/images/Legend/legend3dsymboldefault.png");if(e.styleOrigin&&(e.styleOrigin.styleName||e.styleOrigin.styleUrl)){const n=await lt(e.styleOrigin,{portal:e.styleOrigin.portal}).catch(()=>null);if(n&&"thumbnail"in n&&n.thumbnail?.url)return n.thumbnail.url}return a}function q(e,t=1){const a=e.a,n=ee(e),l=n.h,o=n.s/t,i=100-(100-n.v)/t,{r:s,g:r,b:u}=ye({h:l,s:o,v:i});return[s,r,u,a]}function P(e){return e.type==="water"?e.color==null?null:e.color:e.material?.color==null?null:e.material.color}function x(e,t=0){const a=P(e);if(!a){if(e.type==="fill")return null;const l=Ye.r,o=E(l,t);return[o,o,o,100]}const n=a.toRgba();for(let l=0;l<3;l++)n[l]=E(n[l],t);return n}async function Se(e,t){const a=e.style;return a==="none"?null:{type:"pattern",x:0,y:0,src:await Xe(ge(`esri/symbols/patterns/${a}.png`),t.toCss(!0)),width:5,height:5}}function me(e){return e.outline?O(e):{color:"rgba(0, 0, 0, 1)",width:1.5}}function ae(e,t){const a=P(e);if(!a)return null;let n="rgba(";return n+=E(a.r,t)+",",n+=E(a.g,t)+",",n+=E(a.b,t)+",",n+a.a+");"}function K(e,t){const a=ae(e,t);return a?"pattern"in e&&e.pattern!=null&&e.pattern.type==="style"&&e.pattern.style==="none"?null:{color:a,width:Math.min(e.size?C(e.size):.75,te),style:"pattern"in e&&e.pattern!=null&&e.pattern.type==="style"?we(e.pattern.style):null,cap:"cap"in e?e.cap:null,join:"join"in e?e.join==="miter"?C(2):e.join:null}:{}}function U(e,t,a){const n=a!=null?.75*a:0;return{type:"linear",x1:n?.25*n:0,y1:n?.5*n:0,x2:n||4,y2:n?.5*n:4,colors:[{color:e,offset:0},{color:t,offset:1}]}}function la(e){const t=e.depth,a=e.height,n=e.width;return n!==0&&t!==0&&a!==0&&n===t&&n!=null&&a!=null&&n<a}function oa(e,t,a){const n=[];if(!e)return n;switch(e.type){case"icon":{const i=t,s=t;switch(e.resource?.primitive??We){case"circle":n.push({shape:{type:"circle",cx:0,cy:0,r:.5*t},fill:x(e,0),stroke:O(e)});break;case"square":n.push({shape:{type:"path",path:[{command:"M",values:[0,s]},{command:"L",values:[0,0]},{command:"L",values:[i,0]},{command:"L",values:[i,s]},{command:"Z",values:[]}]},fill:x(e,0),stroke:O(e)});break;case"triangle":n.push({shape:{type:"path",path:[{command:"M",values:[0,s]},{command:"L",values:[.5*i,0]},{command:"L",values:[i,s]},{command:"Z",values:[]}]},fill:x(e,0),stroke:O(e)});break;case"cross":n.push({shape:{type:"path",path:[{command:"M",values:[.5*i,0]},{command:"L",values:[.5*i,s]},{command:"M",values:[0,.5*s]},{command:"L",values:[i,.5*s]}]},stroke:me(e)});break;case"x":n.push({shape:{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[i,s]},{command:"M",values:[i,0]},{command:"L",values:[0,s]}]},stroke:me(e)});break;case"kite":n.push({shape:{type:"path",path:[{command:"M",values:[0,.5*s]},{command:"L",values:[.5*i,0]},{command:"L",values:[i,.5*s]},{command:"L",values:[.5*i,s]},{command:"Z",values:[]}]},fill:x(e,0),stroke:O(e)})}break}case"object":switch(e.resource?.primitive??Ge){case"cone":{const l=U(x(e,0),x(e,-.6),a?Q:t),o=St(t,a);n.push({shape:o[0],fill:l},{shape:o[1],fill:l});break}case"inverted-cone":{const l=x(e,0),o=U(l,x(e,-.6),t),i=zt(t);n.push({shape:i[0],fill:o},{shape:i[1],fill:l});break}case"cube":{const l=$t(t,a);n.push({shape:l[0],fill:x(e,0)},{shape:l[1],fill:x(e,-.3)},{shape:l[2],fill:x(e,-.5)});break}case"cylinder":{const l=U(x(e,0),x(e,-.6),a?Q:t),o=Mt(t,a);n.push({shape:o[0],fill:l},{shape:o[1],fill:l},{shape:o[2],fill:x(e,0)});break}case"diamond":{const l=Ct(t);n.push({shape:l[0],fill:x(e,-.3)},{shape:l[1],fill:x(e,0)},{shape:l[2],fill:x(e,-.3)},{shape:l[3],fill:x(e,-.7)});break}case"sphere":{const l=U(x(e,0),x(e,-.6));l.x1=0,l.y1=0,l.x2=.25*t,l.y2=.25*t,n.push({shape:{type:"circle",cx:0,cy:0,r:.5*t},fill:l});break}case"tetrahedron":{const l=It(t);n.push({shape:l[0],fill:x(e,-.3)},{shape:l[1],fill:x(e,0)},{shape:l[2],fill:x(e,-.6)});break}}break}return n}function F(e){const t=typeof e?.size=="number"?e?.size:null;return t?C(t):null}function ia(e){return e.type==="icon"?"multiply":"tint"}async function sa(e,t){const a=F(t),n=t?.maxSize?C(t.maxSize):null,l=t?.disableUpsampling??!1,o=e.symbolLayers,i=[],s=[];let r=!1,u=0,p=0,d=0;o.forEach(c=>{if(c.type!=="icon"&&c.type!=="object")return;c&&c.type==="icon"&&(d=Math.max(c.size&&C(c.size),d));const y=c.type==="icon"?c.size&&C(c.size):0,v=a||y?Math.ceil(Math.min(a||y,n||T)):j;let w=c.type==="icon"?c.angle:null;if(t?.rotation!=null&&(w=(w??0)+t.rotation),s.push(w),c?.resource?.href){const g=na(e,c).then(m=>{const k=c?.material?.color,$=ia(c);return aa(m,v,k,$,l)}).then(m=>{const k=m.width,$=m.height;return u=Math.max(u,k),p=Math.max(p,$),w&&(r=!0),[{shape:{type:"image",x:0,y:0,width:k,height:$,src:m.url},fill:null,stroke:null}]});i.push(g)}else{let g=v;c.type==="icon"&&a&&(g=v*(y/d));const m=t?.symbolConfig==="tall"||t?.symbolConfig?.isTall||c.type==="object"&&la(c);u=Math.max(u,m?Q:g),p=Math.max(p,g),w&&c.resource?.primitive&&["square","triangle","x"].includes(c.resource?.primitive)&&(r=!0),i.push(Promise.resolve(oa(c,g,m)))}});const h=await Promise.allSettled(i),f=[];return h.forEach(c=>{c.status==="fulfilled"?f.push(c.value):c.reason&&Fe.getLogger("esri.symbols.support.previewSymbol3D").warn("error while building swatchInfo!",c.reason)}),B(f,[u,p],{node:t?.node,scale:!1,opacity:t?.opacity,ariaLabel:t?.ariaLabel,rotations:s,useRotationSize:r})}function ra(e,t){const a=e.symbolLayers,n=[],l=Je(e),o=F(t),i=(t?.maxSize?C(t.maxSize):null)||te;let s,r=0,u=0;return a.forEach((p,d)=>{if(!p||p.type!=="line"&&p.type!=="path")return;const h=[];switch(p.type){case"line":{const f=K(p,0);if(f==null)break;const c=f?.width||0;d===0&&(s=c);const y=Math.min(o||c,i),v=d===0?y:o?y*(c/s):y,w=v>pe/2?2*v:pe;u=Math.max(u,v),r=Math.max(r,w),f.width=v,h.push({shape:{type:"path",path:[{command:"M",values:[0,.5*u]},{command:"L",values:[r,.5*u]}]},stroke:f});break}case"path":{const f=Math.min(o||j,i),c=x(p,0),y=x(p,-.2),v=ae(p,-.4),w=v?{color:v,width:1}:{};if(p.profile==="quad"){const g=p.width,m=p.height,k=At(g&&m?g/m:1,m===0,g===0),$={...w,join:"bevel"};h.push({shape:k[0],fill:y,stroke:$},{shape:k[1],fill:y,stroke:$},{shape:k[2],fill:c,stroke:$})}else h.push({shape:Z.pathSymbol3DLayer[0],fill:y,stroke:w},{shape:Z.pathSymbol3DLayer[1],fill:c,stroke:w});u=Math.max(u,f),r=u}}n.push(h)}),Promise.resolve(B(n,[r,u],{node:t?.node,scale:l,opacity:t?.opacity,ariaLabel:t?.ariaLabel}))}async function ca(e,t){const a=e.type==="mesh-3d",n=e.symbolLayers,l=F(t),o=t?.maxSize?C(t.maxSize):null,i=l||j,s=[];let r=0,u=0,p=!1;for(let d=0;d<n.length;d++){const h=n.at(d),f=[];if(!a||h.type==="fill"){switch(h.type){case"fill":{const c=Math.min(i,o||T);if(r=Math.max(r,c),u=Math.max(u,c),p=!0,a){const y=Z.meshSymbol3DFill,v=ae(h,-.4),w=v?{color:v,width:1,join:"round"}:{};f.push({shape:y[0],fill:x(h,0),stroke:w},{shape:y[1],fill:x(h,-.2),stroke:w},{shape:y[2],fill:x(h,-.6),stroke:w})}else{let y=x(h,0);const v="pattern"in h?h.pattern:null,w=O(h),g=P(h);v!=null&&v.type==="style"&&v.style!=="solid"&&g&&(y=await Se(v,g)),f.push({shape:Z.fill[0],fill:y,stroke:w})}break}case"line":{const c=K(h,0);if(c==null)break;const y={stroke:c,shape:Z.fill[0]};r=Math.max(r,j),u=Math.max(u,j),f.push(y);break}case"extrude":{const c={join:"round",width:1,...K(h,-.4)},y=x(h,0),v=x(h,-.2),w=Math.min(i,o||T),g=Lt(w);c.width=1,f.push({shape:g[0],fill:v,stroke:c},{shape:g[1],fill:v,stroke:c},{shape:g[2],fill:y,stroke:c});const m=j,k=.7*j+.5*w;r=Math.max(r,m),u=Math.max(u,k);break}case"water":{const c=P(h),y=q(c),v=q(c,2),w=q(c,3),g=kt();p=!0,f.push({shape:g[0],fill:y},{shape:g[1],fill:v},{shape:g[2],fill:w});const m=Math.min(i,o||T);r=Math.max(r,m),u=Math.max(u,m);break}}s.push(f)}}return B(s,[r,u],{node:t?.node,scale:p,opacity:t?.opacity,ariaLabel:t?.ariaLabel})}function ua(e,t){if(e.symbolLayers.length===0)return Promise.reject(new H("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));switch(e.type){case"point-3d":return sa(e,t);case"line-3d":return ra(e,t);case"polygon-3d":case"mesh-3d":return ca(e,t)}return Promise.reject(new H("symbolPreview: swatchInfo3D","symbol not supported."))}const ha=Object.freeze(Object.defineProperty({__proto__:null,getPatternDescriptor:Se,getSizeFromOptions:F,getSymbolLayerFill:x,previewSymbol3D:ua},Symbol.toStringTag,{value:"Module"}));let D=null;const fe=[255,255,255];function de(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function Ca(e,t,a){const{backgroundColor:n,outline:l,dotSize:o}=e,i=a?.swatchSize||M.size,s=.8,r=Math.round(i*i/Math.max(o,.5)**2*s),u=window.devicePixelRatio,p=document.createElement("canvas"),d=i*u;p.width=d,p.height=d,p.style.width=p.width/u+"px",p.style.height=p.height/u+"px";const h=p.getContext("2d");if(n&&(h.fillStyle=n.toCss(!0),h.fillRect(0,0,d,d),h.fill()),h.fillStyle=t?.toCss(!0)??"",D&&D.length/2===r)for(let c=0;c<2*r;c+=2){const y=D[c],v=D[c+1];h.fillRect(y,v,o*u,o*u),h.fill()}else{D=[];for(let c=0;c<2*r;c+=2){const y=de(0,d),v=de(0,d);D.push(y,v),h.fillRect(y,v,o*u,o*u),h.fill()}}l&&(l.color&&(h.strokeStyle=l.color.toCss(!0)),h.lineWidth=l.width,h.strokeRect(0,0,d,d));const f=new Image(i,i);return f.src=p.toDataURL(),f.ariaLabel=a?.ariaLabel??null,f.alt=a?.ariaLabel??"",f}function Ia(e,t={}){const a=t.radius||40,n=2*Math.PI*a,l=e.length,o=n/l,i=[],s=nt(t.outline);s?.width!=null&&(s.width*=2),(s||t.backgroundColor)&&i.push({shape:{type:"circle",cx:a,cy:a,r:a},fill:t.backgroundColor,stroke:s,offset:[0,0]});const r=t.values,u=r&&r.length===l&&r.reduce((c,y)=>c+y,0)===100,p=[0];for(let c=0;c<l;c++){let y=null;u&&(y=r[c]*n/100,p.push(y+p[c])),i.push({shape:{type:"circle",cx:a,cy:a,r:a/2},fill:[0,0,0,0],stroke:{width:a,dashArray:`${(y??o)/2} ${n}`,dashoffset:"-"+(u?p[c]/2:c*(o/2)),color:e[c]},offset:[0,0]})}let d=null;const h=2*a+(s?.width||0),f=t.holePercentage;if(f){s&&i.push({shape:{type:"circle",cx:a,cy:a,r:a*f},fill:null,stroke:s,offset:[0,0]});const c=h/2;d=[[{shape:{type:"circle",cx:c,cy:c,r:c},fill:fe,stroke:s?{...s,color:fe}:null,offset:[0,0]},{shape:{type:"circle",cx:c,cy:c,r:a*f},fill:[0,0,0],stroke:null,offset:[0,0]}]]}return B([i],[h,h],{effectView:t.effectList,ignoreStrokeWidth:!0,masking:d,rotations:[-90],ariaLabel:t.ariaLabel})}function Ra(e,t={}){const l=t.align==="horizontal",o=l?75:24,i=l?24:75,s=t.width??o,r=t.height??i,u=t.gradient??!0,p=window.devicePixelRatio,d=s*p,h=r*p,f=document.createElement("canvas");f.width=d,f.height=h,f.ariaLabel=t.ariaLabel??null,f.style.width=`${s}px`,f.style.height=`${r}px`;const c=f.getContext("2d"),y=l?d:0,v=l?0:h;if(u){const g=c.createLinearGradient(0,0,y,v),m=e.length,k=m===1?0:1/(m-1);e.forEach(($,I)=>g.addColorStop(I*k,$.toString())),c.fillStyle=g,c.fillRect(0,0,d,h)}else{const g=l?d/e.length:d,m=l?h:h/e.length;let k=0,$=0;for(const I of e)c.fillStyle=I.toString(),c.fillRect(k,$,g,m),k=l?k+g:0,$=l?0:$+m}const w=document.createElement("div");return w.style.width=`${s}px`,w.style.height=`${r}px`,pa(w,t?.effectList),w.appendChild(f),w}function pa(e,t){if(!t)return;e.style.filter=ve(t);const a=t.effects;if(a){for(const n of a)if(n?.type==="drop-shadow"){n.offsetX<0?e.style.marginLeft=`${Math.abs(n.offsetX)}px`:e.style.marginRight=`${n.offsetX}px`;break}}}async function ma(e,t){switch(e.type){case"web-style":{const{previewWebStyleSymbol:a}=await R(()=>import("./previewWebStyleSymbol-BvI-a2av.js"),__vite__mapDeps([0,1,2,3,4,5,6]));return a(e,ma,t)}case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":{const{previewSymbol3D:a}=await R(()=>Promise.resolve().then(()=>ha),void 0);return a(e,t)}case"simple-marker":case"simple-line":case"simple-fill":case"picture-marker":case"picture-fill":case"text":{const{previewSymbol2D:a}=await R(()=>import("./previewSymbol2D-DwOLiBFm.js"),__vite__mapDeps([7,1,3,4,2,5,6]));return a(e,t)}case"cim":{const{previewCIMSymbol:a}=await R(()=>import("./previewCIMSymbol-Fb2C3MUT.js"),__vite__mapDeps([8,1,9,10,11,12,13,14,15,16,17,2,3,4,5,6]));return a(e,t)}default:return}}function ze(e){return e&&"opacity"in e?e.opacity*ze(e.parent):1}async function _a(e,t){if(!e)return;const a=e.sourceLayer,n=(t!=null&&t.useSourceLayer?a:e.layer)??a,l=t?.ignoreOpacity?1:ze(n);if(e.symbol!=null&&(t==null||t.ignoreGraphicSymbol!==!0)){const m=e.symbol.type==="web-style"?await e.symbol.fetchSymbol({...t,acceptedFormats:["web","cim"],cache:t!=null?t.webStyleCache:null}):e.symbol.clone();return W(m,null,l),m}const o=t?.renderer??fa(n);let i=o&&"getSymbolAsync"in o?await o.getSymbolAsync(e,t):null;if(!i)return;if(i=i.type==="web-style"?await i.fetchSymbol({...t,cache:t!=null?t.webStyleCache:null}):i.clone(),!o||!("visualVariables"in o)||!o.visualVariables?.length)return W(i,null,l),i;if("arcadeRequiredForVisualVariables"in o&&o.arcadeRequiredForVisualVariables&&t?.arcade==null){const m={...t};m.arcade=await qe(),t=m}const{getColor:s,getOpacity:r,getAllSizes:u,getRotationAngle:p}=await R(()=>import("./index-CzvLtnX1.js").then(m=>m.HD),[]),d=[],h=[],f=[],c=[];for(const m of o.visualVariables)switch(m.type){case"color":d.push(m);break;case"opacity":h.push(m);break;case"rotation":c.push(m);break;case"size":m.target||f.push(m)}const y=!!d.length&&d[d.length-1],v=y?s(y,e,t):null,w=!!h.length&&h[h.length-1];let g=w?r(w,e,t):null;if(l!=null&&(g=g!=null?g*l:l),t?.ignoreOpacity&&(g=1),W(i,v,g),f.length&&t?.ignoreSizeVariables!==!0){const m=u(f,e,t);await tt(i,m)}if(t?.ignoreRotationVariables!==!0)for(const m of c)at(i,p(m,e,t),m.axis);return i}function fa(e){if(e)return"renderer"in e?e.renderer:void 0}export{Pt as A,qt as E,Ht as L,Le as M,_a as R,$e as S,Wt as T,Ra as V,x as Z,ct as a,mt as b,La as c,za as d,Z as e,bt as f,$a as g,Ia as h,be as i,Sa as j,Ma as k,B as l,dt as m,ma as n,pt as o,xa as p,Aa as q,ft as r,ba as s,M as t,wa as u,ke as v,Ca as w,ka as x,Kt as y};
