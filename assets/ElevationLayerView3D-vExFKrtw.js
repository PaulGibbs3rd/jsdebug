import{H as h,G as y,ax as u,ay as n,az as f,aA as m,b as l,m as c,c as p}from"./index-CzvLtnX1.js";import{s as g,a as v}from"./LercDecoder-61AoppJf.js";import{l as w}from"./LayerView3D-C3wz0Xd_.js";import{p as $}from"./TiledLayerView3D-k4JOMenH.js";import{y as D}from"./LayerView-DMEwuW7Q.js";let a=class extends $(w(D)){constructor(){super(...arguments),this.type="elevation-3d"}get tileInfo(){return this.layer.tileInfo}initialize(){const e=this.view,t=e.map?.allLayers,r=t&&t.includes(this.layer),i=e.map?.ground?.layers,o=i&&i.includes(this.layer);if(r&&!o){const s=new h("layerview:elevation-layer-only",`3D elevation layer '${this.layer.id}' can only be added to layers in map.ground`);this.addResolvingPromise(Promise.reject(s))}this._lercDecoder=g(e.resourceController),this._addTilingSchemeMatchPromise()}destroy(){this._lercDecoder=y(this._lercDecoder)}async fetchTile(e,t){const r=this.layer;if(u(r)){const d=await r.fetchTile(e[0],e[1],e[2],{noDataValue:n,signal:t.signal});return f(t)?void m.getLogger(this).warnOnce("A call to fetchTile resolved even though the request was aborted. fetchTile should not resolve if options.signal.aborted is true."):d}const i=this.getTileUrl(e),o=await t.requester.request(i,"binary",t),s=await this._lercDecoder.decode(o,{noDataValue:n},t.signal);if(s)return new v(s);throw new Error("LERC decoding failed")}};l([c()],a.prototype,"layer",void 0),l([c()],a.prototype,"tileInfo",null),a=l([p("esri.views.3d.layers.ElevationLayerView3D")],a);const x=a;export{x as default};
