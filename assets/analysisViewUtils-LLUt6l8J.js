import{aP as l,aW as o,b as v,c as d,dn as u,fd as w,em as f,dm as m}from"./index-CzvLtnX1.js";import{n as h}from"./InteractiveToolBase-CXcuwHxr.js";let n=class extends h{constructor(t){super(t)}initialize(){this.addHandles(l(()=>this.analysisViewData.visible,t=>this.visible=t,o))}deactivate(){this.onDeactivate(),this.created||this.analysis.clear()}resetCreated(){this._set("created",!1)}};n=v([d("esri.views.interactive.AnalysisToolBase")],n);function b(t,e){t.interactive=!0;const{tool:a,view:s}=t;s.activeTool=a;let i=u(e,()=>{s.activeTool===a&&(s.activeTool=null)});return w(async r=>{await f(()=>a==null||!a.active,r),i=m(i)},e)}function D(t,e){return l(()=>t.interactive,()=>y(t,e),o)}function y(t,e){t.interactive?$(t,e):c(t)}function $(t,e){c(t);const{view:a,analysis:s}=t,i=new e({view:a,analysis:s,analysisViewData:t});return t.tool=i,a.tools.add(i),i}function c(t){const{view:e,tool:a}=t;a!=null&&(e.tools.remove(a),t.tool=null)}export{D as a,b as l,n as o,c as v};
