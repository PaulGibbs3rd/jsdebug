const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SelfSnappingEngine-Dc8IeiIH.js","assets/index-CzvLtnX1.js","assets/angularMeasurementUtils-DI0dMEin.js","assets/geodesicUtils-C0S8HwBT.js","assets/geodesicLengthMeasurementUtils-1KCptDKk.js","assets/geometryEngine-CfNZEGqf.js","assets/geometryEngineBase-C-gsyNi-.js","assets/_commonjsHelpers-DCkdB7M8.js","assets/hydrated-BSJF97b-.js","assets/geometry2dUtils-C5OK12a_.js","assets/keybindings-DIxDEOyk.js","assets/viewUtils-D5G6nsnP.js","assets/GridSnappingEngine-Dkonxpgc.js","assets/gridUtils-CJWQau1Q.js","assets/FeatureSnappingEngine-C3-oRGz2.js","assets/floorFilterUtils-DKzVzLpH.js"])))=>i.map(i=>d[i]);
import{g as ne,aG as ct,b as l,m as h,c as ht,c8 as Ne,aD as mt,aA as pn,h8 as fn,uP as gn,ct as Lt,bM as yn,zh as xe,gu as dt,uN as En,nq as st,aP as Xt,aW as Pe,bD as vn,nr as Qt,zi as _n,aV as Sn,c0 as bn,zj as wn,si as mn,bu as f,bY as Ln,ns as lt,bO as tt,bv as K,bS as $n,bQ as St,gv as N,g4 as T,gw as w,bz as et,fn as $t,zk as Jt,cv as Q,v0 as Tn,bT as Mt,f$ as Ct,bU as Tt,g1 as zt,f_ as A,zl as Bt,zm as Re,by as Ae,yv as Me,gp as Ce,uz as bt,tj as Nn,fK as ze,fx as xn,yw as Pn,br as _,lu as Rn,vY as An,b0 as Mn,zn as Cn,rP as zn,yx as Oe,g0 as qe,nj as De,h7 as On,zo as qn,lw as Dn,xu as kn,zp as In,zq as Fn,kk as jn,xl as Hn,ut as Vn,zr as Gn,fo as Zn,zs as Wn,zt as ge,bH as Un,g6 as Yn,ou as Xn,tf as Qn,lK as Jn,fP as Bn,ew as Kn,fd as ts,aQ as es,_ as Ft,N as jt,f1 as ye,i7 as ns,az as ss}from"./index-CzvLtnX1.js";import{c as Ee}from"./keybindings-DIxDEOyk.js";import{j as Kt,q as ke,b as Ie}from"./geodesicUtils-C0S8HwBT.js";import{j as L,d as is}from"./geometry2dUtils-C5OK12a_.js";import{i as rs}from"./viewUtils-D5G6nsnP.js";let U=class extends ne{constructor(e){super(e),this.layer=null,this.enabled=!0,this.updating=!1,this.availability=1,this.sublayerSources=new ct}};l([h({constructOnly:!0})],U.prototype,"layer",void 0),l([h()],U.prototype,"enabled",void 0),l([h()],U.prototype,"updating",void 0),l([h()],U.prototype,"availability",void 0),l([h()],U.prototype,"sublayerSources",void 0),U=l([ht("esri.views.interactive.snapping.FeatureSnappingLayerSource")],U);const Fe=U;let O=class extends Ne{constructor(){super(...arguments),this.enabled=!0}};l([h({type:Boolean})],O.prototype,"enabled",void 0),O=l([ht("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],O);let E=class extends Ne{constructor(t){super(t),this.lineSnapper=new O,this.parallelLineSnapper=new O,this.rightAngleSnapper=new O,this.rightAngleTriangleSnapper=new O,this.shortLineThreshold=15,this.distance=5,this.pointThreshold=1e-6,this.intersectionParallelLineThreshold=1e-6,this.parallelLineThreshold=1e-6,this.verticalLineThresholdMeters=.3,this.touchSensitivityMultiplier=1.5,this.pointOnLineThreshold=1e-6,this.orange=new mt([255,127,0]),this.orangeTransparent=new mt([255,127,0,.5]),this.lineHintWidthReference=3,this.lineHintWidthTarget=3,this.lineHintFadedExtensions=.3,this.parallelLineHintWidth=2,this.parallelLineHintLength=24,this.parallelLineHintOffset=1.5,this.rightAngleHintSize=24,this.rightAngleHintOutlineSize=1.5,this.satisfiesConstraintScreenThreshold=1}};l([h({type:O,constructOnly:!0,nonNullable:!0,json:{write:!0}})],E.prototype,"lineSnapper",void 0),l([h({type:O,constructOnly:!0,nonNullable:!0,json:{write:!0}})],E.prototype,"parallelLineSnapper",void 0),l([h({type:O,constructOnly:!0,nonNullable:!0,json:{write:!0}})],E.prototype,"rightAngleSnapper",void 0),l([h({type:O,constructOnly:!0,nonNullable:!0,json:{write:!0}})],E.prototype,"rightAngleTriangleSnapper",void 0),l([h({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],E.prototype,"shortLineThreshold",void 0),l([h({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],E.prototype,"distance",void 0),l([h({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],E.prototype,"pointThreshold",void 0),l([h({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],E.prototype,"intersectionParallelLineThreshold",void 0),l([h({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],E.prototype,"parallelLineThreshold",void 0),l([h({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],E.prototype,"verticalLineThresholdMeters",void 0),l([h({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],E.prototype,"touchSensitivityMultiplier",void 0),l([h({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],E.prototype,"pointOnLineThreshold",void 0),l([h({type:mt,nonNullable:!0})],E.prototype,"orange",void 0),l([h({type:mt,nonNullable:!0})],E.prototype,"orangeTransparent",void 0),l([h({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],E.prototype,"lineHintWidthReference",void 0),l([h({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],E.prototype,"lineHintWidthTarget",void 0),l([h({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],E.prototype,"lineHintFadedExtensions",void 0),l([h({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],E.prototype,"parallelLineHintWidth",void 0),l([h({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],E.prototype,"parallelLineHintLength",void 0),l([h({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],E.prototype,"parallelLineHintOffset",void 0),l([h({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],E.prototype,"rightAngleHintSize",void 0),l([h({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],E.prototype,"rightAngleHintOutlineSize",void 0),l([h({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],E.prototype,"satisfiesConstraintScreenThreshold",void 0),E=l([ht("esri.views.interactive.snapping.Settings.Defaults")],E);const Nt=new E;let b=class extends ne{constructor(t){super(t),this.enabled=!1,this.enabledToggled=!1,this.forceDisabled=!1,this.selfEnabled=!0,this.featureEnabled=!0,this.gridEnabled=!1,this.attributeRulesEnabled=!1,this.featureSources=new ct,this.distance=Nt.distance,this.touchSensitivityMultiplier=Nt.touchSensitivityMultiplier}get effectiveEnabled(){return!this.forceDisabled&&(this.enabledToggled?!this.enabled:this.enabled)}get effectiveGridEnabled(){return this.effectiveEnabled&&this.gridEnabled}get effectiveSelfEnabled(){return this.effectiveEnabled&&this.selfEnabled}get effectiveFeatureEnabled(){return this.effectiveEnabled&&this.featureEnabled}get _effectiveFeatureSources(){const t=this.featureSources;t.some(ve)&&pn.getLogger(this).warnOnce("Do not configure SubtypeGroupLayer sources in SnappingOptions.featureSources directly. Create a FeatureSnappingLayerSource for each SubtypeSublayer.");const n=t.filter(us),s=this._get("_effectiveFeatureSources")?.filter(ve)??new ct;for(const u of n){const c=s.find(d=>d.layer===u.layer.parent);if(c)c.sublayerSources.includes(u)||c.sublayerSources.add(u);else if(u.layer.parent){const d=new Fe({layer:u.layer.parent});d.sublayerSources.add(u),s.add(d)}}for(const u of s){const c=u.sublayerSources.filter(d=>!n.includes(d));u.sublayerSources.removeMany(c)}s.removeMany(s.filter(u=>u.sublayerSources.length===0));const i=t.filter(os),r=this._get("_effectiveFeatureSources")??new ct,{added:o,removed:a}=fn(r.toArray(),[...i,...s]);return r.removeMany(a),r.addMany(o),r}};l([h()],b.prototype,"enabled",void 0),l([h()],b.prototype,"enabledToggled",void 0),l([h()],b.prototype,"forceDisabled",void 0),l([h()],b.prototype,"selfEnabled",void 0),l([h()],b.prototype,"featureEnabled",void 0),l([h()],b.prototype,"gridEnabled",void 0),l([h()],b.prototype,"attributeRulesEnabled",void 0),l([h({type:ct.ofType(Fe)})],b.prototype,"featureSources",void 0),l([h()],b.prototype,"distance",void 0),l([h()],b.prototype,"touchSensitivityMultiplier",void 0),l([h({readOnly:!0})],b.prototype,"effectiveEnabled",null),l([h({readOnly:!0})],b.prototype,"effectiveGridEnabled",null),l([h({readOnly:!0})],b.prototype,"effectiveSelfEnabled",null),l([h({readOnly:!0})],b.prototype,"effectiveFeatureEnabled",null),l([h({readOnly:!0})],b.prototype,"_effectiveFeatureSources",null),b=l([ht("esri.views.interactive.snapping.SnappingOptions")],b);const as=b;function ve(e){return e.layer.type==="subtype-group"}function os(e){return e.layer.type!=="subtype-group"}function us(e){return e.layer.type==="subtype-sublayer"}var nt;function je(e,t,n){return P(e,t,n)}function P(e=0,t=0,n=0){return Lt(e,t,n)}function fi(e){return e}function gi(e){return e}function J(e,t,n){return Lt(e,t,n)}function it(e){const[t,n,s]=e;return e.length>3?[t,n,s,e[3]]:[t,n,s]}function Ht(e){return e[3]=((e.length>3?e[3]:void 0)??nt.NONE)|nt.TARGET,e}function yi(e){return!!(((e.length>3?e[3]:void 0)??nt.NONE)&nt.TARGET)}function _e(e,t,{coordinateHelper:n,elevationInfo:s},i){return e?ut(n.vectorToDehydratedPoint(e,cs),t,s,i):null}function ut(e,t,n,s=P()){return s[0]=e.x,s[1]=e.y,s[2]=e.z??0,t==null||(t.type==="2d"?s[2]=0:s[2]=gn(t,e,n,st)??0),s}function Ei(e,t,n){return n?(xe(n,e[0],e[1],e[2],t),n):dt(e[0],e[1],e[2],t)}function Se(e,t,{z:n,m:s},i,r){const{spatialReference:o,elevationInfo:a}=i;let u;n==null&&s==null?u=void 0:t==null||t.type==="2d"?u=n??void 0:u=yn(t,e,o,st,a)??0;const[c,d]=e;return r?xe(r,c,d,u,o):r=dt(c,d,u,o),s!=null&&(r.m=s,r.hasM=!0),r}function vi(e,t,n,s,i=P()){const[r,o]=e;return i[0]=r,i[1]=o,e.length>3&&(i[3]=e[3]??nt.NONE),n?.type!=="3d"?(i[2]=t.value,i):(i[2]=En(n,r,o,t.value,s,t.elevationInfo,st)??0,i)}(function(e){e[e.NONE=0]="NONE",e[e.TARGET=1]="TARGET"})(nt||(nt={}));const cs=dt(0,0,0,null);var m;(function(e){e[e.FEATURE=1]="FEATURE",e[e.SELF=2]="SELF",e[e.ALL=3]="ALL"})(m||(m={}));const _i=Symbol("grid-placement-graphic");function He(e,t){const n=e.x-t.x,s=e.y-t.y;return n*n+s*s}function Si(e,t){return Math.sqrt(He(e,t))}function ls(e,t){t.sort((n,s)=>Qt(n.targetPoint,e)-Qt(s.targetPoint,e))}var M;function bi({point:e,distance:t,returnEdge:n,vertexMode:s,coordinateHelper:{spatialReference:i},filter:r},o,a){return a=a!=null?a.clone():new Sn({where:"1=1"}),r&&(a.geometry=r.geometry,a.distance=r.distance,a.spatialRelationship=r.spatialRelationship,a.where=bn(a.where,r.where),a.timeExtent=wn(a.timeExtent,r.timeExtent),a.objectIds=hs(a.objectIds,r.objectIds)),{point:dt(e[0],e[1],e[2],i.toJSON()),mode:o,distance:t,returnEdge:n,vertexMode:s,query:a.toJSON()}}function hs(e,t){return e||t?t?e?Array.from(mn(new Set(e),new Set(t))):t:e:null}function wi(e,t,n){return{left:_e(e.leftVertex.pos,t,n),right:_e(e.rightVertex.pos,t,n)}}(function(e){e[e.TARGET=0]="TARGET",e[e.REFERENCE=1]="REFERENCE",e[e.REFERENCE_EXTENSION=2]="REFERENCE_EXTENSION"})(M||(M={}));const be=Symbol("snapping-toggle");function mi(e,t=()=>{}){const n=Xt(()=>({view:e.view,snappingOptions:e.snappingOptions}),({view:s,snappingOptions:i})=>{if(e.removeHandles(be),!s||!i)return;const r=vn.TOOL,o=[s.on("key-down",a=>{a.key!==Ee.toggle||a.repeat||(i.enabledToggled=!0,t())},r),s.on("key-up",a=>{a.key===Ee.toggle&&(i.enabledToggled=!1,t())},r),s.on("pointer-move",a=>{const u=a.native.ctrlKey;i.enabledToggled!==u&&(i.enabledToggled=u,t())},r)];e.addHandles(o,be)},Pe);e.addHandles(n)}function Li(e){return _n(e)&&"utilityNetworks"in e&&!!e.utilityNetworks?.length}function se({start:e,end:t,type:n},s,i){const r=[],o=tt(pt,t,e),a=tt(Ot,e,s),u=Tt(o),c=2*Mt(o,a),d=c*c-4*u*(Tt(a)-i*i);if(d===0){const p=-c/(2*u);(n===x.PLANE||p>=0)&&r.push(St(K(),e,o,p))}else if(d>0){const p=Math.sqrt(d),v=(-c+p)/(2*u);(n===x.PLANE||v>=0)&&r.push(St(K(),e,o,v));const g=(-c-p)/(2*u);(n===x.PLANE||g>=0)&&r.push(St(K(),e,o,g))}return r}function Ve(e,t){const n=e.start,s=e.end,i=tt(pt,s,n),r=et(Dt,-i[1],i[0],0),o=t.start,a=t.end,u=N(re,a,o),c=T(u,r),d=et(Je,n[0],n[1],0),p=N(Be,d,o),v=T(p,r),g=lt();if(Math.abs(c)<g)return[];const S=w(Ke,o,u,v/c);if(t.type===L.RAY){const $=N(te,S,o);if(T($,u)<-g)return[]}if(e.type===x.HALF_PLANE){const $=Tn(Ot,S,n);if(Mt($,i)<-g)return[]}return[Q(S)]}function ds(e,t){return fs(xt(ae,t[2],e),t)}function Ge(e,t){return Xe(xt(ae,0,e),xt(vs,0,t)).map(([s,i])=>bt(s,i))}function Ze(e,t,n){return Ue(e,xt(ae,e[2],t),n)}function We(e,t,n,s=f()){const i=tt(pt,e,t),r=$n(i);return St(s,t,i,r===0?1:n/r),s[2]=e[2],s}function Ue(e,{start:t,end:n,type:s},i=f()){const r=N(qt,e,t),o=N(Dt,n,t),a=T(r,o)/T(o,o);return w(i,t,o,s===L.RAY?Math.max(a,0):a)}const ps=(()=>{const e=f(),t=f(),n=f();return({start:s,end:i},{center:r,radius:o,normal:a,slicePlane:u})=>{const c=zt(r,a,Es);if(y(Bt(c,s),0)&&y(Bt(c,i),0)){Re(a,e,t);const p=(S,$)=>(Ct(n,$,r),ze(S,T(n,e),T(n,t)),S),v=is({start:p(pt,s),end:p(Ot,i),type:L.LINE},xn,o),g=[];for(const[S,$]of v){const R=Ae(f(),r);w(R,R,e,S),w(R,R,t,$),u&&!X(u,R)||g.push(R)}return g}const d=f();return Me(c,s,i,d)?!y(Ce(d,r),o)||u&&!X(u,d)?[]:[d]:[]}})();function Ye({start:e,end:t,type:n},s,i){const r=[],o=Ct(qt,t,e),a=tt(Ot,e,s),u=Tt(o),c=2*Mt(o,a),d=c*c-4*u*(Tt(a)-i*i);if(d===0){const p=-c/(2*u);(n===L.LINE||p>=0)&&r.push(w(f(),e,o,p))}else if(d>0){const p=Math.sqrt(d),v=(-c+p)/(2*u);(n===L.LINE||v>=0)&&r.push(w(f(),e,o,v));const g=(-c-p)/(2*u);(n===L.LINE||g>=0)&&r.push(w(f(),e,o,g))}return r}function Xe(e,t){const n=e.start,s=e.end,i=t.start,r=t.end,o=N(qt,s,n),a=N(Dt,r,i),u=N(re,i,n),c=$t(Je,o,a);if(!y(T(u,c),0))return[];const d=Jt(c);if(y(d,0))return[];const p=$t(Be,u,a),v=T(p,c)/d,g=w(Ke,n,o,v);if(e.type===L.RAY){const S=N(te,g,n);if(T(o,S)<-lt())return[]}if(t.type===L.RAY){const S=N(te,g,i);if(T(a,S)<-lt())return[]}return[Q(g)]}function fs({start:e,end:t,type:n},s){const i=N(qt,s,e),r=N(Dt,t,e),o=$t(re,r,i),a=Jt(o)/Jt(r),u=lt();if(a<u)switch(n){case L.LINE:return[Q(s)];case L.RAY:return T(r,i)<-u?[]:[Q(s)]}return[]}function ie(e,t,n,s){const[i,r]=e,[o,a]=n,u=o-i,c=a-r,d=u*u+c*c,p=Math.sqrt(d);if(p>t+s)return[];if(p<Math.abs(t-s))return[];if(y(p,0)&&y(t,s))return[];const v=(t*t-s*s+d)/(2*p),g=Math.sqrt(t*t-v*v),S=g*c/p,$=g*u/p,[R,B]=Nn(pt,e,n,v/p);return y(S,$)?[bt(R,B)]:[bt(R+S,B-$),bt(R-S,B+$)]}function xt(e,t,{start:n,end:s,type:i}){return et(e.start,n[0],n[1],t),et(e.end,s[0],s[1],t),e.type=ys[i],e}function Qe(e,t){return y(e[2],t[2])}function y(e,t){return Ln(Math.abs(e-t),0,lt())}function gs(e,t){return t.filter(n=>X(e,n))}function X(e,t){return Pn(e,t)}var x;(function(e){e[e.PLANE=0]="PLANE",e[e.HALF_PLANE=1]="HALF_PLANE"})(x||(x={}));const ys={[x.PLANE]:L.LINE,[x.HALF_PLANE]:L.RAY},pt=K(),Ot=K(),qt=f(),Dt=f(),re=f(),Je=f(),Be=f(),Ke=f(),te=f(),Es=A(),ae={start:f(),end:f(),type:L.LINE},vs={start:f(),end:f(),type:L.LINE};class C{intersect(t){return H(this,t)}closestPoints(t){return[this.closestTo(t)]}}class rt extends C{constructor(t){super(),this.point=t}equals(t){return this===t||z(t)&&_(this.point,t.point)}closestTo(){return it(this.point)}}class oe extends C{constructor(t,n,s){super(),this.start=t,this.end=n,this.lineLike={start:t,end:n,type:s}}equals(t){return this===t||D(t)&&this.lineLike.type===t.lineLike.type&&_(this.start,t.start)&&_(this.end,t.end)}closestTo(t){const n=P();return Ue(t,this.lineLike,n),n}}class ue extends oe{constructor(t,n){super(t,n,L.LINE)}}class _s extends oe{constructor(t,n){super(t,n,L.RAY)}}class tn extends C{constructor(t){super(),this.constraints=t}equals(t){return this===t||ee(t)&&On(this.constraints,t.constraints,(n,s)=>n.equals(s))}closestTo(t){let n,s=1/0;for(const i of this.constraints){const r=i.closestTo(t),o=Qt(t,r);o<s&&(s=o,n=r)}return it(n??t)}closestPoints(t){return this.constraints.flatMap(n=>n===this?[]:n.closestPoints(t))}}class en extends C{constructor(t,n){super(),this.center=t,this.radius=n}equals(t){return this===t||I(t)&&this.center[0]===t.center[0]&&this.center[1]===t.center[1]&&this.radius===t.radius}closestTo(t){const n=P();return We(t,this.center,this.radius,n),n}}class ce extends C{constructor(t,n){super(),this.center=t,this.radius=n}equals(t){return this===t||G(t)&&_(this.center,t.center)&&this.radius===t.radius}closestTo(t){const n=P();return We(t,this.center,this.radius,n),n[2]=this.center[2],n}asCircle(){return new le(it(this.center),this.radius,J(0,0,1))}}class le extends C{constructor(t,n,s,i=void 0){super(),this.center=t,this.radius=n,this.normal=s,this.slicePlane=i}equals(t){return this===t||Y(t)&&_(this.center,t.center)&&_(this.normal,t.normal)&&this.radius===t.radius}closestTo(t){const{center:n,radius:s}=this;Oe(this.getPlane(Ss),t,Vt);const i=N(Vt,Vt,n),r=Dn(i);if(y(r,0))return it(t);const o=s/Math.sqrt(r),a=P();w(a,n,i,o);const{slicePlane:u}=this;return u&&!X(u,a)?de(u,this)?.closestTo(t)??it(t):a}getPlane(t=A()){return zt(this.center,this.normal,t)}}const Vt=f(),Ss=A();class bs extends C{constructor(t){super(),this.z=t}equals(t){return this===t||V(t)&&this.z===t.z}closestTo(t){return J(t[0],t[1],this.z)}getPlane(t=A()){return et(we,0,0,this.z),zt(we,qn,t)}}const we=f();class he extends C{constructor(t,n,s){super(),this.start=t,this.end=n,this.planeLike={start:t,end:n,type:s}}equals(t){return this===t||k(t)&&this.planeLike.type===t.planeLike.type&&_(this.start,t.start)&&_(this.end,t.end)}closestTo(t){const n=P();return Ze(t,this.planeLike,n),n}closestEndTo(t){const{start:n,end:s}=this.planeLike;return Math.sign(Mt(tt(ws,s,n),tt(ms,t,n)))>0?this.end:this.start}getPlane(t=A()){const n=Ae(me,this.end);return n[2]+=1,Rn(this.start,this.end,n,t)}getSlicePlane(t=A()){const{start:n,end:s,type:i}=this.planeLike;if(i===x.PLANE)return;const r=et(me,n[0],n[1],0),o=et(Le,s[0],s[1],0),a=Ct(Le,o,r);return zt(r,a,t),t}}const ws=K(),ms=K(),me=f(),Le=f();class $i extends he{constructor(t,n){super(t,n,x.HALF_PLANE)}}class nn extends he{constructor(t,n){super(t,n,x.PLANE)}}class Ls extends C{constructor(t,n){super(),this.sphere=kn(t,n)}equals(t){return this===t||Z(t)&&In(this.sphere,t.sphere)}closestTo(t){const n=P();return Fn(this.sphere,t,n),n}get center(){return jn(this.sphere)}get radius(){return this.sphere[3]}}class sn extends C{constructor(t,n,s){super(),this.start=t,this.end=n,this.getZ=s,this.planeLike={start:t,end:n,type:x.PLANE}}equals(t){return this===t||Pt(t)&&_(this.start,t.start)&&_(this.end,t.end)&&this.getZ===t.getZ}closestTo(t){return Rs(this,t)}addIfOnTheGround(t,n){for(const s of n){const i=this.getZ(s[0],s[1])??0;y(s[2],i)&&(s[2]=i,t.push(s))}}}class $s extends C{constructor(t,n,s){super(),this._x=t,this._y=n,this._z=s}equals(t){return this===t||Ws(t)&&this._x===t._x&&this._y===t._y&&this._z===t._z}closestTo([t,n,s]){return je(this._x??t,this._y??n,this._z??s)}}class Ts extends C{constructor(t,n,s,i,r){super(),this._origin=t,this._spatialReference=n,this._distanceMeters=s,this._z=i,this._directionDegrees=r}equals(t){return this===t||Zs(t)&&ge(this._origin,t._origin)&&this._spatialReference===t._spatialReference&&this._distanceMeters===t._distanceMeters&&this._z===t._z&&this._directionDegrees===t._directionDegrees}closestTo([t,n,s]){return ze(ot,t,n),ge(ot,this._origin)||this._applyDirectionAndDistance(ot),je(ot[0],ot[1],this._z??s)}_applyDirectionAndDistance(t){if(this._directionDegrees!=null&&this._distanceMeters!=null)Kt(t,this._origin,this._directionDegrees,this._distanceMeters,this._spatialReference);else if(this._directionDegrees!=null)xs(t,this._origin,this._directionDegrees,t,this._spatialReference);else if(this._distanceMeters!=null){const{azimuth:n}=ke(Ns,this._origin,t,this._spatialReference);Kt(t,this._origin,n??0,this._distanceMeters,this._spatialReference)}}}const ot=[0,0],Ns=new Ie;function xs(e,t,n,s,i){let{azimuth:r,distance:o}=ke(Ps,t,s,i);r??=0;let a=o*Math.cos((r-n)*Un);a=Math.max(0,a),Kt(e,t,n,a,i)}const Ps=new Ie;function Rs(e,t){const n=P();return Ze(t,e.planeLike,n),n[2]=e.getZ(n[0],n[1])??an,n}function H(e,t){if(ee(e)){const n=[];for(const s of e.constraints){const i=s.intersect(t);i&&n.push(i)}return pe(n)}if(ee(t))return H(t,e);if(Pt(e))return $e(e,t);if(Pt(t))return $e(t,e);if(z(e)){const{point:n}=e;if(z(t))return _(n,t.point)?e:void 0;const s=t.closestTo(n);return An(s,n)?e:void 0}if(D(e)){if(z(t))return H(t,e);if(D(t))return q(Xe(e.lineLike,t.lineLike));if(V(t))return As(e,t);if(k(t))return q(Ve(t.planeLike,e.lineLike));if(I(t))return q(Ye(e.lineLike,t.center,t.radius));if(Y(t))return q(ps(e.lineLike,t));if(G(t))return Ms(e,t);if(Z(t))return Cs(e,t)}else if(V(e)){if(z(t)||D(t))return H(t,e);if(V(t))return zs(e,t);if(k(t))return Os(e,t);if(I(t))return qs(e,t);if(Y(t))return ks(e,t);if(G(t))return Ds(e,t);if(Z(t))return Is(e,t)}else if(k(e)){if(z(t)||D(t)||V(t))return H(t,e);if(k(t))return Gt(Ge(e.planeLike,t.planeLike));if(I(t))return Gt(se(e.planeLike,t.center,t.radius));if(Y(t))return js(e,t);if(G(t))return Fs(e,t);if(Z(t))return Hs(e,t)}else if(I(e)){if(z(t)||D(t)||V(t)||k(t))return H(t,e);if(I(t))return Gt(ie(e.center,e.radius,t.center,t.radius));if(Y(t))return void 0;if(G(t))return Vs(e,t);if(Z(t))return void 0}else if(Y(e)){if(z(t)||D(t)||V(t)||k(t)||I(t))return H(t,e);if(Y(t))return void 0;if(G(t))return t.asCircle(),void 0;if(Z(t))return void 0}else if(G(e)){if(z(t)||D(t)||V(t)||k(t)||I(t)||Y(t))return H(t,e);if(G(t))return Gs(t,e);if(Z(t))return void 0}else if(Z(e)){if(z(t)||D(t)||V(t)||k(t)||I(t)||G(t))return H(t,e);if(Z(t))return void 0}}const As=(()=>{const e=A();return(t,n)=>{const{start:s,end:i}=t;if(Qe(s,i)&&y(s[2],n.z))return t;const r=P();return Me(n.getPlane(e),s,i,r)?new rt(r):void 0}})();function Ms({lineLike:e},{center:t,radius:n}){const s=t[2];return q(Ye(e,t,n).filter(i=>y(i[2],s)))}function Cs({lineLike:e},{sphere:t}){return q(Cn(t,e.start,e.end))}const de=(()=>{const e=Vn(),t=f(),n=f();return(s,i,r)=>{const{normal:o,center:a,radius:u}=i;Re(o,t,n);const c=qe(s),d=u*T(c,t),p=u*T(c,n);Hn(e,a[0],a[1],a[2],1);const v=Gn(s,e),g=Math.hypot(d,p),S=y(g,0);if(y(Bt(s,a),0)){if(S)return i;if(y(u,0))return!r||X(r,a)?new rt(it(a)):void 0;$t(t,c,o),Zn(t,t);const It=new Array,Et=Q(a);w(Et,Et,t,u),r&&!X(r,Et)||It.push(Et);const vt=Q(a);return w(vt,vt,t,-u),r&&!X(r,vt)||It.push(vt),q(It)}if(S)return;const $=-v/g;if(Math.abs($)>1||y($,1))return;const R=Math.atan(d/p),B=Wn($)-R,fe=Math.PI-B,ft=new Array,gt=f();w(gt,a,t,u*Math.cos(B)),w(gt,gt,n,u*Math.sin(B)),ft.push(gt);const yt=f();return w(yt,a,t,u*Math.cos(fe)),w(yt,yt,n,u*Math.sin(fe)),ft.push(yt),q(r?gs(r,ft):ft)}})();function zs(e,t){return y(e.z,t.z)?e:void 0}function Os({z:e},{planeLike:t}){const[n,s]=t.start,[i,r]=t.end,o=J(n,s,e),a=J(i,r,e);return t.type===x.PLANE?new ue(o,a):new _s(o,a)}function qs(e,t){const[n,s]=t.center;return new ce(J(n,s,e.z),t.radius)}function Ds(e,t){return y(t.center[2],e.z)?t:void 0}const ks=(()=>{const e=A();return(t,n)=>de(t.getPlane(e),n,n.slicePlane)})();function Is(e,{center:t,radius:n}){const s=Math.abs(t[2]-e.z);if(s>n&&!y(s,n))return;const i=J(t[0],t[1],e.z),r=Math.sqrt(n**2-s**2);return y(r,0)?void 0:new ce(i,r)}const Fs=(()=>{const e=A();return(t,{center:n,radius:s})=>{const i=se(t.planeLike,n,s),r=n[2];t.getSlicePlane(e);const o=new Array;for(const[a,u]of i){const c=[a,u,r];X(e,c)&&o.push(c)}return q(o)}})(),js=(()=>{const e=A(),t=A();return(n,s)=>de(n.getPlane(e),s,n.getSlicePlane(t))})(),Hs=(()=>{const e=A();return(t,{center:n,radius:s})=>{const i=t.getPlane(e),r=zn(i,n),o=Math.abs(r);if(o>s&&!y(o,s))return;const a=Math.sqrt(s**2-r**2);if(y(a,0)){const d=P();return Oe(i,n,d),new rt(d)}const u=P(),c=Q(qe(i));return w(u,n,c,r),new le(u,a,c,t.getSlicePlane())}})();function Vs(e,t){const n=De(e.center,t.center);return y(n,0)&&y(e.radius,t.radius)?t:rn(ie(e.center,e.radius,t.center,t.radius),t.center[2])}function Gs(e,t){if(!Qe(e.center,t.center))return;const n=De(e.center,t.center);return y(n,0)&&y(e.radius,t.radius)?e:rn(ie(e.center,e.radius,t.center,t.radius),e.center[2])}function $e(e,t){const{planeLike:n,getZ:s}=e,i=new Array;if(z(t))e.addIfOnTheGround(i,ds(n,t.point));else if(D(t))e.addIfOnTheGround(i,Ve(n,t.lineLike));else if(I(t))for(const[r,o]of se(n,t.center,t.radius)){const a=s(r,o);a!=null&&i.push(Lt(r,o,a))}else if(k(t)||Pt(t))for(const[r,o]of Ge(n,t.planeLike)){const a=s(r,o)??an;i.push(Lt(r,o,a))}return q(i)}function Gt(e){return pe(e.map(([t,n])=>{const s=J(t,n,0),i=J(t,n,1);return new ue(s,i)}))}function q(e){return pe(e.map(t=>t?new rt(t):void 0))}function rn(e,t){return q(e.map(([n,s])=>[n,s,t]))}function pe(e){if(e.length!==0)return e.length===1?e[0]??void 0:new tn(e.filter(Mn))}function ee(e){return e instanceof tn}function z(e){return e instanceof rt}function D(e){return e instanceof oe}function V(e){return e instanceof bs}function k(e){return e instanceof he}function I(e){return e instanceof en}function G(e){return e instanceof ce}function Y(e){return e instanceof le}function Z(e){return e instanceof Ls}function Pt(e){return e instanceof sn}function Zs(e){return e instanceof Ts}function Ws(e){return e instanceof $s}const an=0;class at{constructor(t,n,s,i){this.targetPoint=t,this.constraint=n,this.isDraped=s,this.domain=i}}let on=class extends at{constructor({targetPoint:t,objectId:n,constraint:s,isDraped:i}){super(t,s,i,m.FEATURE),this.objectId=n}},kt=class{constructor(t,n){this.isDraped=t,this.domain=n}},F=class un extends kt{constructor(t,n,s,i,r=m.ALL,o=!0,a=!0){super(i,r),this.type=t,this.lineStart=n,this.lineEnd=s,this.fadeLeft=o,this.fadeRight=a}equals(t){return t instanceof un&&this.type===t.type&&_(this.lineStart,t.lineStart)&&_(this.lineEnd,t.lineEnd)&&this.fadeLeft===t.fadeLeft&&this.fadeRight===t.fadeRight}get length(){return Ce(this.lineStart,this.lineEnd)}},Us=class extends on{constructor(t){super({...t,isDraped:!0,constraint:new sn(t.edgeStart,t.edgeEnd,t.getGroundElevation)})}get hints(){return[new F(M.REFERENCE,this.constraint.start,this.constraint.end,this.isDraped,this.domain)]}},Ys=class extends on{constructor(t){super({...t,constraint:new ue(t.edgeStart,t.edgeEnd)})}get hints(){return[new F(M.REFERENCE,this.constraint.start,this.constraint.end,this.isDraped,this.domain)]}},Xs=class cn extends kt{constructor(t,n,s=m.ALL){super(n,s),this.intersectionPoint=t}equals(t){return t instanceof cn&&_(this.intersectionPoint,t.intersectionPoint)}},wt=class extends at{constructor(t,n,s,i){super(t,new rt(t),i,m.ALL),this.first=n,this.second=s}get hints(){return this.first.targetPoint=this.targetPoint,this.second.targetPoint=this.targetPoint,[...this.first.hints,...this.second.hints,new Xs(this.targetPoint,this.isDraped,this.domain)]}};class Qs extends at{constructor({lineStart:t,lineEnd:n,targetPoint:s,isDraped:i}){super(s,new nn(t,n),i,m.SELF),this._referenceLineHint=new F(M.REFERENCE_EXTENSION,t,n,i,this.domain)}get hints(){return[this._referenceLineHint,new F(M.TARGET,this._lineEndClosestToTarget(),this.targetPoint,this.isDraped,this.domain)]}_lineEndClosestToTarget(){return this.constraint.closestEndTo(this.targetPoint)}}let Js=class ln extends kt{constructor(t,n,s,i=m.ALL){super(s,i),this.lineStart=t,this.lineEnd=n}equals(t){return t instanceof ln&&_(this.lineStart,t.lineStart)&&_(this.lineEnd,t.lineEnd)}},Bs=class extends at{constructor({referenceLine:t,lineStart:n,targetPoint:s,isDraped:i}){const r=Q(n),{left:o,right:a}=t;Ct(r,Yn(r,r,a),o),super(s,new nn(n,r),i,m.SELF),this._referenceLines=[{edge:t,fadeLeft:!0,fadeRight:!0}]}get hints(){return[new F(M.TARGET,this.constraint.start,this.targetPoint,this.isDraped,this.domain),new Js(this.constraint.start,this.targetPoint,this.isDraped,this.domain),...this._referenceLines.map(t=>new F(M.REFERENCE,t.edge.left,t.edge.right,this.isDraped,this.domain,t.fadeLeft,t.fadeRight))]}addReferenceLine(t){const n={edge:t,fadeLeft:!0,fadeRight:!0};this._referenceLines.forEach(s=>{_(t.right,s.edge.left)&&(s.fadeLeft=!1,n.fadeRight=!1),_(t.right,s.edge.right)&&(s.fadeRight=!1,n.fadeRight=!1),_(t.left,s.edge.right)&&(s.fadeRight=!1,n.fadeLeft=!1),_(t.left,s.edge.left)&&(s.fadeLeft=!1,n.fadeLeft=!1)}),this._referenceLines.push(n)}},hn=class dn extends kt{constructor(t,n,s,i,r=m.ALL){super(i,r),this.previousVertex=t,this.centerVertex=n,this.nextVertex=s}equals(t){return t instanceof dn&&_(this.previousVertex,t.previousVertex)&&_(this.centerVertex,t.centerVertex)&&_(this.nextVertex,t.nextVertex)}},Ks=class extends at{constructor({targetPoint:t,constraint:n,previousVertex:s,otherVertex:i,otherVertexType:r,isDraped:o,selfSnappingType:a,objectId:u,domain:c}){super(t,n,o,c??m.SELF),this.previousVertex=s,this.otherVertex=i,this.otherVertexType=r,this.selfSnappingType=a??At.None,this.objectId=u??null}get hints(){const t=this.previousVertex,n=this.otherVertexType===Rt.CENTER?this.otherVertex:this.targetPoint,s=this.otherVertexType===Rt.CENTER?this.targetPoint:this.otherVertex;return[new F(M.TARGET,n,s,this.isDraped,this.domain),new F(M.REFERENCE,t,n,this.isDraped,this.domain),new hn(this.previousVertex,n,s,this.isDraped,this.domain)]}};var Rt,At;(function(e){e[e.NEXT=0]="NEXT",e[e.CENTER=1]="CENTER"})(Rt||(Rt={})),function(e){e[e.None=0]="None",e[e.LastVertex=1]="LastVertex",e[e.FirstVertex=2]="FirstVertex",e[e.ExistingEdge=3]="ExistingEdge"}(At||(At={}));class ti extends at{constructor({targetPoint:t,point1:n,point2:s,isDraped:i}){super(t,new en(Xn(f(),n,s,.5),.5*Qn(n,s)),i,m.SELF),this._p1=n,this._p2=s}get hints(){return[new F(M.REFERENCE,this.targetPoint,this._p1,this.isDraped,this.domain),new F(M.REFERENCE,this.targetPoint,this._p2,this.isDraped,this.domain),new hn(this._p1,this.targetPoint,this._p2,this.isDraped,this.domain)]}}function ei(e,t,n,s){return s.type==="2d"?(_t.x=e[0],_t.y=e[1],_t.spatialReference=t,s.toScreen(_t)):(rs(e,t,n,s,Te),s.state.camera.projectToScreen(Te,Zt),Jn(Zt[0],Zt[1]))}const _t=dt(0,0,0,null),Te=f(),Zt=Bn();let j=class extends Kn.EventedMixin(ne){constructor(e){super(e),this.options=new as,this._engineCache=new Map,this._loadTask=null,this._engines=[],this._currentMainCandidate=null,this._currentOtherActiveCandidates=[],this._currentSnappedType=W.MAIN}initialize(){this.addHandles([Xt(()=>{const{distance:e,touchSensitivityMultiplier:t,effectiveSelfEnabled:n,effectiveFeatureEnabled:s,effectiveGridEnabled:i}=this.options;return{selfEnabled:n,featureEnabled:s,gridEnabled:this.view.type==="2d"&&i,viewReady:this.view.ready,viewSpatialReference:this.view.spatialReference,distance:e,touchSensitivityMultiplier:t}},(e,t)=>{t&&(this.doneSnapping(),this.emit("changed")),this._loadTask?.abort(),this._loadTask=ts(n=>this._updateEngines(e,t,n))},Pe),Xt(()=>this.options,e=>{for(const t of this._engines)t.options=e},es)])}destroy(){this._loadTask?.abort(),this._destroyEngines()}get updating(){return this._engines.some(e=>e.updating)||!this._loadTask?.finished}_destroyEngines(){this._engineCache.forEach(e=>e.destroy()),this._engineCache.clear(),this._engines=[]}async _updateEngines(e,t,n){if(!e.viewReady)return void this._destroyEngines();t?.viewSpatialReference!==e.viewSpatialReference&&this._destroyEngines();const s=this._engineCache,i=await Promise.allSettled([e.featureEnabled&&!s.has("feature")?this._createFeatureSnappingEngine(n):void 0,e.selfEnabled&&!s.has("self")?this._createSelfSnappingEngine(n):void 0,e.gridEnabled&&!s.has("grid")?this._createGridSnappingEngine(n):void 0]);if(n.aborted)for(const r of i)r.status==="fulfilled"&&r.value?.engine.destroy();else{for(const r of i)r.status==="fulfilled"&&r.value&&s.set(r.value.type,r.value.engine);this._engines=Array.from(s.values())}}async _createSelfSnappingEngine(e){const{SelfSnappingEngine:t}=await Ft(()=>import("./SelfSnappingEngine-Dc8IeiIH.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]));return jt(e),{type:"self",engine:new t({view:this.view,options:this.options})}}async _createGridSnappingEngine(e){const{view:t}=this;if(t.type!=="2d")return;const{GridSnappingEngine:n}=await Ft(()=>import("./GridSnappingEngine-Dkonxpgc.js"),__vite__mapDeps([12,1,13,3,10,9,11]));return jt(e),{type:"grid",engine:new n({view:t,options:this.options})}}async _createFeatureSnappingEngine(e){const{FeatureSnappingEngine:t}=await Ft(()=>import("./FeatureSnappingEngine-C3-oRGz2.js"),__vite__mapDeps([14,1,15,10,3,9,11]));jt(e);const{view:n,options:s}=this,{spatialReference:i}=n;return{type:"feature",engine:new t({view:n,options:s,spatialReference:i})}}get _squaredMouseProximityThreshold(){return this.options.distance*this.options.distance}get _squaredTouchProximityThreshold(){const{distance:e,touchSensitivityMultiplier:t}=this.options,n=e*t;return n*n}snap(e){return ii(e)?this._snapMultiPoint(e):this._snapSinglePoint(e)}update(e){const{point:t,context:n}=e;this._removeVisualization();const s=this._currentMainCandidate;if(s==null)return t;const i=this._selectUpdateInput(e);if(i==null)return t;const{spatialReference:r}=n,o=ye(i,r);if(o==null)return t;const{view:a}=this,{elevationInfo:u,visualizer:c}=n,d=[],p=ut(o,a,u),v=s.constraint.closestTo(p);if(!this._arePointsWithinScreenThreshold(p,v,n)||!Ut(s,n.drawConstraints))return this._resetSnappingState(),t;s.targetPoint=Ht(v),d.push(...s.hints);for(const g of this._currentOtherActiveCandidates)Ut(g,n.drawConstraints)&&(g.targetPoint=Ht(v),d.push(...g.hints));return c!=null&&this.addHandles(c.draw(d,{spatialReference:r,elevationInfo:ri(n),view:a,selfSnappingZ:n.selfSnappingZ}),Wt),Se(v,a,t,n)}doneSnapping(){this._removeVisualization(),this._resetSnappingState()}_selectUpdateInput({point:e,scenePoint:t}){switch(this._currentSnappedType){case W.MAIN:return e;case W.SCENE:return t}}_resetSnappingState(){this._currentMainCandidate=null,this._currentOtherActiveCandidates=[],this._currentSnappedType=W.MAIN}_removeVisualization(){this.removeHandles(Wt)}async _snapSinglePoint({point:e,context:t,signal:n}){const{view:s}=this,{elevationInfo:i}=t,r=ut(e,s,i),o=await this._fetchCandidates(r,m.ALL,t,n);return this._createSnapResult(r,W.MAIN,o,s,e,t,n)}async _snapMultiPoint({point:e,scenePoint:t,context:n,signal:s}){const{view:i}=this,{coordinateHelper:r,elevationInfo:o,spatialReference:a}=n;await ns(t.spatialReference,a);const u=ye(t,a),c=ut(u,i,o),d=await this._fetchCandidates(c,m.FEATURE,n,s);if(d.length>0){const g=await this._fetchCandidates(c,m.SELF,n,s);return this._createSnapResult(c,W.SCENE,[...d,...g],i,u,n,s)}const p=ut(e,i,o),v=await this._fetchCandidates(p,m.SELF,n,s);return this._createSnapResult(p,W.MAIN,v,i,{z:r.hasZ()&&e.hasZ?e.z??0:void 0,m:r.hasM()&&e.hasM?e.m??0:void 0},n,s)}async _fetchCandidates(e,t,n,s){return(await Promise.all(this._engines.map(i=>i.fetchCandidates(e,t,n,s)))).flat()}_createSnapResult(e,t,n,s,i,r,o){return{get valid(){return!ss(o)},apply:()=>{const{spatialReference:a}=r,{snappedPoint:u,hints:c}=this._processCandidates(e,t,n,r);return this._removeVisualization(),r.visualizer!=null&&this.addHandles(r.visualizer.draw(c,{spatialReference:a,elevationInfo:st,view:s,selfSnappingZ:r.selfSnappingZ}),Wt),Se(u,s,i,r)}}}_processCandidates(e,t,n,s){if(n.length<1)return this.doneSnapping(),{snappedPoint:e,hints:[]};this._currentSnappedType!==t&&this._resetSnappingState(),ls(e,n);const i=this._currentMainCandidate;if(i!=null){const r=si(i,n);if(r>=0){if(!(n[r]instanceof wt))return this._intersectWithOtherCandidates(r,n,e,t,s);if(this._arePointsWithinScreenThreshold(e,i.targetPoint,s))return this._updateSnappingCandidate(i,t,n,s)}}return this._intersectWithOtherCandidates(0,n,e,t,s)}_intersectWithOtherCandidates(e,t,n,s,i){const{coordinateHelper:r}=i,o=t[e],a=[];for(let u=0;u<t.length;++u){if(u===e)continue;const c=t[u],d=o.constraint.intersect(c.constraint);if(d)for(const p of d.closestPoints(o.targetPoint))a.push([new wt(Ht(p),o,c,c.isDraped),this._squaredScreenDistance(n,p,r)])}return a.length>0&&(a.sort((u,c)=>u[1]-c[1]),a[0][1]<this._squaredPointProximityThreshold(i.pointer))?this._updateSnappingCandidate(a[0][0],s,t,i):Ut(o,i.drawConstraints)?this._updateSnappingCandidate(o,s,t,i):{snappedPoint:n,hints:[]}}_updateSnappingCandidate(e,t,n,s){this.doneSnapping(),this._currentMainCandidate=e,this._currentSnappedType=t;const i=this._currentMainCandidate.targetPoint,r=[];r.push(...e.hints);for(const o of n){if(e instanceof wt){if(o.constraint.equals(e.first.constraint)||o.constraint.equals(e.second.constraint))continue}else if(o.constraint.equals(e.constraint))continue;const a=o.constraint.closestTo(i);this._squaredScreenDistance(a,i,s.coordinateHelper)<ni()&&(o.targetPoint=i,this._currentOtherActiveCandidates.push(o),r.push(...o.hints))}return{snappedPoint:i,hints:r}}_squaredPointProximityThreshold(e){return e==="touch"?this._squaredTouchProximityThreshold:this._squaredMouseProximityThreshold}_arePointsWithinScreenThreshold(e,t,n){return this._squaredScreenDistance(e,t,n.coordinateHelper)<this._squaredPointProximityThreshold(n.pointer)}_squaredScreenDistance(e,t,n){return He(this._toScreen(e,n),this._toScreen(t,n))}_toScreen(e,t){return ei(e,t.spatialReference,st,this.view)}get test(){}};var W;l([h({constructOnly:!0})],j.prototype,"view",void 0),l([h()],j.prototype,"options",void 0),l([h({readOnly:!0})],j.prototype,"updating",null),l([h()],j.prototype,"_loadTask",void 0),l([h()],j.prototype,"_engines",void 0),l([h()],j.prototype,"_squaredMouseProximityThreshold",null),l([h()],j.prototype,"_squaredTouchProximityThreshold",null),j=l([ht("esri.views.interactive.snapping.SnappingManager")],j),function(e){e[e.MAIN=0]="MAIN",e[e.SCENE=1]="SCENE"}(W||(W={}));const Wt="visualization-handle";function ni(){return Nt.satisfiesConstraintScreenThreshold*Nt.satisfiesConstraintScreenThreshold}function Ut(e,t){return!t||t.direction==null&&t.distance==null||!(e instanceof Us||e instanceof Ys||e instanceof Qs||e instanceof Bs||e instanceof ti)&&(!(e instanceof Ks)||t.direction==null&&e.selfSnappingType===At.LastVertex)}function si(e,t){return e instanceof wt?Yt(t,e.first)>=0&&Yt(t,e.second)>=0?0:-1:Yt(t,e)}function Yt(e,t){let n=-1;for(let s=0;s<e.length;++s)if(t.constraint.equals(e[s].constraint)){n=s;break}return n}function ii(e){return e.scenePoint!=null}function ri({coordinateHelper:e,elevationInfo:t}){return e.hasZ()?st:t}export{ei as A,Si as B,fi as C,vi as D,ls as E,yi as F,M as G,mi as H,j as I,He as J,wi as K,Ue as L,Bs as M,_e as N,At as O,ti as P,ut as Q,Se as R,en as S,Ei as T,$s as U,pe as V,bs as W,z as X,Ts as Z,kt as a,gi as b,Qs as c,_i as d,wt as e,je as f,P as g,Ht as h,Us as i,Ys as j,J as k,on as l,rt as m,F as n,Xs as o,Nt as p,as as q,Js as r,hn as s,Fe as t,Li as u,m as v,Ks as w,$i as x,bi as y,Rt as z};
