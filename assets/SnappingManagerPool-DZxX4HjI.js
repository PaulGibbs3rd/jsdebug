import{aP as i,aW as s,aG as p,aU as u,lo as c}from"./index-CzvLtnX1.js";import{q as f,p as l,t as d,I as m}from"./SnappingManager-DEKGuS80.js";function g(t,e){const n=new f({enabled:!0,selfEnabled:!1,featureEnabled:!0,distance:e?.distance,touchSensitivityMultiplier:e?.touchSensitivityMultiplier??l.touchSensitivityMultiplier});return{...i(()=>t.map?.allLayers?.toArray()??[],a=>{n.featureSources=new p(a).map(o=>new d({layer:o}))},s),options:n}}const r=new Map;function $(t){if(!r.has(t)){const a=g(t,{distance:10}),o=y(t,a.options);r.set(t,{referenceCount:0,snappingManager:o,remove:()=>{a.remove(),o.destroy()}})}const e=r.get(t);e.referenceCount++;const n=u(()=>v(t,e));return{snappingManager:e.snappingManager,...n}}function v(t,e){e.referenceCount--,e.referenceCount>0||c(()=>{e.referenceCount===0&&(e.remove(),r.delete(t))})}function y(t,e){return new m({view:t,options:e})}export{$ as a};
