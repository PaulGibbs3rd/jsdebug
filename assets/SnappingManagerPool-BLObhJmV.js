import{aP as i,aW as p,aG as s,aU as u,lo as c}from"./index-CfYeSufM.js";import{q as f,p as l,t as d,I as m}from"./SnappingManager-uFSx-TIH.js";function g(t,e){const o=new f({enabled:!0,selfEnabled:!1,featureEnabled:!0,distance:e==null?void 0:e.distance,touchSensitivityMultiplier:(e==null?void 0:e.touchSensitivityMultiplier)??l.touchSensitivityMultiplier});return{...i(()=>{var n,a;return((a=(n=t.map)==null?void 0:n.allLayers)==null?void 0:a.toArray())??[]},n=>{o.featureSources=new s(n).map(a=>new d({layer:a}))},p),options:o}}const r=new Map;function $(t){if(!r.has(t)){const n=g(t,{distance:10}),a=y(t,n.options);r.set(t,{referenceCount:0,snappingManager:a,remove:()=>{n.remove(),a.destroy()}})}const e=r.get(t);e.referenceCount++;const o=u(()=>v(t,e));return{snappingManager:e.snappingManager,...o}}function v(t,e){e.referenceCount--,e.referenceCount>0||c(()=>{e.referenceCount===0&&(e.remove(),r.delete(t))})}function y(t,e){return new m({view:t,options:e})}export{$ as a};
