const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BW2seC_M.js","assets/index-CzvLtnX1.js","assets/index-DIct7sDv.js","assets/ExpandToggle-CqUm6Nhw.js","assets/index-CAjZzsdn.js","assets/geometryEngineJSON-oRyFp_Dn.js","assets/geometryEngineBase-C-gsyNi-.js","assets/_commonjsHelpers-DCkdB7M8.js","assets/json-Wa8cmqdu.js","assets/index-C3aDryrg.js","assets/index-B7j1IKNv.js","assets/index-CkYd-Wtf.js","assets/index-BVkJef4X.js","assets/index-qk8Z_tnM.js","assets/index-CofE4ubU.js","assets/Legend-LPXE2ZAi.js","assets/featureReductionUtils-Caulfaw_.js","assets/EffectView-BiQ7qc0o.js","assets/ExportImageParameters-BWRvZJrm.js","assets/floorFilterUtils-DKzVzLpH.js","assets/sublayerUtils-vo1-sn1O.js","assets/pixelRangeUtils-CDdoTPKf.js","assets/rendererConversion-CGpNLgtM.js","assets/cimSymbolUtils-D5sHtYK8.js","assets/symbolUtils-CBw3yFrR.js","assets/utils-CtGOd0WT.js","assets/utils-CICEYmO-.js","assets/webStyleSymbolUtils-DI4Hu7Mk.js","assets/devEnvironmentUtils-8WtPGj6h.js","assets/substitute-DjOBkIlW.js","assets/index-re5hGMlJ.js","assets/GridControls-xszWk4im.js","assets/defaultUnit-CJt4JLKh.js","assets/quantityFormatUtils-DKqV-Ju2.js","assets/gridUtils-CJWQau1Q.js","assets/geodesicUtils-C0S8HwBT.js","assets/editingTools-iOy8KUDk.js","assets/SnappingVisualizer2D-DYwQ_g61.js","assets/SnappingManager-DEKGuS80.js","assets/keybindings-DIxDEOyk.js","assets/geometry2dUtils-C5OK12a_.js","assets/viewUtils-D5G6nsnP.js","assets/SnappingVisualizer-CMv9S1yr.js","assets/PointSnappingHint-Dmq3EHae.js","assets/editPlaneUtils-B2Nxv8Mb.js","assets/SketchTooltipInfo-dn_tVsrX.js","assets/MeshTransform-Bv7hOi4j.js","assets/memoize-DmxaQ-k8.js","assets/angularMeasurementUtils-DI0dMEin.js","assets/directionModeIcons-B1HTO4eU.js","assets/ReactiveSet-67kD2XpC.js","assets/dehydratedFeatureComparison-BBO76xQi.js","assets/EditGeometryOperations-B_ujSqy0.js","assets/InteractiveToolBase-CXcuwHxr.js","assets/SketchOptions-CyxQazxr.js","assets/SnappingOperation-D7WosXl0.js","assets/geometryEngine-CfNZEGqf.js","assets/hydrated-BSJF97b-.js","assets/GraphicsLayer-BaW3rFbI.js","assets/automaticAreaMeasurementUtils-y6XJpiYO.js","assets/geodesicLengthMeasurementUtils-1KCptDKk.js","assets/euclideanAreaMeasurementUtils-B2AM7mQd.js","assets/automaticLengthMeasurementUtils-CjX17wm-.js","assets/GraphicManipulator-Bc6SDBuo.js","assets/drapedUtils-EmUI5byW.js","assets/drawUtils-vhzN4YLk.js","assets/TextOverlayItem-152VUesa.js","assets/number-Caga42RA.js","assets/SketchViewModel-CTTg9q51.js","assets/vmEvent-D4Ubqkbq.js","assets/index-BbC7Y_Wo.js"])))=>i.map(i=>d[i]);
import{g as F,b as o,m as l,c as _,so as d,zU as _t,sm as W,sn as J,_ as g,sq as Xe,sp as Y,aG as U,u as ne,b0 as X,iK as Re,zV as bt,ql as ft,dL as wt,kz as Tt,kA as Mt,ew as Le,zW as Lt,aU as Ye,j_ as Ie,nn as Ct,zX as Je,zY as et,zZ as Ot,z_ as St,z$ as fe,eU as ue,A0 as kt,nl as He,ch as Et,fd as tt,dn as It,b$ as $t,nk as Pt,j as Vt,lK as At,aP as b,dm as he,lB as Te,aA as ge,bE as $e,sr as Pe,au as it,n as ot,P,A1 as Ne,z2 as ye,A2 as Bt,A3 as xt,A4 as Dt,td as Fe,H as Rt,t3 as Ht,mv as Nt,e_ as Ft,aW as ze}from"./index-CzvLtnX1.js";import{l as st,b as zt}from"./SketchOptions-CyxQazxr.js";import{r as Ge,y as lt,o as ae}from"./SketchViewModel-CTTg9q51.js";import{a as Gt,u as We,W as Wt,L as Ut,T as Kt,v as jt,b as qt,e as Qt}from"./directionModeIcons-B1HTO4eU.js";import{n as Zt}from"./InteractiveToolBase-CXcuwHxr.js";import{p as ve}from"./keybindings-DIxDEOyk.js";import{o as Xt,r as Yt}from"./drapedUtils-EmUI5byW.js";import{q as nt,t as Jt}from"./SnappingManager-DEKGuS80.js";import{e as ei}from"./vmEvent-D4Ubqkbq.js";import{s as Ue}from"./substitute-DjOBkIlW.js";let I=class extends F{constructor(e){super(e),this.colorSelection=!0,this.dynamicScaleToggle=!0,this.gridEnabledToggle=!0,this.numericInputs=!0,this.gridSnapEnabledToggle=!0,this.lineIntervalInput=!0,this.outOfScaleWarning=!0,this.placementButtons=!0,this.rotateWithMapToggle=!0}};o([l({type:Boolean,nonNullable:!0})],I.prototype,"colorSelection",void 0),o([l({type:Boolean,nonNullable:!0})],I.prototype,"dynamicScaleToggle",void 0),o([l({type:Boolean,nonNullable:!0})],I.prototype,"gridEnabledToggle",void 0),o([l({type:Boolean,nonNullable:!0})],I.prototype,"numericInputs",void 0),o([l({type:Boolean,nonNullable:!0})],I.prototype,"gridSnapEnabledToggle",void 0),o([l({type:Boolean,nonNullable:!0})],I.prototype,"lineIntervalInput",void 0),o([l({type:Boolean,nonNullable:!0})],I.prototype,"outOfScaleWarning",void 0),o([l({type:Boolean,nonNullable:!0})],I.prototype,"placementButtons",void 0),o([l({type:Boolean,nonNullable:!0})],I.prototype,"rotateWithMapToggle",void 0),I=o([_("esri.widgets.support.GridControls.VisibleElements")],I);const rt=I;let $=class extends F{constructor(e){super(e),this.enabledToggle=!0,this.featureEnabledToggle=!0,this.gridEnabledToggle=!0,this.header=!1,this.layerList=!0,this.gridControls=!0,this.gridControlsElements=new rt({gridSnapEnabledToggle:!1,gridEnabledToggle:!1}),this.layerListToggleLayersButton=!0,this.selfEnabledToggle=!0}};o([l({type:Boolean,nonNullable:!0})],$.prototype,"enabledToggle",void 0),o([l({type:Boolean,nonNullable:!0})],$.prototype,"featureEnabledToggle",void 0),o([l({type:Boolean,nonNullable:!0})],$.prototype,"gridEnabledToggle",void 0),o([l({type:Boolean,nonNullable:!0})],$.prototype,"header",void 0),o([l({type:Boolean,nonNullable:!0})],$.prototype,"layerList",void 0),o([l({type:Boolean,nonNullable:!0})],$.prototype,"gridControls",void 0),o([l({type:rt,nonNullable:!0})],$.prototype,"gridControlsElements",void 0),o([l({type:Boolean,nonNullable:!0})],$.prototype,"layerListToggleLayersButton",void 0),o([l({type:Boolean,nonNullable:!0})],$.prototype,"selfEnabledToggle",void 0),$=o([_("esri.widgets.support.SnappingControls.VisibleElements")],$);const Ce=$;let E=class extends F{constructor(e){super(e),this.point=!0,this.polyline=!0,this.polygon=!0,this.rectangle=!0,this.circle=!0,this.multipoint=!0,this.mesh=!0,this.freehandPolyline=!1,this.freehandPolygon=!1}};o([l({type:Boolean,nonNullable:!0})],E.prototype,"point",void 0),o([l({type:Boolean,nonNullable:!0})],E.prototype,"polyline",void 0),o([l({type:Boolean,nonNullable:!0})],E.prototype,"polygon",void 0),o([l({type:Boolean,nonNullable:!0})],E.prototype,"rectangle",void 0),o([l({type:Boolean,nonNullable:!0})],E.prototype,"circle",void 0),o([l({type:Boolean,nonNullable:!0})],E.prototype,"multipoint",void 0),o([l({type:Boolean,nonNullable:!0})],E.prototype,"mesh",void 0),o([l({type:Boolean,nonNullable:!0})],E.prototype,"freehandPolyline",void 0),o([l({type:Boolean,nonNullable:!0})],E.prototype,"freehandPolygon",void 0),E=o([_("esri.widgets.Sketch.VisibleElements.CreateToolVisibilityMap")],E);let le=class extends F{constructor(e){super(e),this["rectangle-selection"]=!0,this["lasso-selection"]=!0,this["custom-selection"]=!0}};o([l({nonNullable:!0})],le.prototype,"rectangle-selection",void 0),o([l({nonNullable:!0})],le.prototype,"lasso-selection",void 0),o([l({nonNullable:!0})],le.prototype,"custom-selection",void 0),le=o([_("esri.widgets.Sketch.VisibleElements.SelectionToolVisibilityMap")],le);let L=class extends F{constructor(e){super(e),this.createTools=new E,this.directionModePicker=!1,this.duplicateButton=!0,this.deleteButton=!0,this.selectionCountLabel=!0,this.labelsToggle=!0,this.selectionTools=new le,this.settingsMenu=!0,this.snappingControls=!0,this.snappingControlsElements=new Ce,this.tooltipsToggle=!0,this.undoRedoMenu=!0}};o([l({type:E,nonNullable:!0})],L.prototype,"createTools",void 0),o([l({type:Boolean,nonNullable:!0})],L.prototype,"directionModePicker",void 0),o([l({type:Boolean,nonNullable:!0})],L.prototype,"duplicateButton",void 0),o([l({type:Boolean,nonNullable:!0})],L.prototype,"deleteButton",void 0),o([l({type:Boolean,nonNullable:!0})],L.prototype,"selectionCountLabel",void 0),o([l({type:Boolean,nonNullable:!0})],L.prototype,"labelsToggle",void 0),o([l({type:le,nonNullable:!0})],L.prototype,"selectionTools",void 0),o([l({type:Boolean,nonNullable:!0})],L.prototype,"settingsMenu",void 0),o([l({type:Boolean,nonNullable:!0})],L.prototype,"snappingControls",void 0),o([l({type:Ce,nonNullable:!0})],L.prototype,"snappingControlsElements",void 0),o([l({type:Boolean,nonNullable:!0})],L.prototype,"tooltipsToggle",void 0),o([l({type:Boolean,nonNullable:!0})],L.prototype,"undoRedoMenu",void 0),L=o([_("esri.widgets.Sketch.VisibleElements")],L);const C={groupSeparator:1,action:{s:32,m:48,l:64},splitButtonPart:{horizontal:{s:16,m:16,l:24},vertical:{s:16,m:24,l:40}}},at={splitButton:{horizontal:"chevron-down",vertical:"ellipsis"},overflow:"ellipsis"};function dt(t,e){return t.vnodeSelector===e?[t]:t.children?.flatMap(i=>dt(i,e))??[]}const Ve=t=>{let e=class extends t{constructor(){super(...arguments),this.priority=0,this.scale="m",this.slot=void 0,this.lastActiveKey=null,this.layout="horizontal"}destroy(){this.measurementManager?.managedElements.remove(this),this.measurementManager=null}set measurementManager(i){const s=this._get("measurementManager");i!==s&&(s&&s.managedElements.remove(this),this._set("measurementManager",i),i?.managedElements.add(this))}set budgetedLength(i){this.budgetedLength!==i&&(this._set("budgetedLength",i),this.scheduleRender())}get actionChildren(){return this.children?.flatMap(i=>dt(i,"calcite-action"))??[]}get activeChildElement(){const i=this.actionChildren.find(s=>s.properties?.active===!0);return i?(this._set("lastActiveKey",i.properties?.key),i):this.lastActiveKey?this.actionChildren.find(s=>s.properties?.key===this.lastActiveKey):void 0}_handleClick(i){i?.dataset&&"dataset"in i&&i.dataset.actionKey&&(this.lastActiveKey=i.dataset.actionKey)}};return o([l()],e.prototype,"priority",void 0),o([l()],e.prototype,"measurementManager",null),o([l()],e.prototype,"budgetedLength",null),o([l()],e.prototype,"actionChildren",null),o([l()],e.prototype,"activeChildElement",null),o([l()],e.prototype,"scale",void 0),o([l()],e.prototype,"slot",void 0),o([l()],e.prototype,"lastActiveKey",void 0),o([l()],e.prototype,"layout",void 0),e=o([_("esri.widgets.Sketch.support.ResponsiveToolbar.ToolbarGroupBase")],e),e},Ke=Symbol("on-resize-handle-key");let ee=class extends Ve(W){constructor(e){super(e),this._measuredWidth=0,this._measuredHeight=0,this._measuredElement=null}destroy(){this._measuredElement=null}get lengthOptions(){return[this.layout==="horizontal"?this._measuredWidth:this._measuredHeight]}render(){return d("div",{afterCreate:e=>{this._measuredElement=e.firstElementChild,this.addHandles(_t(this._measuredElement,()=>{this._measuredWidth=this._measuredElement?.clientWidth??0,this._measuredHeight=this._measuredElement?.clientHeight??0}),Ke)},afterRemoved:()=>this.removeHandles(Ke)},this.children)}};o([l()],ee.prototype,"_measuredWidth",void 0),o([l()],ee.prototype,"_measuredHeight",void 0),o([l()],ee.prototype,"lengthOptions",null),o([l()],ee.prototype,"_measuredElement",void 0),ee=o([_("esri.widgets.Sketch.support.ResponsiveToolbar.MeasuredContentGroup")],ee);const ti=ee;let j=class extends Ve(W){constructor(e){super(e),this.allowCollapse=!0,this.messagesCommon=null}loadDependencies(){return J({action:()=>g(()=>import("./index-CzvLtnX1.js").then(e=>e.HN),[]),"action-group":()=>g(()=>import("./index-BW2seC_M.js").then(e=>e.i),__vite__mapDeps([0,1])),"action-menu":()=>g(()=>import("./index-CzvLtnX1.js").then(e=>e.HT),[])})}get minimumLength(){const{actionChildren:e,scale:i}=this;return e.length?this.allowCollapse?C.groupSeparator+C.action[i]*Math.min(e.length,2):C.groupSeparator+C.action[i]*e.length:0}get lengthOptions(){const{actionChildren:e,scale:i,minimumLength:s,allowCollapse:n,priority:r}=this,a=[s];if(e.length<=2||!n||r<1)return a;for(let c=1;c<e.length-1;c++)a.push(s+C.action[i]*c);return a}render(){if(!this.actionChildren.length)return d(Xe,null,void 0);const{budgetedLength:e,actionChildren:i,activeChildElement:s,layout:n,slot:r,scale:a}=this,c=Math.floor(e/C.action[a]),p=[],u=[];if(c>=i.length)p.push(...i);else{const y=s??p.at(0);if(p.push(...i.slice(0,c-1)),u.push(...i.slice(c-1)),y&&u.includes(y)){const[m]=u.splice(u.indexOf(y),1),T=p.pop();p.push(m),T&&u.unshift(T)}}return d("calcite-action-group",{key:"overflow-button-group",layout:n,onclick:y=>this._handleClick(y.target),slot:r},p.map(y=>this._renderManagedAction(y)),u.length>0?d("calcite-action-menu",{key:"split-button-dropdown",label:this.messagesCommon.more,overlayPositioning:"fixed"},d("calcite-action",{icon:at.overflow,key:"split-button-dropdown-trigger",scale:a,slot:"trigger",text:this.messagesCommon.more}),u.map(y=>this._renderManagedAction(y))):void 0)}_renderManagedAction(e){return d("calcite-action",{...e?.properties,"data-action-key":e?.properties?.key,text:e?.properties?.text??""})}};j.vnodeSelector="calcite-action-group",o([l()],j.prototype,"allowCollapse",void 0),o([l()],j.prototype,"minimumLength",null),o([l(),Y("esri/t9n/common")],j.prototype,"messagesCommon",void 0),o([l()],j.prototype,"lengthOptions",null),j=o([_("esri.widgets.Sketch.support.ResponsiveToolbar.OverflowGroup")],j);const ii=j;let q=class extends F{constructor(){super(...arguments),this.measuredElement=null,this.managedElements=new U,this.availableLength=0,this.layout="horizontal",this._resizeObserver=new ResizeObserver(()=>{this._measure()})}get _sortedElements(){return[...this.managedElements].sort((t,e)=>e.priority-t.priority)}connect(t){this._resizeObserver.disconnect(),this.measuredElement=t,this._resizeObserver.observe(t),this._measure()}allocate(){const t=new Map,{availableLength:e,_sortedElements:i}=this;let s=0;for(const n of i){const r=n.lengthOptions[0];t.set(n,r),s+=r}for(const n of i)for(;s<e;){const r=t.get(n);if(!r)break;const a=n.lengthOptions.find(p=>p>r);if(!a)break;const c=s-r+a;if(c>e)break;t.set(n,a),s=c}for(const[n,r]of t)n.budgetedLength=r}_measure(){const t=this.measuredElement;this.availableLength=t?this.layout==="horizontal"?t.clientWidth??0:t.clientHeight??0:0,this.allocate()}destroy(){this._resizeObserver.disconnect()}};o([l()],q.prototype,"measuredElement",void 0),o([l()],q.prototype,"managedElements",void 0),o([l()],q.prototype,"_sortedElements",null),o([l()],q.prototype,"availableLength",void 0),o([l()],q.prototype,"layout",void 0),q=o([_("esri.widgets.Sketch.support.ResponsiveToolbar.ResponsiveToolbarManager")],q);const oi=q,si={splitButtonBase:"esri-split-button--split-part"};let te=class extends Ve(W){constructor(e){super(e),this.messagesCommon=null}loadDependencies(){return J({action:()=>g(()=>import("./index-CzvLtnX1.js").then(e=>e.HN),[]),"action-group":()=>g(()=>import("./index-BW2seC_M.js").then(e=>e.i),__vite__mapDeps([0,1])),"action-menu":()=>g(()=>import("./index-CzvLtnX1.js").then(e=>e.HT),[])})}get minimumLength(){const e=this.actionChildren;return e.length?e.length===1?C.action[this.scale]+C.groupSeparator:C.action[this.scale]+C.splitButtonPart[this.layout][this.scale]+C.groupSeparator:0}get lengthOptions(){const{actionChildren:e,minimumLength:i,layout:s,scale:n,priority:r}=this;if(e.length<2||r<0)return[i];const a=C.groupSeparator+C.action[n]*e.length;return[C.groupSeparator+C.action[n]+C.splitButtonPart[s][n],a]}render(){if(!this.actionChildren.length)return d(Xe,null,void 0);const{actionChildren:e,minimumLength:i,budgetedLength:s,layout:n,slot:r}=this,a=e.length<2||s>i;return d("calcite-action-group",{key:"split-button-group",layout:n,onclick:c=>this._handleClick(c.target),slot:r},a?this._renderUnSplit():this._renderSplit())}_renderSplit(){const{activeChildElement:e,layout:i,actionChildren:s,scale:n,messagesCommon:r}=this,a=e??s.at(0);if(!a)return;const c=s.filter(p=>p!==a);return[this._renderManagedAction(a),d("calcite-action-menu",{key:"split-button-dropdown",label:r.more,overlayPositioning:"fixed",placement:i==="horizontal"?"bottom-end":"right-end"},d("calcite-action",{class:`${si.splitButtonBase}--${i}--${this.scale}`,compact:i==="horizontal",icon:at.splitButton[i],key:"split-button-dropdown-trigger",scale:n,slot:"trigger",text:r.more}),c?.map(p=>this._renderManagedAction(p)))]}_renderUnSplit(){return this.actionChildren.map(e=>this._renderManagedAction(e))}_renderManagedAction(e){return d("calcite-action",{...e?.properties,"data-action-key":e?.properties?.key,text:e?.properties?.text??""})}};te.vnodeSelector="calcite-action-group",o([l()],te.prototype,"minimumLength",null),o([l()],te.prototype,"lengthOptions",null),o([l(),Y("esri/t9n/common")],te.prototype,"messagesCommon",void 0),te=o([_("esri.widgets.Sketch.support.ResponsiveToolbar.SplitButton")],te);const V="esri-responsive-toolbar",A={rulerBase:`${V}__ruler`,rulerBarHorizontal:`${V}__ruler--bar`,rulerBarVertical:`${V}__ruler--bar--vertical`,rulerPadVertical:`${V}__ruler--pad--vertical`,rulerPadHorizontal:`${V}__ruler--pad--horizontal`,bar:`${V}__bar`,barHorizontal:`${V}__bar--horizontal`,barVertical:`${V}__bar--vertical`,pad:`${V}__pad`,padVertical:`${V}__pad--vertical`,padHorizontal:`${V}__pad--horizontal`};let Q=class extends W{constructor(e){super(e),this.scale="m",this.barStyle="floating",this._measurementManager=new oi,this._managedWidgets=new Map}loadDependencies(){return J({"action-bar":()=>g(()=>import("./index-DIct7sDv.js"),__vite__mapDeps([2,1,0,3])),"action-pad":()=>g(()=>import("./index-CAjZzsdn.js"),__vite__mapDeps([4,1,0,3]))})}destroy(){this._measurementManager=ne(this._measurementManager),this._managedWidgets.forEach(e=>e.destroy()),this._managedWidgets.clear()}set layout(e){const i=this._get("layout");this._set("layout",e),this._measurementManager&&(this._measurementManager.layout=e),i!==e&&this.scheduleRender()}render(){const{layout:e,scale:i,barStyle:s}=this,n={layout:e,scale:i,expandDisabled:!0,key:"measured-toolbar"},r=s==="docked"?e==="vertical"?A.rulerBarVertical:A.rulerBarHorizontal:e==="horizontal"?A.rulerPadHorizontal:A.rulerPadVertical;return d("div",null,d("div",{afterCreate:a=>{this._measurementManager?.connect(a)},class:this.classes(A.rulerBase,r)}),s==="docked"?d("calcite-action-bar",{...n,classes:{[A.barHorizontal]:this.layout==="horizontal",[A.barVertical]:this.layout==="vertical",[A.bar]:!0},overflowActionsDisabled:!0},this._renderChildren()):d("calcite-action-pad",{...n,class:this.classes(A.pad,e==="horizontal"?A.padHorizontal:A.padVertical)},this._renderChildren()))}_renderChildren(){if(!this.children)return;const e=this.children.filter(n=>n.properties?.key!==void 0&&"group-kind"in n.properties),i=new Set,s=e.map(n=>{const r=n.properties,a=r.key;i.add(a);const c=this.barStyle==="docked"?r.slot??void 0:void 0,p=r.priority??0,u=r["group-kind"]??"overflow-group",y=r["allow-collapse"]??!0,m=this._managedWidgets.get(a);if(m)return m.children=n.children,m.priority=p,"allowCollapse"in m&&(m.allowCollapse=y),m.slot=c,m.layout=this.layout,m.scale=this.scale,m.measurementManager=this._measurementManager,m;const T={scale:this.scale,priority:p,measurementManager:this._measurementManager,children:n.children,slot:c,layout:this.layout};switch(u){case"split-button":{const S=new te({...T});return this._managedWidgets.set(a,S),S}case"overflow-group":{const S=new ii({...T,allowCollapse:y});return this._managedWidgets.set(a,S),S}case"measured-content":{const S=new ti({...T});return this._managedWidgets.set(a,S),S}}}).filter(X);return Array.from(this._managedWidgets.keys()).filter(n=>!i.has(n)).forEach(n=>{this._managedWidgets.get(n)?.destroy(),this._managedWidgets.delete(n)}),this._measurementManager?.allocate(),s.map(n=>n.render())}};o([l()],Q.prototype,"scale",void 0),o([l({value:"horizontal"})],Q.prototype,"layout",null),o([l()],Q.prototype,"barStyle",void 0),o([l()],Q.prototype,"_measurementManager",void 0),o([l()],Q.prototype,"_managedWidgets",void 0),Q=o([_("esri.widgets.Sketch.support.ResponsiveToolbar.ResponsiveToolbar")],Q);const je=Q;let O=class extends F{constructor(e){super(e),this.coordinates=void 0,this.strokeDash=[],this.strokeWidth=1,this.strokeColor=[0,0,0,1],this.strokeDashColor=[255,255,255,1],this.fillColor=[0,0,0,0],this.visible=!0,this.isDecoration=!0}get _strokeStyle(){const e=this.strokeColor;return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`}get _strokeBackgroundStyle(){const e=this.strokeDashColor;return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`}get _fillStyle(){const e=this.fillColor;return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`}get _renderCoordinates(){const e=[];if(!this.coordinates)return{coordinates:e,rect:Re};const i=bt(ft(wt(Re),this.coordinates),2*this.strokeWidth);i[0]=Math.floor(i[0]),i[1]=Math.floor(i[1]),i[2]=Math.ceil(i[2]+.5),i[3]=Math.ceil(i[3]+.5);for(const s of this.coordinates)e.push([Math.floor(s[0]-i[0])+.5,Math.floor(s[1]-i[1])+.5]);return e.reverse(),{coordinates:e,rect:i}}render(){const{coordinates:e,rect:i}=this._renderCoordinates,s=Tt(i),n=Mt(i);return d("div",{classes:{"esri-outline-overlay-item":!0},styles:{left:i[0]+"px",top:i[1]+"px",width:s+"px",height:n+"px",visibility:this.visible?"visible":"hidden"}},d("svg",{height:n,styles:{display:"block"},width:s},d("polygon",{fill:this._fillStyle,points:e.map(([r,a])=>`${r},${a}`).join(" "),stroke:this._strokeBackgroundStyle,"stroke-width":this.strokeWidth}),d("polygon",{fill:"transparent",points:e.map(([r,a])=>`${r},${a}`).join(" "),stroke:this._strokeStyle,"stroke-dasharray":this.strokeDash.length?this.strokeDash.join(" "):void 0,"stroke-width":this.strokeWidth})))}renderCanvas(){}};o([l()],O.prototype,"coordinates",void 0),o([l()],O.prototype,"strokeDash",void 0),o([l()],O.prototype,"strokeWidth",void 0),o([l()],O.prototype,"strokeColor",void 0),o([l()],O.prototype,"strokeDashColor",void 0),o([l()],O.prototype,"fillColor",void 0),o([l()],O.prototype,"visible",void 0),o([l()],O.prototype,"isDecoration",void 0),o([l({readOnly:!0})],O.prototype,"_strokeStyle",null),o([l({readOnly:!0})],O.prototype,"_strokeBackgroundStyle",null),o([l({readOnly:!0})],O.prototype,"_fillStyle",null),o([l({readOnly:!0})],O.prototype,"_renderCoordinates",null),O=o([_("esri.views.overlay.OutlineOverlayItem")],O);const li=O;let k=class extends Le.EventedMixin(Zt){constructor(e){super(e),this._overlayItem=void 0,this.geometryType=null,this.mode=null,this.type="draw-screen"}initialize(){this.drawOperation=this._makeDrawOperation();const e=i=>this.drawOperation.on(i,s=>{this._updateVisuals(),this.emit(i,s)});this.addHandles([e("vertex-add"),e("vertex-remove"),e("vertex-update"),e("cursor-update"),e("complete")]),this.finishToolCreation()}destroy(){this.drawOperation=ne(this.drawOperation),this._set("view",null)}get canRedo(){return this.drawOperation.canRedo}get canUndo(){return this.drawOperation.canUndo}set centeredToggled(e){this._set("centeredToggled",e),this._updateVisuals()}set enabled(e){this.drawOperation.interactive=e,this._set("enabled",e)}set uniformSizeToggled(e){this._set("uniformSizeToggled",e),this._updateVisuals()}get updating(){return this.drawOperation?.updating??!1}get cursor(){return this.geometryType==="point"?"default":"crosshair"}completeCreateOperation(){this.drawOperation.complete()}onInputEvent(e){this.destroyed||this.drawOperation.onInputEvent(e)}redo(){this.drawOperation.redo()}undo(){this.drawOperation.undo()}reset(){}_makeDrawOperation(){const{view:e}=this;return new Gt({view:e,manipulators:this.manipulators,geometryType:ni(this.geometryType),drawingMode:this.mode,hasZ:!1,defaultZ:0,snapToSceneEnabled:!1,drawSurface:new We,hasM:!1,snappingManager:null,snappingVisualizer:null,graphic:null,cursor:this.cursor})}get coordinates(){const{drawOperation:e}=this;if(!e?.geometryIncludingUncommittedVertices.length)return[];const{coordinateHelper:i}=e,s=e.committableVertex,n=e.committedVertices.slice();s!=null&&n.push(i.pointToArray(s));const r=n.length;switch(this.geometryType){case"circle":case"rectangle":{const a=new Wt(Lt,We.spatialReference),c=this.geometryType==="circle"?Ut:Kt,p=this.geometryType==="circle"?jt:qt;if(r===1&&e.isCompleted){const u=n[0],y=a.makeMapPoint(u[0]+ri,u[1]);return c([u,y],a,!0)?.geometry.rings[0]??[]}if(r===2){const u=this.geometryType!=="rectangle",y=this.centeredToggled!==u,m=this.geometryType!=="rectangle";return(this.uniformSizeToggled!==m?c(n,a,y)?.geometry.rings[0]:p(n,a,y)?.geometry.rings[0])??[]}return[]}}return n}_updateVisuals(){if(!this._overlayItem){const e=new li({strokeDash:[5],strokeDashColor:[255,255,255,255]});this.view.overlay?.addItem(e),this.addHandles(Ye(()=>{this.view.overlay?.removeItem(e),e?.destroy(),this._overlayItem=void 0})),this._overlayItem=e}this._overlayItem.coordinates=this.coordinates}onDeactivate(){this.drawOperation.isCompleted||this.drawOperation.cancel()}};function ni(t){switch(t){case"polygon":case"point":return t;case"circle":case"rectangle":return"segment"}}o([l({value:!1})],k.prototype,"centeredToggled",null),o([l()],k.prototype,"drawOperation",void 0),o([l({value:!0})],k.prototype,"enabled",null),o([l({value:!1})],k.prototype,"uniformSizeToggled",null),o([l({constructOnly:!0})],k.prototype,"geometryType",void 0),o([l({constructOnly:!0})],k.prototype,"mode",void 0),o([l({readOnly:!0})],k.prototype,"type",void 0),o([l({readOnly:!0})],k.prototype,"updating",null),o([l({constructOnly:!0,nonNullable:!0})],k.prototype,"view",void 0),o([l()],k.prototype,"cursor",null),k=o([_("esri.views.draw.DrawScreenTool")],k);const ri=48;async function ai(){return g(()=>import("./geometryEngineJSON-oRyFp_Dn.js").then(t=>t.g),__vite__mapDeps([5,6,7,8]))}async function di(){return ai().then(({contains:t,intersects:e,overlaps:i,simplify:s})=>({contains:t,intersects:e,overlaps:i,simplify:s}))}async function ci(t){const{currentSelection:e,selector:i,signal:s,sources:n,view:r}=t;if(!n?.length)return{added:[],removed:[]};const{layers:a,layerViews:c,graphicsLayers:p}=gi(n),u=(await Ie(Promise.all([ui(i,a,r,s),hi(i,c,r,s),pi(i,p,r)]),s)).flat();if(!e)return{added:u,removed:[]};const y=e.toArray(),m=u.filter(S=>!qe(y,S)),T=y.filter(S=>!qe(u,S));return e.removeMany(T),e.addMany(m),{added:m,removed:T}}const pi=async(t,e,i)=>_i({candidates:e.flatMap(s=>s.graphics.toArray())??[],selector:t,view:i}),ui=async(t,e,i,s)=>{const n=await ue(vi({selector:t,signal:s,layers:e,view:i}));return n?ct(n):[]},hi=async(t,e,i,s)=>{const n=await ue(yi({selector:t,signal:s,layerViews:e,view:i}));return n?ct(n):[]};function ct(t){const e=[];for(let i=0;i<t.length;i++){const s=t[i];s.status==="fulfilled"&&e.push(...s.value)}return e}function gi(t){const e=[],i=[],s=[];return t.forEach(n=>{Ct(n)?e.push(n):(Je(n)||et(n))&&n.layers?.length?e.push(...n.layers.toArray()):Ot(n)&&n.sublayers?.length?s.push(...n.sublayers.toArray()):St(n)?s.push(n):fe(n)&&i.push(n)}),{layers:e,layerViews:i,graphicsLayers:s}}function qe(t,e){if(t.includes(e))return!0;const i=e.getObjectId(),s=i!=null,{layer:n,uid:r}=e;return s?t.some(a=>{if(n===a.layer)return i===a.getObjectId()}):t.some(a=>{if(n===a.layer)return r===a.uid})}async function yi(t){const{layerViews:e,selector:i,signal:s,view:n}=t;return Ie(Promise.allSettled(e.map(async r=>{const a=r.createQuery(),{geometry:c}=pt(i,r.layer,n);return a.outFields=["*"],a.geometry=c,a.returnGeometry=!0,a.outSpatialReference=n.spatialReference,r.queryFeatures(a,{signal:s}).then(({features:p})=>p)})),s)}async function vi(t){const{layers:e,selector:i,signal:s,view:n}=t;return Ie(Promise.allSettled(e.map(async r=>r.queryFeatures(mi(r.createQuery(),i,r,n),{signal:s}).then(({features:a})=>a))),s)}function pt(t,e,i){const s="renderer"in e?Xt({renderer:e.renderer}):0,n=t.type==="point"?Yt(t,s,i):t,r="displayField"in e?e.displayField:null,a=kt({displayField:r,fields:e.fields}),c=[e.objectIdField];if(a!=null&&e.fieldsIndex.has(a)&&c.push(a),"globalIdField"in e&&e.globalIdField!=null&&e.fieldsIndex.has(e.globalIdField)&&c.push(e.fieldsIndex.get(e.globalIdField).name),He(e)&&e.subtypeField!=null&&e.fieldsIndex.has(e.subtypeField)&&c.push(e.fieldsIndex.get(e.subtypeField).name),"utilityNetworks"in i.map&&i.map.utilityNetworks?.length&&(He(e)||e.type==="feature")){const p=e.fieldsIndex.get("assetgroup"),u=e.fieldsIndex.get("assettype");p?.name&&c.push(p.name),u?.name&&c.push(u.name)}return{geometry:n,outFields:c}}function mi(t,e,i,s){const{outFields:n,geometry:r}=pt(e,i,s);return t.outFields=n,t.geometry=r,t.returnGeometry=!0,t.outSpatialReference=s.spatialReference,t}async function _i(t){const{selector:e,candidates:i,view:s}=t;if(!i?.length||!e)return[];const{spatialReference:n}=s,r=e,a=await di();return i.filter(c=>c.geometry&&c.geometry.type!=="mesh"&&a.intersects(n,r,c.geometry))}const bi=100;let ie=class extends Le.EventedAccessor{constructor(e){super(e),this._processTask=null,this.options=null,this.selection=new U,this.sources=null,this._process=Et(async(i,s)=>{const{callback:n,selector:r,completed:a}=i,c=tt(async p=>{const{options:u,sources:y,selection:m,view:T}=this;if(!(!y?.length&&!T?.selectionManager.sources.length)&&T){if(r&&y!=null){const S=await ci({currentSelection:m,selector:r,signal:p,sources:y,view:T});a&&u?.persistSelection!==!1&&T.selectionManager?.updateSelection({current:m.toArray(),...S})}n&&n()}else m.removeAll()});return It(s,()=>c.abort()),this._processTask=c,c.promise},bi)}initialize(){this._setup()}cancel(){this.removeAllHandles(),this._processTask?.abort()}async _setup(){const{view:e}=this;if(await e.whenReady(),this.destroyed)return;const i=this.options,s=i?.createTool??"rectangle",n=i?.mode??(s==="polygon"?"click":"hybrid"),r=Symbol();this._tool=new k({view:e,mode:n,geometryType:s}),i?.selectOnComplete||this.addHandles(this._tool.on(["cursor-update","vertex-add","vertex-remove"],()=>ue(this._process({selector:this._selectionArea}))),r),this.addHandles([e.on("key-down",a=>{if(!a.repeat)switch(a.key){case ve.constraint:this._tool.uniformSizeToggled=!0,a.stopPropagation();break;case ve.center:this._tool.centeredToggled=!0,a.stopPropagation()}}),e.on("key-up",a=>{switch(a.key){case ve.constraint:this._tool.uniformSizeToggled=!1,a.stopPropagation();break;case ve.center:this._tool.centeredToggled=!1,a.stopPropagation()}}),this._tool.on("complete",async a=>{this.removeHandles(r);const c=()=>{this.removeAllHandles(),this.emit("complete",{aborted:a.aborted,selection:this.selection.toArray()})};a.aborted?(this.cancel(),this.selection.removeAll(),c()):await this._process({selector:this._selectionArea,callback:c,completed:!0})})],r),this.addHandles(Ye(()=>e.tools.remove(this._tool))),e.addAndActivateTool(this._tool)}get _selectionArea(){const e=At(),i=this._tool.coordinates,s=this.view.spatialReference,n=a=>{e.x=a[0],e.y=a[1];const{x:c,y:p}=this.view.toMap(e);return[c,p]};if(i.length===0)return;if(i.length===1||i.every(([a,c])=>a===i[0][0]&&c===i[0][1])){const[a,c]=n(i[0]);return new $t({x:a,y:c,spatialReference:s})}const r=i.map(n);if(r.length!==0)return Pt(r)||r.reverse(),new Vt({spatialReference:s,rings:[r]})}};o([l()],ie.prototype,"options",void 0),o([l({readOnly:!0})],ie.prototype,"selection",void 0),o([l()],ie.prototype,"sources",void 0),o([l({constructOnly:!0})],ie.prototype,"view",void 0),ie=o([_("esri.widgets.support.Selector2D.SelectionOperation")],ie);const fi=ie;let R=class extends Le.EventedAccessor{constructor(e){super(e),this._operationHandlesGroup=null,this.activeOperation=null,this.layerViewPreferenceEnabled=!0,this.sources=null}initialize(){this.addHandles([b(()=>this._sources,e=>{this.activeOperation&&(this.activeOperation.sources=e)})])}destroy(){this._operationHandlesGroup=he(this._operationHandlesGroup)}get _sources(){const{layerViewPreferenceEnabled:e,sources:i,view:s}=this;return s&&i?.length?i.flatMap(n=>{if(fe(n))return n;if(Je(n)||et(n)){const a=n.layers||[],c=a.map(p=>{const u=Ge(s,p)||void 0;return e&&fe(u)?u:p});return c.length?c.toArray():a.length?a.toArray():n}if(!e)return n;const r=Ge(s,n)||void 0;return fe(r)?r:n}):[]}get layers(){return Te(ge.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.sources}set layers(e){Te(ge.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.sources=e}get state(){const{_sources:e,view:i}=this,s=!e?.length&&!i?.selectionManager.sources.length;return this.activeOperation?"active":i?.ready&&!s?"ready":"disabled"}cancel(){this.state==="active"&&(this.activeOperation?.cancel(),this._set("activeOperation",null))}activate(e){const{_sources:i,state:s,view:n}=this,r=!i?.length&&!n?.selectionManager.sources.length;if(s==="disabled"||r||!this.view)return;s==="active"&&this.cancel();const a=new fi({view:this.view,sources:i,options:e});return this._operationHandlesGroup=$e([a.selection.on("change",c=>this.emit("selection-change",c)),a.once("complete",c=>this._onOperationComplete(c))]),this._set("activeOperation",a),a}_onOperationComplete(e){this._operationHandlesGroup=he(this._operationHandlesGroup),this._set("activeOperation",null),this.emit("complete",e)}};o([l()],R.prototype,"_sources",null),o([l({readOnly:!0})],R.prototype,"activeOperation",void 0),o([l()],R.prototype,"layers",null),o([l()],R.prototype,"layerViewPreferenceEnabled",void 0),o([l()],R.prototype,"sources",void 0),o([l({readOnly:!0})],R.prototype,"state",null),o([l()],R.prototype,"view",void 0),R=o([_("esri.widgets.support.SelectionToolbar.SelectionToolbarViewModel")],R);const wi=R,Qe={lassoTool:!0,rectangleTool:!0},Oe="esri-selection-toolbar",Se={base:Oe,container:`${Oe}__container`,toolButton:`${Oe}__tool-button`};let f=class extends W{constructor(t,e){super(t,e),this._viewModelHandlesGroup=null,this.activeToolInfo=null,this.defaultLassoToolOptions={createTool:"polygon",mode:"freehand"},this.defaultRectangleToolOptions={createTool:"rectangle"},this.messages=null,this.toolConfigs=[],this.viewModel=new wi,this.visibleElements={...Qe},this.scale="s",this.layout="horizontal",this._viewModelHandlesGroup=$e([this.viewModel.on("complete",i=>{this._set("activeToolInfo",null),this.emit("complete",i)})])}destroy(){this._viewModelHandlesGroup=he(this._viewModelHandlesGroup)}loadDependencies(){return J({action:()=>g(()=>import("./index-CzvLtnX1.js").then(t=>t.HN),[])})}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}get layers(){return Te(ge.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.viewModel.sources}set layers(t){Te(ge.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.viewModel.sources=t}get layerViewPreferenceEnabled(){return this.viewModel.layerViewPreferenceEnabled}set layerViewPreferenceEnabled(t){this.viewModel.layerViewPreferenceEnabled=t}get sources(){return this.viewModel.sources}set sources(t){this.viewModel.sources=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}castVisibleElements(t){return{...Qe,...t}}get state(){return this.viewModel.state}get visibleToolCount(){const{view:t,toolConfigs:e,visibleElements:i}=this;return(e?.length??0)+(t?.type==="2d"?(i.lassoTool?1:0)+(i.rectangleTool?1:0):0)}activate(t){if(this.cancel(),this.state!=="disabled")switch(t){case"lasso":this._activateTool("lasso");break;case"rectangle":this._activateTool("rectangle");break;default:this._activateTool(t)}}cancel(){this.viewModel.cancel(),this._set("activeToolInfo",null)}render(){return d("div",{"aria-label":this.label,class:this.classes(Se.base,Pe.widget)},d("div",{class:Se.container},this._renderDefaultTools(),this._renderCustomTools()))}_renderDefaultTools(){if(this.view?.type==="2d")return[this._renderRectangleTool(),this._renderLassoTool()]}_renderCustomTools(){if(this.toolConfigs?.length)return this.toolConfigs.map(({toolName:t,icon:e,toolKey:i})=>this._renderToolWithTooltip(t,i,e))}_renderLassoTool(){const{messages:t,visibleElements:e}=this;if(!e.lassoTool)return;const i=t.selectByLasso;return this._renderToolWithTooltip("lasso","lasso","lasso-select",i)}_renderRectangleTool(){const{messages:t,visibleElements:e}=this;if(!e.rectangleTool)return;const i=t.selectByRectangle;return this._renderToolWithTooltip("rectangle","rectangle","cursor-marquee",i)}_renderToolWithTooltip(t,e,i,s=t){const n=`${this.id}-tool-${e}`;return d("calcite-action",{active:this.activeToolInfo?.toolName===t,bind:this,class:Se.toolButton,disabled:this.state==="disabled",icon:i||"selection",id:n,key:n,onclick:()=>this._toggleTool(t),scale:this.scale,text:s,title:s})}_activateTool(t){const e=this._getToolOptions(t);if(!e)return;const i=this.viewModel.activate(e);i&&this._set("activeToolInfo",{toolName:t,operation:i})}_toggleTool(t){if(this.activeToolInfo){const e=this.activeToolInfo.toolName;if(this.cancel(),e===t)return}this._activateTool(t)}_getToolOptions(t){return t==="lasso"?this.defaultLassoToolOptions:t==="rectangle"?this.defaultRectangleToolOptions:this.toolConfigs.find(e=>e.toolName===t)}};o([l({readOnly:!0})],f.prototype,"activeToolInfo",void 0),o([l()],f.prototype,"defaultLassoToolOptions",void 0),o([l()],f.prototype,"defaultRectangleToolOptions",void 0),o([l()],f.prototype,"label",null),o([l()],f.prototype,"layers",null),o([l()],f.prototype,"layerViewPreferenceEnabled",null),o([l(),Y("esri/widgets/support/SelectionToolbar/t9n/SelectionToolbar")],f.prototype,"messages",void 0),o([l()],f.prototype,"sources",null),o([l()],f.prototype,"toolConfigs",void 0),o([l()],f.prototype,"view",null),o([l()],f.prototype,"viewModel",void 0),o([l()],f.prototype,"visibleElements",void 0),o([it("visibleElements")],f.prototype,"castVisibleElements",null),o([l()],f.prototype,"scale",void 0),o([l()],f.prototype,"state",null),o([l()],f.prototype,"layout",void 0),o([l()],f.prototype,"visibleToolCount",null),f=o([_("esri.widgets.support.SelectionToolbar")],f);const Ti=f,ut=()=>J({icon:()=>g(()=>import("./index-CzvLtnX1.js").then(t=>t.HH),[]),label:()=>g(()=>import("./index-C3aDryrg.js"),__vite__mapDeps([9,1])),switch:()=>g(()=>import("./index-B7j1IKNv.js"),__vite__mapDeps([10,1])),tooltip:()=>g(()=>import("./index-CkYd-Wtf.js"),__vite__mapDeps([11,1]))}),de="esri-labeled-switch",ce={label:`${de}__label`,labelContent:`${de}__label-content`,iconInfo:`${de}__icon_info`,iconWarning:`${de}__icon_warning`,tooltip:`${de}__tooltip`};function re({checked:t,disabled:e,hint:i,key:s,label:n,onChange:r,hintIcon:a,hintKind:c}){return d("calcite-label",{class:ce.label,disabled:e,key:s,layout:"inline-space-between",scale:"s"},i?d("div",{class:ce.labelContent,key:"label-content"},d("div",null,n),d("calcite-icon",{class:c!=="warning"?ce.iconInfo:ce.iconWarning,icon:a??"information",id:s,scale:"s",tabIndex:0}),d("calcite-tooltip",{class:ce.tooltip,overlayPositioning:"fixed",referenceElement:s},i)):n,d("calcite-switch",{checked:t,disabled:e,scale:"s",onCalciteSwitchChange:p=>r(p.currentTarget.checked)}))}let oe=class extends F{constructor(e){super(e),this.directionModePicker=!1,this.header=!1,this.labelsToggle=!0,this.tooltipsToggle=!0}};o([l({type:Boolean,nonNullable:!0})],oe.prototype,"directionModePicker",void 0),o([l({type:Boolean,nonNullable:!0})],oe.prototype,"header",void 0),o([l({type:Boolean,nonNullable:!0})],oe.prototype,"labelsToggle",void 0),o([l({type:Boolean,nonNullable:!0})],oe.prototype,"tooltipsToggle",void 0),oe=o([_("esri.widgets.support.SketchTooltipControls.VisibleElements")],oe);const Ae=oe,me="esri-sketch-tooltip-controls",_e={base:me,block:`${me}__block`,blockContent:`${me}__block-content`,radioButtonLabelWrapper:`${me}__radio-button-label-wrapper`};let Z=class extends W{constructor(e,i){super(e,i),this.viewModel=null,this.visibleElements=new Ae,this.sketchOptions=new st,this.viewType=void 0,this._onTooltipsEnabledChange=s=>{this.sketchOptions.tooltips.enabled=s},this._onLabelsEnabledChange=s=>{this.sketchOptions.labels.enabled=s},this._onDirectionModeChange=s=>{this.sketchOptions.values.directionMode=s.currentTarget.selectedItem.value}}loadDependencies(){return Promise.all([J({block:()=>g(()=>import("./index-BVkJef4X.js"),__vite__mapDeps([12,1])),label:()=>g(()=>import("./index-C3aDryrg.js"),__vite__mapDeps([9,1])),icon:()=>g(()=>import("./index-CzvLtnX1.js").then(e=>e.HH),[]),"radio-button":()=>g(()=>import("./index-qk8Z_tnM.js"),__vite__mapDeps([13,1])),"radio-button-group":()=>g(()=>import("./index-CofE4ubU.js"),__vite__mapDeps([14,1]))}),ut()])}render(){const{label:e,visibleElements:i}=this,s=this._renderContent();return d("div",{"aria-label":e,class:this.classes(_e.base,Pe.widget)},s?d("calcite-block",{class:_e.block,heading:i.header?this.label:"",key:"content-block",label:this.label,open:!0},d("div",{class:_e.blockContent,key:"content"},s)):void 0)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}_renderContent(){const{visibleElements:e,viewType:i}=this,s=[e.tooltipsToggle?this._renderTooltipsToggle():null,e.labelsToggle&&i!=="2d"?this._renderLabelsToggle():null,e.directionModePicker?this._renderDirectionModePicker():null].filter(X);return s.length===0?null:s}_renderTooltipsToggle(){const{messages:e,sketchOptions:i}=this;return d(re,{checked:i.tooltips.effectiveEnabled,hint:e.tooltipsToggleHint,key:`${this.id}__tooltips`,label:e.tooltipsToggle,onChange:this._onTooltipsEnabledChange})}_renderLabelsToggle(){const{messages:e,sketchOptions:i}=this;return d(re,{checked:i.labels.enabled,hint:e.labelsToggleHint,key:`${this.id}__labels`,label:e.labelsToggle,onChange:this._onLabelsEnabledChange})}_renderDirectionModePicker(){const{messages:e,sketchOptions:i}=this,{directionMode:s}=i.values;return d("calcite-label",{key:"direction-mode",layout:"default",scale:"s"},e.directionModePicker,d("calcite-radio-button-group",{key:"radio-button-group",layout:"horizontal",name:this.id,scale:"s",value:s,onCalciteRadioButtonGroupChange:this._onDirectionModeChange},this._renderDirectionModeOption("relative",s,e.directionModeRelative),this._renderDirectionModeOption("absolute",s,e.directionModeAbsolute)))}_renderDirectionModeOption(e,i,s){return d("calcite-label",{key:e,layout:"inline",scale:"s"},d("calcite-radio-button",{checked:e===i,scale:"s",value:e}),d("div",{class:_e.radioButtonLabelWrapper,key:"label-wrapper"},d("calcite-icon",{icon:Qt[e],scale:"s"}),s))}};o([l()],Z.prototype,"label",null),o([l({type:Ae,nonNullable:!0})],Z.prototype,"visibleElements",void 0),o([l(),Y("esri/widgets/support/SketchTooltipControls/t9n/SketchTooltipControls")],Z.prototype,"messages",void 0),o([l({nonNullable:!0,type:st})],Z.prototype,"sketchOptions",void 0),o([l({type:String})],Z.prototype,"viewType",void 0),Z=o([_("esri.widgets.support.SketchTooltipControls")],Z);const Mi=Z,Li={hide:"hide"};function Me(t){return t?.listMode??void 0}function Ci(t){return t!=null&&"minScale"in t&&t.minScale!=null?t.minScale:void 0}function Oi(t){return t!=null&&"maxScale"in t&&t.maxScale!=null?t.maxScale:void 0}function Si(t){if(!t)return"inherited";const e=Ei(gt(t)?t.layer:t);return e!=null?e?"independent":"inherited":"visibilityMode"in t&&t.visibilityMode!=null?t.visibilityMode:"independent"}function ht(t){if(t&&(!("type"in t)||t.type!=="wmts"))return"sublayers"in t?"sublayers":"layers"in t?"layers":void 0}function Be(t){return Me(t)!==Li.hide}function ki(t,e){if(!t||e==null||isNaN(e))return!1;const i=Ci(t),s=Oi(t),n=i!=null&&!isNaN(i)&&i>0&&e>i,r=s!=null&&!isNaN(s)&&s>0&&e<s;return n||r}function Ze(t){const e=t?.layer;return e&&"layers"in e?e.layers:null}function gt(t){return t!=null&&"layer"in t&&t.layer!=null}function Ei(t){const e=Ii(t);return e!=null&&"supportsSublayerVisibility"in e?e.supportsSublayerVisibility:void 0}function Ii(t){return t&&"capabilities"in t&&t.capabilities!=null&&"exportMap"in t.capabilities?t.capabilities.exportMap:void 0}let M=class extends ot.IdentifiableMixin(W){constructor(e,i){super(e,i),this._legend=null,this.className=null,this.content=null,this.flowEnabled=!1,this.image=null,this.listItem=null,this.open=!1,this.visible=!0}initialize(){this.addHandles([b(()=>this._canCreateLegend,()=>this._createLegend(),P),b(()=>[this._legend,this._legendOptions],()=>this._updateLegend(),P)])}destroy(){this._legend=ne(this._legend)}get _canCreateLegend(){const{content:e,listItem:i}=this;if(!i)return!1;const s="legend";return e===s||e!=null&&!!Array.isArray(e)&&e.includes(s)}get _legendOptions(){const{listItem:e,_legendLayerInfo:i}=this,s=e?.view;return i&&s?{view:s,layerInfos:[i]}:{}}get _legendLayerInfo(){const e=this.listItem?.layer;if(!e||e.type==="subtype-sublayer")return null;const i=gt(e)?e:null,s=e?.parent,n=s!=null&&"type"in s&&s.type==="map-image"?i?.source:null,r="";return n&&s?{layer:s,title:r,sublayerIds:[n.mapLayerId]}:{layer:e,title:r}}get disabled(){const{listItem:e,_legend:i,content:s}=this;return!e||!(Array.isArray(s)&&s.length>1)&&!!i&&(!i.activeLayerInfos?.length||!e.visibleAtCurrentScale||!e.visible)}set disabled(e){this._overrideIfSome("disabled",e)}get icon(){const{image:e}=this,i=this._getFirstWidget();return this._get("icon")??(!e&&i?i.icon:null)}set icon(e){this._overrideIfSome("icon",e)}get title(){return this._get("title")||(this._getFirstWidget()?.label??"")}set title(e){this._override("title",e)}render(){return d("div",{class:"esri-list-item-panel"},this._renderContents())}_renderContent(e){const{_legend:i,disabled:s,open:n}=this;return e&&!s&&n?e==="legend"&&i?d("div",{key:"legend-widget"},i.render()):typeof e=="string"?d("div",{innerHTML:e,key:e}):Ne(e)?d("div",{key:"content-widget"},e.render()):e instanceof HTMLElement?d("div",{afterCreate:this._attachToNode,bind:e,key:"content-element"}):null:null}_renderContents(){const{content:e,open:i}=this;return i?Array.isArray(e)?e.map(s=>this._renderContent(s)):this._renderContent(e):null}async _createLegend(){if(ne(this._legend),this._legend=null,!this._canCreateLegend)return;const{default:e}=await g(()=>import("./Legend-LPXE2ZAi.js"),__vite__mapDeps([15,1,16,17,18,19,20,21,22,23,24,25,26,27,28,29])),i=new e(this._legendOptions);this._legend=i}_attachToNode(e){e.appendChild(this)}_updateLegend(){const e=this._legend;e&&e.set(this._legendOptions)}_getWidget(e){return e==="legend"?this._legend:Ne(e)?e:null}_getFirstWidget(){const{content:e}=this;return Array.isArray(e)?e.map(i=>this._getWidget(i)).find(i=>i):this._getWidget(e)}};o([l()],M.prototype,"_legend",void 0),o([l()],M.prototype,"_canCreateLegend",null),o([l()],M.prototype,"_legendOptions",null),o([l()],M.prototype,"_legendLayerInfo",null),o([l()],M.prototype,"className",void 0),o([l()],M.prototype,"content",void 0),o([l()],M.prototype,"disabled",null),o([l()],M.prototype,"flowEnabled",void 0),o([l()],M.prototype,"icon",null),o([l()],M.prototype,"image",void 0),o([l()],M.prototype,"listItem",void 0),o([l()],M.prototype,"open",void 0),o([l()],M.prototype,"title",null),o([l()],M.prototype,"visible",void 0),M=o([_("esri.widgets.LayerList.ListItemPanel")],M);const yt=M;var pe;const $i=U.ofType({key:"type",defaultKeyValue:"button",base:Dt,typeMap:{button:xt,toggle:Bt}}),vt=U.ofType($i),ke="layer",be="child-list-mode",Pi="hide";let v=pe=class extends ot.IdentifiableMixin(F){constructor(t){super(t),this.actionsSections=new vt,this.actionsOpen=!1,this.checkPublishStatusEnabled=!1,this.children=new(U.ofType(pe)),this.childrenSortable=!0,this.hidden=!1,this.layer=null,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.open=!1,this.panel=null,this.parent=null,this.view=null}initialize(){if(this.addHandles([b(()=>[this.layer,this.layer?.listMode,this.listModeDisabled],()=>this._watchLayerProperties(this.layer),P),b(()=>this.checkPublishStatusEnabled,t=>this._updateChildrenPublishing(t),P),b(()=>this.view,t=>this._updateChildrenView(t),P),b(()=>this.panel,t=>this._setListItemOnPanel(t),P)]),typeof this.listItemCreatedFunction=="function"){const t={item:this};this.listItemCreatedFunction.call(null,t)}}destroy(){this.panel?.destroy(),this.children.destroyAll(),this.view=null}get connectionStatus(){const{layerView:t,publishing:e}=this;if(!e&&t&&"connectionStatus"in t)return t.connectionStatus}get error(){return this.layer?.loadError}get incompatible(){const{layerView:t}=this;return!(!t||!("spatialReferenceSupported"in t))&&!t.spatialReferenceSupported}get layerView(){const{layer:t,view:e}=this;if(!t||!e||t.type==="sublayer")return null;const i=t.type==="subtype-sublayer"?t.parent:t;return e.allLayerViews.find(s=>s.layer===i)??null}castPanel(t){return this.panel?.open&&!t.hasOwnProperty("open")&&(t.open=!0),t?new yt(t):null}get sortable(){return this.layer?.type!=="knowledge-graph-sublayer"&&this._get("sortable")}set sortable(t){this._set("sortable",t)}get title(){const t=ye(this,"layer.layer");return(!t||t&&ye(this,"layer.layer.loaded"))&&ye(this,"layer.title")||ye(this,"layer.attributes.title")||""}set title(t){this._override("title",t)}get publishing(){const{layer:t,checkPublishStatusEnabled:e}=this;return!!(e&&t&&"publishingInfo"in t&&t.publishingInfo?.status==="publishing")}get updating(){const{layerView:t,connectionStatus:e,layer:i,publishing:s}=this;return!s&&!e&&(t?t.updating:i?.loadStatus==="loading"||!1)}get visible(){return!!this.layer?.visible}set visible(t){const e=this.layer;e&&(e.visible=t)}get visibleAtCurrentScale(){return this.layerView?.visibleAtCurrentScale??!ki(this.layer,this.view?.scale)}get visibleAtCurrentTimeExtent(){return this.layerView?.visibleAtCurrentTimeExtent??!0}get visibilityMode(){return Si(this.layer)}clone(){return new pe({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),childrenSortable:this.childrenSortable,hidden:this.hidden,layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,open:this.open,panel:this.panel,parent:this.parent,sortable:this.sortable,title:this.title,view:this.view,visible:this.visible})}_setListItemOnPanel(t){t&&(t.listItem=this)}_updateChildrenPublishing(t){this.children?.forEach(e=>e.checkPublishStatusEnabled=t)}_updateChildrenView(t){const e=this.children;e&&e.forEach(i=>i.view=t)}_createChildren(t){const{listModeDisabled:e,children:i}=this,s=t.filter(n=>!i.some(r=>r.layer===n));i.addMany(this._createChildItems(s,e))}_destroyChildren(t){const{children:e}=this,i=e.filter(s=>!!s.layer&&!t.includes(s.layer));e.destroyMany(i)}_sortChildren(t){this.children.sort((e,i)=>t.indexOf(i.layer)-t.indexOf(e.layer))}_destroyAllChildren(){this.removeHandles(be),this.children.destroyAll()}_watchChildLayerListMode(t){this.removeHandles(be),this.listModeDisabled||this.addHandles(t.toArray().map(e=>b(()=>e.listMode,()=>this._compileChildren(t))),be)}_compileChildren(t){const e=this.listModeDisabled?t:t?.filter(i=>Me(i)!==Pi);t?.length?(this._createChildren(e),this._destroyChildren(e),this._sortChildren(e),this._watchChildLayerListMode(t)):this._destroyAllChildren()}_watchSublayerChanges(t){t&&this.addHandles(t.on("change",()=>this._compileChildren(t)),ke)}_initializeChildLayers(t){this._compileChildren(t),this._watchSublayerChanges(t)}_createChildItems(t,e){return t.reverse().map(i=>e||Be(i)?new pe({layer:i,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,parent:this,view:this.view}):null).filter(X)}_watchLayerProperties(t){if(this.removeHandles(ke),this.removeHandles(be),!t)return;if((!this.listModeDisabled&&Me(t))==="hide-children")return void this.children.destroyAll();const e=ht(t);e&&this.addHandles(b(()=>t[e],i=>{t.hasOwnProperty(e)&&this._initializeChildLayers(i)},P),ke)}};o([l({type:vt})],v.prototype,"actionsSections",void 0),o([l()],v.prototype,"actionsOpen",void 0),o([l()],v.prototype,"checkPublishStatusEnabled",void 0),o([l({type:U.ofType(v)})],v.prototype,"children",void 0),o([l()],v.prototype,"childrenSortable",void 0),o([l({readOnly:!0})],v.prototype,"connectionStatus",null),o([l({readOnly:!0})],v.prototype,"error",null),o([l()],v.prototype,"hidden",void 0),o([l({readOnly:!0})],v.prototype,"incompatible",null),o([l()],v.prototype,"layer",void 0),o([l({readOnly:!0})],v.prototype,"layerView",null),o([l()],v.prototype,"listItemCreatedFunction",void 0),o([l({nonNullable:!0})],v.prototype,"listModeDisabled",void 0),o([l()],v.prototype,"open",void 0),o([l({type:yt})],v.prototype,"panel",void 0),o([it("panel")],v.prototype,"castPanel",null),o([l()],v.prototype,"parent",void 0),o([l({value:!0})],v.prototype,"sortable",null),o([l()],v.prototype,"title",null),o([l({readOnly:!0})],v.prototype,"publishing",null),o([l({readOnly:!0})],v.prototype,"updating",null),o([l()],v.prototype,"view",void 0),o([l()],v.prototype,"visible",null),o([l({readOnly:!0})],v.prototype,"visibleAtCurrentScale",null),o([l({readOnly:!0})],v.prototype,"visibleAtCurrentTimeExtent",null),o([l({readOnly:!0})],v.prototype,"visibilityMode",null),v=pe=o([_("esri.widgets.LayerList.ListItem")],v);const xe=v,B={view:"view",viewLayers:"view-layers",mapLayers:"map-layers",layerViews:"layer-views",layerListMode:"layer-list-mode"},Vi="hide",mt=U.ofType(xe);let H=class extends Le.EventedAccessor{constructor(e){super(e),this.checkPublishStatusEnabled=!1,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.operationalItems=new mt,this.view=null}initialize(){this.addHandles([b(()=>this.view?.ready===!0,()=>this._viewHandles(),P),b(()=>[this.listItemCreatedFunction,this.checkPublishStatusEnabled,this.listModeDisabled],()=>this._recompileList()),b(()=>Fe(this.view)?this.view.inGeographicLayout:null,()=>this._compileList())],B.view)}destroy(){this._removeAllItems(),this.view=null}get state(){const{view:e}=this;return e?.ready?"ready":e?"loading":"disabled"}get totalItems(){return this.operationalItems.flatten(e=>e.children).length}triggerAction(e,i){e&&!e.disabled&&this.emit("trigger-action",{action:e,item:i})}moveListItem(e,i,s,n){const r=e?.layer;if(!r||r.type==="subtype-sublayer"||r.type==="sublayer")return;const a=this.view?.map?.layers,c=i?Ze(i):a,p=s?Ze(s):a;if(!c||!p)return;const{operationalItems:u}=this,y=i?.children||u,m=s?.children||u,T=p.length-n;e.parent=s||null,y.remove(e),c.remove(r),m.includes(e)||m.add(e,T),p.includes(r)||p.add(r,T),this._compileList()}_createLayerViewHandles(e){this.removeHandles(B.layerViews),this._compileList(),e&&this.addHandles(e.on("change",()=>this._compileList()),B.layerViews)}_createMapLayerHandles(e){this.removeHandles(B.mapLayers),this._compileList(),e&&this.addHandles(e.on("change",()=>this._compileList()),B.mapLayers)}_createListItem(e){const{view:i,listItemCreatedFunction:s,checkPublishStatusEnabled:n,listModeDisabled:r}=this;return new xe({checkPublishStatusEnabled:n,listModeDisabled:r,layer:e,listItemCreatedFunction:s,view:i})}_removeAllItems(){this.operationalItems.destroyAll()}_getViewableLayers(e){return e?this.listModeDisabled?e:e.filter(i=>Me(i)!==Vi):void 0}_watchLayersListMode(e){this.removeHandles(B.layerListMode),e&&!this.listModeDisabled&&this.addHandles(b(()=>e.filter(i=>"listMode"in i).map(i=>i.listMode).toArray(),()=>this._compileList()),B.layerListMode)}_compileList(){const e=this.view?.map?.layers,i=Fe(this.view)&&!this.view.inGeographicLayout?e?.filter(({type:n})=>n==="link-chart"):e;this._watchLayersListMode(i);const s=this._getViewableLayers(i);s?.length?(this._createNewItems(s),this._removeItems(s),this._sortItems(s)):this._removeAllItems()}_createNewItems(e){const{operationalItems:i}=this;e.forEach(s=>{i.some(n=>n.layer===s)||i.add(this._createListItem(s))})}_removeItems(e){const{operationalItems:i}=this,s=[];i.forEach(n=>{n&&e&&e.includes(n.layer)||s.push(n)}),i.destroyMany(s)}_sortItems(e){const{operationalItems:i}=this;i.sort((s,n)=>{const r=e.indexOf(s.layer),a=e.indexOf(n.layer);return r>a?-1:r<a?1:0})}_recompileList(){this._removeAllItems(),this._compileList()}_viewHandles(){const{view:e}=this;this.removeHandles([B.mapLayers,B.layerViews,B.viewLayers]),e?.ready?this.addHandles([b(()=>this.view?.map?.allLayers,i=>this._createMapLayerHandles(i),P),b(()=>this.view?.allLayerViews,i=>this._createLayerViewHandles(i),P)],B.viewLayers):this._removeAllItems()}};o([l()],H.prototype,"checkPublishStatusEnabled",void 0),o([l()],H.prototype,"listItemCreatedFunction",void 0),o([l({nonNullable:!0})],H.prototype,"listModeDisabled",void 0),o([l({type:mt})],H.prototype,"operationalItems",void 0),o([l({readOnly:!0})],H.prototype,"state",null),o([l()],H.prototype,"totalItems",null),o([l()],H.prototype,"view",void 0),H=o([_("esri.widgets.LayerList.LayerListViewModel")],H);const Ai=H,De=t=>Bi(t)||xi(t),Bi=t=>{if(!("type"in t))return!1;switch(t.type){case"feature":case"geojson":case"csv":case"graphics":case"wfs":case"map-notes":case"oriented-imagery":case"scene":case"building-scene":case"subtype-sublayer":return!0;default:return!1}},xi=t=>{const e=ht(t);if(e!=null&&t.hasOwnProperty(e)&&t[e]!=null){for(const i of t[e])if(De(i))return!0}return!1},we=(t,e)=>e!=null&&t!=null&&(e.test(t.title)?"self":!!t.children.some(i=>we(i,e)!==!1)&&"children");var Ee;let G=Ee=class extends xe{constructor(t){super(t),this.children=new U,this.parent=null}get enabled(){const{children:t}=this;if(t.length===0)return this.featureSource!=null&&this.featureSource.enabled?"enabled":"disabled";let e=!1,i=!1;for(const s of t){if(s.enabled==="indeterminate")return s.enabled;if(s.enabled==="enabled"?e=!0:s.enabled==="disabled"&&(i=!0),i&&e)return"indeterminate"}return i?"disabled":"enabled"}get childLayerIds(){return this.children.toArray().flatMap(t=>[t.layer?.id,...t.childLayerIds])}get featureSource(){const{layer:t,getFeatureSnappingSources:e}=this;return e().find(i=>i.layer===t)}_initializeChildLayers(t){if(!t)return;const e=t.filter(De);super._initializeChildLayers(e)}_createChildItems(t){return t.map(e=>Be(e)?new Ee({layer:e,parent:this,view:this.view,getFeatureSnappingSources:this.getFeatureSnappingSources}):null).filter(X).reverse()}};o([l()],G.prototype,"enabled",null),o([l()],G.prototype,"children",void 0),o([l()],G.prototype,"childLayerIds",null),o([l()],G.prototype,"featureSource",null),o([l({constructOnly:!0})],G.prototype,"getFeatureSnappingSources",void 0),o([l()],G.prototype,"parent",void 0),G=Ee=o([_("esri.widgets.support.SnappingControls.SnappingListItem")],G);let se=class extends Ai{constructor(){super(...arguments),this.featureSnappingSources=new U}get operationalItemsFlat(){return this.operationalItems.flatten(t=>t.children)}get selectableItems(){return this.operationalItemsFlat.filter(t=>!t.children?.length)}_compileList(){const t=this.view?.map?.layers;if(!t)return;const e=t.filter(De);this._watchLayersListMode(e);const i=this._getViewableLayers(e);i?.length?(this._createNewItems(i),this._removeItems(i),this._sortItems(i)):this._removeAllItems()}_createListItem(t){return new G({layer:t,view:this.view,getFeatureSnappingSources:()=>this.featureSnappingSources})}};o([l()],se.prototype,"featureSnappingSources",void 0),o([l()],se.prototype,"operationalItems",void 0),o([l()],se.prototype,"operationalItemsFlat",null),o([l()],se.prototype,"selectableItems",null),se=o([_("esri.widgets.support.SnappingControls.SnappingLayerListViewModel")],se);let N=class extends F{constructor(t){super(t),this.layerListViewModel=new se,this.snappingOptions=new nt,this.view=null}initialize(){this.addHandles([b(()=>({viewModel:this.layerListViewModel,view:this.view}),({viewModel:t,view:e})=>{t.view=e},P),b(()=>({viewModel:this.layerListViewModel,sources:this.snappingOptions?.featureSources}),({viewModel:t,sources:e})=>{t.featureSnappingSources=e},P)])}get allLayersEnabled(){return(this.layerListViewModel?.selectableItems??[]).every(t=>t.enabled==="enabled")}get allLayersDisabled(){return(this.layerListViewModel?.selectableItems??[]).every(t=>!t.enabled)}get layersEnabledCount(){return this.layerListViewModel?.selectableItems?.filter(t=>t.enabled==="enabled").length??0}get state(){return this.snappingOptions?"ready":"disabled"}toggleSnappingForLayers(t,e){t?.forEach(i=>e?this.enableSnappingForLayer(i):this.disableSnappingForLayer(i))}toggleSnappingForAllLayers(t){this.layerListViewModel.selectableItems.forEach(({layer:e})=>{const i=e?.id;t?this.enableSnappingForLayer(i):this.disableSnappingForLayer(i)})}enableSnappingForLayer(t){const e=this._findSnappingSourceForLayer(t)??this._makeSnappingSourceForLayer(t);e&&(e.enabled=!0)}disableSnappingForLayer(t){const e=this._findSnappingSourceForLayer(t);e&&(e.enabled=!1)}updateEnabledFeatureSources(t){for(const e of this.snappingOptions.featureSources)Be(e.layer)&&(e.enabled=t.includes(e.layer.id))}_findSnappingSourceForLayer(t){return this.snappingOptions.featureSources.find(e=>e.layer.id===t)}_makeSnappingSourceForLayer(t){const e=this.layerListViewModel.operationalItemsFlat.find(s=>s.layer?.id===t)?.layer;if(!e)throw new Rt("snapping-controls:layer-not-found",`cannot enable snapping for layer with id ${t} because no such layer was found in the view`);if(e.type==="group")return;const i=new Jt({layer:e});return this.snappingOptions.featureSources.add(i),i}};o([l()],N.prototype,"allLayersEnabled",null),o([l()],N.prototype,"allLayersDisabled",null),o([l({constructOnly:!0})],N.prototype,"layerListViewModel",void 0),o([l()],N.prototype,"layersEnabledCount",null),o([l({type:nt,nonNullable:!0})],N.prototype,"snappingOptions",void 0),o([l()],N.prototype,"state",null),o([l()],N.prototype,"view",void 0),N=o([_("esri.widgets.support.SnappingControls.SnappingControlsViewModel")],N);const Di=N,D="esri-snapping-controls",x={base:D,container:`${D}__container`,toggleBlock:`${D}__toggle-block`,layerListBlock:`${D}__layer-list-block`,layerList:`${D}__layer-list`,layerListFilter:`${D}__layer-list__filter`,layerListButton:`${D}__layer-list__button`,layerListItem:`${D}__layer-list__item`,layerListGroup:`${D}__layer-list__group`,nestedContainer:`${D}__nested-container`};let w=class extends W{constructor(t,e){super(t,e),this._defaultViewModel=null,this._layerListFilter=null,this._gridLoadTask=null,this.layerListOpen=!0,this.gridOptionsOpen=!1,this.messages=null,this.messagesCommon=null,this.snappingManager=null,this.visibleElements=new Ce,this._enableSnappingSwitchChange=r=>{this.snappingOptions.enabled=r},this._featureEnabledSwitchChange=r=>{this.snappingOptions.featureEnabled=r},this._gridEnabledSwitchChange=r=>{this.snappingOptions.gridEnabled=r,r&&this._startLoadGrid()},this._selfEnabledSwitchChange=r=>{this.snappingOptions.selfEnabled=r},this._onToggleLayersButtonClick=r=>{this.viewModel.toggleSnappingForAllLayers(!this.viewModel.allLayersEnabled),Ht(r.target)};const{snappingOptions:i,view:s,viewModel:n}=t;this.viewModel=n??(this._defaultViewModel=new Di({snappingOptions:i,view:s}))}normalizeCtorArgs(t){const{snappingOptions:e,view:i,viewModel:s,...n}=t;return n}destroy(){this.viewModel!==this._defaultViewModel&&(this._defaultViewModel=ne(this._defaultViewModel))}loadDependencies(){return Promise.all([J({block:()=>g(()=>import("./index-BVkJef4X.js"),__vite__mapDeps([12,1])),button:()=>g(()=>import("./index-CzvLtnX1.js").then(t=>t.HI),[]),input:()=>g(()=>import("./index-CzvLtnX1.js").then(t=>t.HK),[]),list:()=>g(()=>import("./index-CzvLtnX1.js").then(t=>t.HL),[]),"list-item":()=>g(()=>import("./index-CzvLtnX1.js").then(t=>t.HQ),[]),checkbox:()=>g(()=>import("./index-re5hGMlJ.js"),__vite__mapDeps([30,1])),loader:()=>g(()=>import("./index-CzvLtnX1.js").then(t=>t.HG),[])}),ut()])}initialize(){this.addHandles(b(()=>this.view?.type==="2d"&&!!this.view.grid,t=>{this.visibleElements.gridControls&&(this.snappingOptions.gridEnabled=t)}))}get _openAndReady(){return this.gridOptionsOpen&&this.snappingOptions.gridEnabled&&this.snappingOptions.enabled}get icon(){return"snap-to-point"}set icon(t){this._overrideIfSome("icon",t)}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(t){this.viewModel.snappingOptions=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}set viewModel(t){t!==this._get("viewModel")&&(this._defaultViewModel!=null&&this._defaultViewModel===t||(this._defaultViewModel=ne(this._defaultViewModel)),this._set("viewModel",t))}render(){const{label:t}=this;return d("div",{"aria-label":t,class:this.classes(x.base,Pe.widget)},d("div",{class:x.container},this._renderContent()))}_renderContent(){return[this._renderToggles(),this._renderLayerList(),this.view?.type==="2d"&&this.visibleElements.gridControls?this._renderGridOptions():null]}_renderToggles(){const{visibleElements:t,view:e}=this,i=[t.selfEnabledToggle?this._renderSelfEnabledToggle():null,t.featureEnabledToggle?this._renderFeatureEnabledToggle():null,t.gridEnabledToggle&&e?.type==="2d"?this._renderGridEnabledToggle():null].filter(X),s=[t.enabledToggle?this._renderEnabledToggle():null,i.length>0?d("div",{class:x.nestedContainer},i):null].filter(X);return s.length===0?null:d("calcite-block",{class:x.toggleBlock,heading:t.header?this.label:"",key:"toggle-block",label:this.label,open:!0},s)}_renderEnabledToggle(){return d(re,{checked:this.viewModel.snappingOptions.enabled,disabled:this._enabledToggleDisabled,key:`${this.id}__enabled-toggle`,label:this.messages.enableSnapping,onChange:this._enableSnappingSwitchChange})}_renderSelfEnabledToggle(){return d(re,{checked:this.viewModel.snappingOptions.selfEnabled,disabled:this._secondaryElementsDisabled,key:`${this.id}__self-enabled-toggle`,label:this.messages.geometryGuides,onChange:this._selfEnabledSwitchChange})}_renderFeatureEnabledToggle(){return d(re,{checked:this.viewModel.snappingOptions.featureEnabled,disabled:this._secondaryElementsDisabled,key:`${this.id}__feature-enabled-toggle`,label:this.messages.featureToFeature,onChange:this._featureEnabledSwitchChange})}_renderGridEnabledToggle(){return d(re,{checked:this.viewModel.snappingOptions.gridEnabled,disabled:this._secondaryElementsDisabled,key:`${this.id}__grid-enabled-toggle`,label:this.messages.grid,onChange:this._gridEnabledSwitchChange})}_renderLayerList(){if(!this.visibleElements.layerList)return null;const{messages:t,viewModel:e}=this,i=e.layerListViewModel.operationalItems.length>9?d("calcite-input",{class:x.layerListFilter,clearable:!0,placeholder:t?.searchLayers,onCalciteInputInput:({currentTarget:{value:a}})=>{this._layerListFilter=a===""?null:new RegExp(a,"i")}}):null,s=this._secondaryElementsDisabled,n=this.layerListOpen&&!s,r=e.layerListViewModel.operationalItems?.find(a=>!!a.children.length);return d("calcite-block",{class:x.layerListBlock,collapsible:!0,disabled:this._secondaryElementsDisabled,heading:t.snappingLayers,key:"list-block",open:n,onCalciteBlockToggle:a=>this.layerListOpen=a.currentTarget.open},i,this._renderToggleLayersButton(),d("calcite-list",{class:x.layerList,displayMode:r?"nested":"flat",label:t?.snappingLayers,selectionMode:"none"},this._renderLayerListItemCollection(e.layerListViewModel.operationalItems)))}_renderGridOptions(){const{view:t,visibleElements:e,snappingManager:i,snappingOptions:s,_openAndReady:n}=this,{gridEnabled:r,enabled:a}=s;(n||t?.type==="2d"&&t.grid)&&this._startLoadGrid();const c=this._gridLoadTask?.value,p=c&&t?.type==="2d"&&d(c,{snappingManager:i,snappingOptions:s,view:t,visibleElements:e.gridControlsElements});return d("calcite-block",{class:x.layerListBlock,collapsible:!0,disabled:!r||!a,heading:this.messages.gridOptionsHeading,key:"grid-block",open:n,onCalciteBlockClose:()=>this.gridOptionsOpen=!1,onCalciteBlockOpen:()=>this.gridOptionsOpen=!0},p??d("calcite-loader",{label:this.messagesCommon.loading,scale:"s",text:this.messagesCommon.loading}))}async _startLoadGrid(){!this._gridLoadTask&&this.visibleElements.gridControls&&this.view?.type==="2d"&&(this._gridLoadTask=tt(async()=>(await g(async()=>{const{default:t}=await import("./GridControls-xszWk4im.js");return{default:t}},__vite__mapDeps([31,1,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,6,7,57,58,59,60,61,62,23,63,64,65,66,67,29,68,69]))).default))}_renderLayerListItemCollection(t){const e=this._layerListFilter;return t.map(i=>{switch(e?we(i,e):null){case"children":{const s=i.children.filter(n=>we(n,e)!==!1);return this._renderLayerListItemGroup(i,s)}case"self":case null:return this._renderLayerListItemOrGroup(i);case!1:return we(i.parent,e)==="self"?this._renderLayerListItemOrGroup(i):null}}).toArray().filter(X)}_renderToggleLayersButton(){if(!this.visibleElements.layerListToggleLayersButton)return null;const{viewModel:{allLayersEnabled:t},messages:e}=this,i=t?e.disableAllLayers:e.enableAllLayers;return d("calcite-button",{appearance:"transparent",class:x.layerListButton,label:i,name:"layer-toggle",onclick:this._onToggleLayersButtonClick},i)}_renderLayerListItemOrGroup(t){if(t.children.length)return this._renderLayerListItemGroup(t);const{messages:{untitledLayer:e}}=this,i=t.title||e,s=()=>{this.viewModel.toggleSnappingForLayers([t.layer?.id],t.enabled!=="enabled")};return d("calcite-list-item",{class:x.layerListItem,key:`${this.id}-list-item-${t.uid}`,label:i,onCalciteListItemSelect:n=>{n.stopPropagation(),s()}},d("calcite-checkbox",{checked:t.enabled==="enabled",slot:"actions-start",onCalciteCheckboxChange:s}))}_renderLayerListItemGroup(t,e){const{messages:i}=this,{children:s,title:n}=t,r=n||i.untitledLayer,a=n&&n!==""?n:Nt(),c=!!e?.length,p=e??s,u=()=>{this.viewModel.toggleSnappingForLayers(t.childLayerIds,t.enabled!=="enabled")},y=p?.find(m=>!!m.children.length);return d("calcite-list-item",{class:x.layerListGroup,key:a,label:r,open:c,onCalciteListItemSelect:m=>{m.stopPropagation(),u()}},d("calcite-checkbox",{checked:t.enabled==="enabled",indeterminate:t.enabled==="indeterminate",slot:"actions-start",onCalciteCheckboxChange:u}),d("calcite-list",{displayMode:y?"nested":"flat",label:i?.snappingLayers,selectionMode:"none"},this._renderLayerListItemCollection(p)))}get _enabledToggleDisabled(){const t=this.snappingOptions;return t.enabledToggled||t.forceDisabled}get _secondaryElementsDisabled(){return this._enabledToggleDisabled||!this.snappingOptions.enabled}};o([l()],w.prototype,"_defaultViewModel",void 0),o([l()],w.prototype,"_layerListFilter",void 0),o([l()],w.prototype,"_gridLoadTask",void 0),o([l()],w.prototype,"_openAndReady",null),o([l()],w.prototype,"label",null),o([l({type:Boolean,nonNullable:!0})],w.prototype,"layerListOpen",void 0),o([l({type:Boolean,nonNullable:!0})],w.prototype,"gridOptionsOpen",void 0),o([l(),Y("esri/widgets/support/SnappingControls/t9n/SnappingControls")],w.prototype,"messages",void 0),o([l(),Y("esri/t9n/common")],w.prototype,"messagesCommon",void 0),o([l()],w.prototype,"snappingOptions",null),o([l()],w.prototype,"snappingManager",void 0),o([l()],w.prototype,"view",null),o([l()],w.prototype,"viewModel",null),o([l({type:Ce,nonNullable:!0})],w.prototype,"visibleElements",void 0),o([l()],w.prototype,"_enabledToggleDisabled",null),o([l()],w.prototype,"_secondaryElementsDisabled",null),w=o([_("esri.widgets.support.SnappingControls")],w);const Ri=w,K="esri-sketch",z={base:K,vertical:`${K}--vertical`,docked:`${K}-bar`,floating:`${K}-pad`,chipHorizontal:`${K}__selection-count-chip--horizontal`,chipVertical:`${K}__selection-count-chip--vertical`,chipVerticalSmall:`${K}__selection-count-chip--vertical--s`,popoverWrapper:`${K}__popover-wrapper`},Hi={point:"pin",polyline:"line",polygon:"polygon",rectangle:"rectangle",circle:"circle",multipoint:"pins",mesh:"i3-d-building",freehandPolygon:"freehand-area",freehandPolyline:"freehand"};let h=class extends W{constructor(t,e){super(t,e),this._activeCustomToolOptions=null,this._selectionToolbar=null,this._viewModelHandlesGroup=null,this.availableCreateTools=["point","polyline","polygon","rectangle","circle"],this.customToolOptions=null,this.customActions=null,this.toolbarKind="floating",this.contextualToolLocation="separate",this.groupCollapsePriorities=null,this.messages=null,this.messagesCommon=null,this.visibleElements=new L,this._defaultViewModel=null,this._calcitePopoverReferenceElement=null,this._relativeLocation="top",this._popoverOpen=!1,this._activateCreateTool=this._activateCreateTool.bind(this),this.viewModel=t?.viewModel||(this._defaultViewModel=new lt({creationMode:t?.creationMode??"continuous"}))}initialize(){const{layer:t,view:e}=this,i=new Ti({view:e?.type==="2d"?e:null,sources:t?[t]:null,scale:this.scale});this.addHandles([b(()=>this.viewModel,s=>{this._viewModelHandlesGroup=he(this._viewModelHandlesGroup),s&&(this._viewModelHandlesGroup=$e([s.on("create",()=>this.scheduleRender()),s.on("update",()=>this.scheduleRender()),s.on("delete",n=>this.emit("delete",n)),s.on("undo",()=>this.scheduleRender()),s.on("redo",()=>this.scheduleRender()),b(()=>s.layer,n=>{this._selectionToolbar&&(this._selectionToolbar.sources=n?[n]:null)}),b(()=>s.view,n=>{this._selectionToolbar&&(this._selectionToolbar.view=n?.type==="2d"?n:null)}),b(()=>s.state,()=>this.notifyChange("state"))]))},ze),Ft(()=>i.activeToolInfo,()=>this.viewModel.cancel()),i.on("complete",s=>this._onSelectionOperationComplete(s)),b(()=>{const{selectionTools:s}=this.visibleElements;return{lassoTool:!!s?.["lasso-selection"],rectangleTool:!!s?.["rectangle-selection"]}},s=>{Object.assign(i.visibleElements,s)},ze)]),this._selectionToolbar=i}loadDependencies(){return J({action:()=>g(()=>import("./index-CzvLtnX1.js").then(t=>t.HN),[]),chip:()=>g(()=>import("./index-BbC7Y_Wo.js"),__vite__mapDeps([70,1])),popover:()=>g(()=>import("./index-CzvLtnX1.js").then(t=>t.HS),[])})}destroy(){this._selectionToolbar?.destroy(),this._viewModelHandlesGroup=he(this._viewModelHandlesGroup)}get activeTool(){const t=this._selectionToolbar?.activeToolInfo;if(t)switch(t.toolName){case"lasso":return"lasso-selection";case"rectangle":return"rectangle-selection";case"default":return"custom-selection"}const e=this._effectiveAvailableCreateTools,{activeTool:i,activeCreateToolDrawMode:s}=this.viewModel;return i==="polygon"&&s==="freehand"&&e?.includes("freehandPolygon")?"freehandPolygon":i==="polyline"&&s==="freehand"&&e?.includes("freehandPolyline")?"freehandPolyline":this.viewModel.activeTool}get activeTooltip(){return this.viewModel.activeTooltip}get createGraphic(){return this.viewModel.createGraphic}get creationMode(){return this.viewModel.creationMode}set creationMode(t){this.viewModel.creationMode=t}get defaultCreateOptions(){return this.viewModel.defaultCreateOptions}set defaultCreateOptions(t){this.viewModel.defaultCreateOptions=t}get defaultUpdateOptions(){return this.viewModel.defaultUpdateOptions}set defaultUpdateOptions(t){this.viewModel.defaultUpdateOptions=t}get icon(){return"pencil"}set icon(t){this._overrideIfSome("icon",t)}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}get labelOptions(){return this.viewModel.labelOptions}set labelOptions(t){this.viewModel.labelOptions=t}get layer(){return this.viewModel.layer}set layer(t){this.viewModel.layer=t}set layout(t){this._set("layout",t),this._selectionToolbar&&(this._selectionToolbar.layout=t)}set scale(t){this._set("scale",t),this._selectionToolbar&&(this._selectionToolbar.scale=t)}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(t){this.viewModel.snappingOptions=t}get state(){return this._selectionToolbar?.activeToolInfo?"active":this.viewModel.state}get tooltipOptions(){return this.viewModel.tooltipOptions}set tooltipOptions(t){this.viewModel.tooltipOptions=t}get updateGraphics(){return this.viewModel.updateGraphics}get valueOptions(){return this.viewModel.valueOptions}set valueOptions(t){this.viewModel.valueOptions=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}set viewModel(t){const e=this._get("viewModel");t!==e&&(e&&e===this._defaultViewModel&&ne(e),this._set("viewModel",t))}get _effectiveAvailableCreateTools(){const{availableCreateTools:t,view:e,visibleElements:i}=this,s=t?.filter(n=>!!i.createTools?.[n]);return e?.type==="3d"?s?.filter(n=>n!=="multipoint"):s}create(t,e,i){const s=i?.createOptions??e;return this._activeCustomToolOptions=i,ue(this.viewModel.create(t,s))}update(t,e){return ue(this.viewModel.update(t,e))}complete(){this.viewModel.complete()}cancel(){this._selectionToolbar?.cancel(),this.viewModel.cancel(),this._activeCustomToolOptions=null}undo(){this.viewModel.undo(),this.view?.focus()}redo(){this.viewModel.redo(),this.view?.focus()}delete(){this.viewModel.delete()}duplicate(){return this.viewModel.duplicate()}dismissFloatingElements(){this._popoverOpen=!1}render(){const{toolbarKind:t,layout:e,scale:i}=this,s=this.customActions?.filter(n=>n.position==="selection-toolbar");return d("div",null,d("div",{classes:{[z.base]:!0,[z.floating]:t==="floating",[z.docked]:t==="docked",[z.vertical]:e==="vertical"}},d(je,{barStyle:t,layout:e,scale:i},this._renderSelectionSetItemGroupInline(),d("div",{"group-kind":"split-button",key:"selection-split-button",priority:this.groupCollapsePriorities?.get("selectionTools")??ae.Low},this._renderDefaultSelectionButton(),this._selectionToolbar?.render(),s?.map(n=>this._renderToolbarItem(n))),this._renderCreateToolActionGroup(),this._renderUndoRedoMenuItemGroup(),this._renderSettingsMenuItemGroup()),this._renderSelectionSetToolbar(),this._renderSettingsMenuPopover()))}_renderSettingsMenuPopover(){const{messagesCommon:t,snappingOptions:e,view:i,viewModel:s,visibleElements:n}=this;if(!this._calcitePopoverReferenceElement)return;const r={directionModePicker:n.directionModePicker,labelsToggle:n.labelsToggle,tooltipsToggle:n.tooltipsToggle},a=this.layout==="horizontal"?this._relativeLocation==="top"?"bottom-end":"top-end":"right-end";return d("calcite-popover",{closable:!0,focusTrapDisabled:!0,heading:t.settings,label:t.settings,open:this._popoverOpen,overlayPositioning:"fixed",placement:a,referenceElement:this._calcitePopoverReferenceElement,scale:this.scale,onCalcitePopoverBeforeClose:()=>this._popoverOpen=!1,onCalcitePopoverBeforeOpen:c=>this._remeasurePopoverSizes(c.currentTarget),onCalcitePopoverClose:()=>this._refocusOnView()},d("div",{class:z.popoverWrapper},Object.values(r).includes(!0)?d(Mi,{sketchOptions:s.sketchOptions,viewType:i?.type,visibleElements:new Ae(r)}):void 0,n.snappingControls&&i&&e?d(Ri,{snappingManager:this.viewModel.snappingManager,snappingOptions:e,view:i,visibleElements:n.snappingControlsElements}):void 0))}_renderSelectionSetToolbar(){if(this.contextualToolLocation!=="separate")return;const t=this._renderSelectionSetItemGroup();return t?.length?d(je,{barStyle:this.toolbarKind,layout:this.layout,scale:this.scale},t):void 0}_renderSelectionSetItemGroupInline(){return this.contextualToolLocation==="separate"?[]:this._renderSelectionSetItemGroup()}_renderUndoRedoMenuItemGroup(){return d("div",{"group-kind":"split-button",key:"undo-redo-menu",priority:this.groupCollapsePriorities?.get("undoRedo")??ae.Medium,slot:"actions-end"},this._renderUndoButton(),this._renderRedoButton())}_renderSettingsMenuItemGroup(){const t=[],e=[];this.customActions?.forEach(s=>{s.position==="settings-before"?e.push(s):s.position==="settings-after"&&t.push(s)});const i=[...e.map(s=>this._renderToolbarItem(s)),this._renderSettingsMenuButton(),...t.map(s=>this._renderToolbarItem(s))].filter(X);if(i.length)return d("div",{"allow-collapse":!1,"group-kind":"overflow-group",key:"settings-menu",priority:this.groupCollapsePriorities?.get("settings")??ae.Max,slot:"actions-end"},i)}_renderSelectionSetItemGroup(){if(!this.updateGraphics.length)return[];const t=this.contextualToolLocation==="inline-end"?"actions-end":void 0,e=this.customActions?.filter(n=>n.position==="before-selection-set"),i=this.customActions?.filter(n=>n.position==="after-selection-set"),s=this.groupCollapsePriorities?.get("selectionSet")??ae.High;return[d("div",{"group-kind":"measured-content",key:"selection-count-chip-group",priority:s,slot:t},this._renderFeatureCountChip()),d("div",{"allow-collapse":!1,"group-kind":"overflow-group",key:"selection-set-tool-group",priority:s,slot:t},e?.map(n=>this._renderToolbarItem(n)),this._renderDuplicateButton(),this._renderDeleteButton(),i?.map(n=>this._renderToolbarItem(n)))]}_renderDefaultSelectionButton(){if(!this.viewModel.updateOnGraphicClick)return[];const{messages:t,state:e}=this;return this._renderToolbarItem({id:"pointer-select",text:t.selectFeature,icon:"cursor",onclick:this._activateDefaultSelectTool,active:e==="ready"})}_renderCreateToolActionGroup(){const t=this._effectiveAvailableCreateTools?.flatMap(i=>this._renderBuiltInCreateToolItem(i))??[],e=this.customToolOptions?.flatMap(i=>this._renderCustomToolItem(i))??[];return d("div",{"group-kind":"overflow-group",key:"create-tools-group",priority:this.groupCollapsePriorities?.get("createTools")??ae.High},t,e)}_renderBuiltInCreateToolItem(t){return this._renderToolbarItem({id:`${t}-button`,text:this.messages.draw[t],icon:Hi[t],onclick:()=>this._activateCreateTool(t),active:this.activeTool===t&&!this._activeCustomToolOptions})}_renderCustomToolItem(t){const{toolKey:e}=t;return this._renderToolbarItem({id:`custom-${t.toolKey}`,text:t.label,icon:t.icon,onclick:()=>this._activateCreateTool(t.toolName,null,t),active:this._activeCustomToolOptions?.toolKey===e})}_renderUndoButton(){return this.visibleElements.undoRedoMenu?this._renderToolbarItem({id:"undo-button",text:this.messages.undo,icon:"undo",disabled:!this.viewModel.canUndo(),onclick:this.undo,flipRTL:!0}):[]}_renderRedoButton(){return this.visibleElements.undoRedoMenu?this._renderToolbarItem({id:"redo-button",text:this.messages.redo,icon:"redo",disabled:!this.viewModel.canRedo(),onclick:this.redo,flipRTL:!0}):[]}_renderSettingsMenuButton(){return this.visibleElements.settingsMenu?this._renderToolbarItem({id:"settings-menu-action",text:this.messagesCommon.settings,icon:"gear",active:this._popoverOpen,onclick:()=>this._popoverOpen=!this._popoverOpen,afterCreate:t=>this._calcitePopoverReferenceElement=t,afterUpdate:t=>this._calcitePopoverReferenceElement=t,afterRemoved:()=>this._calcitePopoverReferenceElement=null}):[]}_renderFeatureCountChip(){if(!this.visibleElements.selectionCountLabel)return[];const{layout:t,messages:e,scale:i,id:s,updateGraphics:{length:n}}=this,r=Ue(e.selectedCount,{count:n}),a=i==="s"?99:999,c=n>a?Ue(e.selectedCountTruncated,{truncated:a}):n,p=i==="s"&&t==="vertical",u=p?`${s}-selection-chip-small`:`${s}-selection-chip`;return[p?d("span",{classes:{[z.chipVertical]:!0,[z.chipVerticalSmall]:this.scale==="s"},id:u,tabIndex:0,title:r},c):d("calcite-chip",{appearance:"outline",class:t==="horizontal"?z.chipHorizontal:z.chipVertical,id:u,kind:"brand",label:r,scale:i==="l"?"m":"s",tabIndex:0,title:t==="vertical"?r:void 0},t==="vertical"?c:r)]}_renderDuplicateButton(){if(!this.visibleElements.duplicateButton)return[];const{messages:t}=this;return this._renderToolbarItem({id:"duplicate",text:this.updateGraphics.length>1?t.duplicateFeatures:t.duplicateFeature,icon:"copy",onclick:this._onDuplicateSelect})}_renderDeleteButton(){if(!this.visibleElements.deleteButton)return[];const{messages:t}=this,e=this.updateGraphics.length>1?t.deleteFeatures:t.deleteFeature;return this._renderToolbarItem({id:"delete",text:e,icon:"trash",onclick:this.delete})}_renderToolbarItem({id:t,text:e,icon:i,disabled:s,onclick:n,active:r,flipRTL:a,afterCreate:c,afterUpdate:p,afterRemoved:u}){const y=`${this.id}-${t}`;return[d("calcite-action",{active:r,afterCreate:c,afterRemoved:u,afterUpdate:p,bind:this,"data-testid":t,disabled:s||this.state==="disabled",icon:i,iconFlipRtl:a??!1,id:y,key:t,onclick:n,scale:this.scale,text:e,title:e})]}_remeasurePopoverSizes(t){try{const e=t.parentElement,i=this?.view?.container?.getBoundingClientRect(),s=e?.style;if(!(e&&i&&s&&this.view?.container?.contains(e)))return;const n=this._calcitePopoverReferenceElement;if(!n)return;const{bottom:r,top:a}=n.getBoundingClientRect();if(this.layout==="horizontal"){const p=r<i.height/2;p!==(this._relativeLocation==="top")&&(this._relativeLocation=p?"top":"bottom"),p?(s?.setProperty("--sketch-view-height-offset",r-i.top+"px"),s?.setProperty("--sketch-view-margin-offset","30px")):(s?.setProperty("--sketch-view-height-offset",i.bottom-a+"px"),s?.setProperty("--sketch-view-margin-offset","15px"))}else this.layout==="vertical"&&(s.setProperty("--sketch-view-height-offset","15px"),s.setProperty("--sketch-view-margin-offset","15px"));const c=t.shadowRoot?.querySelector("div.header")?.getBoundingClientRect().height;s.setProperty("--sketch-popover-header-offset",`${c}px`)}catch(e){ge.getLogger(this.declaredClass).warnOnce("Sketch failed to lay out settings menu.",e)}}_activateCreateTool(t,e,i){const s=this._activeCustomToolOptions;if(i||s){if(i?.toolKey===s?.toolKey)return void this.cancel()}else if(this.activeTool===t)return void this.cancel();this._selectionToolbar?.cancel(),this.create(t,e,i)}_onDuplicateSelect(){const t=this.duplicate(),e=this.viewModel.activeTool;e!=="transform"&&e!=="reshape"||this.update(t,{tool:e})}_onSelectionOperationComplete(t){const{viewModel:{defaultUpdateOptions:e}}=this,{selection:i}=t;if(!t.aborted&&i.length){const s=e.tool,n=i.length>1&&s==="reshape"?"transform":s;this.update(i,{...e,tool:n})}this.notifyChange("state")}_activateDefaultSelectTool(){this.cancel(),this.view?.focus()}_refocusOnView(){this.activeTool&&this.view?.focus()}};o([l()],h.prototype,"_activeCustomToolOptions",void 0),o([l()],h.prototype,"activeTool",null),o([l({readOnly:!0})],h.prototype,"activeTooltip",null),o([l({cast:t=>{if(!t?.length)return null;const e=new Set(["point","polyline","polygon","rectangle","circle","multipoint","freehandPolyline","freehandPolygon","mesh"]);return t.filter(i=>e.has(i))}})],h.prototype,"availableCreateTools",void 0),o([l({readOnly:!0})],h.prototype,"createGraphic",null),o([l()],h.prototype,"creationMode",null),o([l()],h.prototype,"customToolOptions",void 0),o([l()],h.prototype,"customActions",void 0),o([l()],h.prototype,"defaultCreateOptions",null),o([l()],h.prototype,"defaultUpdateOptions",null),o([l()],h.prototype,"icon",null),o([l()],h.prototype,"label",null),o([l()],h.prototype,"labelOptions",null),o([l()],h.prototype,"layer",null),o([l({type:["horizontal","vertical"],value:"horizontal"})],h.prototype,"layout",null),o([l({value:"m"})],h.prototype,"scale",null),o([l()],h.prototype,"toolbarKind",void 0),o([l()],h.prototype,"contextualToolLocation",void 0),o([l()],h.prototype,"groupCollapsePriorities",void 0),o([l(),Y("esri/widgets/Sketch/t9n/Sketch")],h.prototype,"messages",void 0),o([l(),Y("esri/t9n/common")],h.prototype,"messagesCommon",void 0),o([l()],h.prototype,"snappingOptions",null),o([l()],h.prototype,"state",null),o([l()],h.prototype,"tooltipOptions",null),o([l({readOnly:!0})],h.prototype,"updateGraphics",null),o([l({type:zt,nonNullable:!0})],h.prototype,"valueOptions",null),o([l()],h.prototype,"view",null),o([l({type:lt}),ei(["create","update","undo","redo"])],h.prototype,"viewModel",null),o([l({type:L,nonNullable:!0})],h.prototype,"visibleElements",void 0),o([l()],h.prototype,"_effectiveAvailableCreateTools",null),o([l()],h.prototype,"_defaultViewModel",void 0),o([l()],h.prototype,"_calcitePopoverReferenceElement",void 0),o([l()],h.prototype,"_relativeLocation",void 0),o([l()],h.prototype,"_popoverOpen",void 0),h=o([_("esri.widgets.Sketch")],h);const Ni=h,yo=Object.freeze(Object.defineProperty({__proto__:null,default:Ni},Symbol.toStringTag,{value:"Module"}));export{yo as S,re as o,rt as r,ut as t};
